import{r as U,a as fd,g as dd,R as Kn}from"./react-CIP6LD3P.js";import{R as Ec,O as za,P as wc,S as Qa,a as ha,V as pd,b as hd,B as md,N as Ad,A as gd,W as Sc,C as vd,c as Ns,d as Ze,e as Bd,L as ma,f as Ur,U as Ps,T as Cd,g as yd,h as Ed,i as Ga,j as Mc,M as Us,I as wd,k as Xa,D as xc,l as Wa,m as Ai,F as zn,n as dn,o as dr,p as Sd,q as Md,r as xd,s as Hs,t as Id,Q as Ic,u as Rd,v as Rc,w as Fd,x as Td,y as gi,z as _d,E as Fc,G as Dd,H as Gd,J as Ld,K as Zt,X as Pd,Y as La,Z as Hd,_ as En,$ as kd,a0 as Aa,a1 as Od,a2 as je,a3 as Lr,a4 as Nd,a5 as Tc,a6 as Ud,a7 as jd,a8 as Jd,a9 as bd,aa as Kd,ab as ga,ac as zd,ad as Qd,ae as Xd,af as Wd,ag as Zd,ah as _c,ai as Yd,aj as Jn,ak as Nu,al as Uu,am as ju,an as Vd,ao as qd,ap as $d,aq as ep,ar as Dc,as as Yt,at as wn,au as Pr,av as tp,aw as Tt,ax as Gc,ay as ks,az as np,aA as Pa,aB as rp,aC as ip,aD as sp,aE as op,aF as ap,aG as Ju,aH as lp,aI as up,aJ as cp,aK as fp,aL as dp,aM as pp,aN as hp,aO as Gs,aP as mp,aQ as Ft,aR as Ap}from"./three-1cqotj04.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))u(o);new MutationObserver(o=>{for(const f of o)if(f.type==="childList")for(const c of f.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&u(c)}).observe(document,{childList:!0,subtree:!0});function i(o){const f={};return o.integrity&&(f.integrity=o.integrity),o.referrerPolicy&&(f.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?f.credentials="include":o.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function u(o){if(o.ep)return;o.ep=!0;const f=i(o);fetch(o.href,f)}})();var Lc={exports:{}},js={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gp=U,vp=Symbol.for("react.element"),Bp=Symbol.for("react.fragment"),Cp=Object.prototype.hasOwnProperty,yp=gp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ep={key:!0,ref:!0,__self:!0,__source:!0};function Pc(a,n,i){var u,o={},f=null,c=null;i!==void 0&&(f=""+i),n.key!==void 0&&(f=""+n.key),n.ref!==void 0&&(c=n.ref);for(u in n)Cp.call(n,u)&&!Ep.hasOwnProperty(u)&&(o[u]=n[u]);if(a&&a.defaultProps)for(u in n=a.defaultProps,n)o[u]===void 0&&(o[u]=n[u]);return{$$typeof:vp,type:a,key:f,ref:c,props:o,_owner:yp.current}}js.Fragment=Bp;js.jsx=Pc;js.jsxs=Pc;Lc.exports=js;var S=Lc.exports,Ha={},bu=fd;Ha.createRoot=bu.createRoot,Ha.hydrateRoot=bu.hydrateRoot;var Hc={exports:{}},pr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */pr.ConcurrentRoot=1;pr.ContinuousEventPriority=4;pr.DefaultEventPriority=16;pr.DiscreteEventPriority=1;pr.IdleEventPriority=536870912;pr.LegacyRoot=0;Hc.exports=pr;var Hr=Hc.exports;function wp(a){let n;const i=new Set,u=(v,A)=>{const m=typeof v=="function"?v(n):v;if(m!==n){const B=n;n=A?m:Object.assign({},n,m),i.forEach(y=>y(n,B))}},o=()=>n,f=(v,A=o,m=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let B=A(n);function y(){const w=A(n);if(!m(B,w)){const D=B;v(B=w,D)}}return i.add(y),()=>i.delete(y)},p={setState:u,getState:o,subscribe:(v,A,m)=>A||m?f(v,A,m):(i.add(v),()=>i.delete(v)),destroy:()=>i.clear()};return n=a(u,o,p),p}const Sp=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Ku=Sp?U.useEffect:U.useLayoutEffect;function kc(a){const n=typeof a=="function"?wp(a):a,i=(u=n.getState,o=Object.is)=>{const[,f]=U.useReducer(F=>F+1,0),c=n.getState(),h=U.useRef(c),p=U.useRef(u),v=U.useRef(o),A=U.useRef(!1),m=U.useRef();m.current===void 0&&(m.current=u(c));let B,y=!1;(h.current!==c||p.current!==u||v.current!==o||A.current)&&(B=u(c),y=!o(m.current,B)),Ku(()=>{y&&(m.current=B),h.current=c,p.current=u,v.current=o,A.current=!1});const w=U.useRef(c);Ku(()=>{const F=()=>{try{const _=n.getState(),O=p.current(_);v.current(m.current,O)||(h.current=_,m.current=O,f())}catch{A.current=!0,f()}},x=n.subscribe(F);return n.getState()!==w.current&&F(),x},[]);const D=y?B:m.current;return U.useDebugValue(D),D};return Object.assign(i,n),i[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const u=[i,n];return{next(){const o=u.length<=0;return{value:u.shift(),done:o}}}},i}const Mp=a=>typeof a=="object"&&typeof a.then=="function",cr=[];function Oc(a,n,i=(u,o)=>u===o){if(a===n)return!0;if(!a||!n)return!1;const u=a.length;if(n.length!==u)return!1;for(let o=0;o<u;o++)if(!i(a[o],n[o]))return!1;return!0}function Nc(a,n=null,i=!1,u={}){n===null&&(n=[a]);for(const f of cr)if(Oc(n,f.keys,f.equal)){if(i)return;if(Object.prototype.hasOwnProperty.call(f,"error"))throw f.error;if(Object.prototype.hasOwnProperty.call(f,"response"))return u.lifespan&&u.lifespan>0&&(f.timeout&&clearTimeout(f.timeout),f.timeout=setTimeout(f.remove,u.lifespan)),f.response;if(!i)throw f.promise}const o={keys:n,equal:u.equal,remove:()=>{const f=cr.indexOf(o);f!==-1&&cr.splice(f,1)},promise:(Mp(a)?a:a(...n)).then(f=>{o.response=f,u.lifespan&&u.lifespan>0&&(o.timeout=setTimeout(o.remove,u.lifespan))}).catch(f=>o.error=f)};if(cr.push(o),!i)throw o.promise}const xp=(a,n,i)=>Nc(a,n,!1,i),Ip=(a,n,i)=>void Nc(a,n,!0,i),Rp=a=>{if(a===void 0||a.length===0)cr.splice(0,cr.length);else{const n=cr.find(i=>Oc(a,i.keys,i.equal));n&&n.remove()}};var Uc={exports:{}},jc={exports:{}},Jc={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(a){function n(te,ce){var $=te.length;te.push(ce);e:for(;0<$;){var me=$-1>>>1,Ae=te[me];if(0<o(Ae,ce))te[me]=ce,te[$]=Ae,$=me;else break e}}function i(te){return te.length===0?null:te[0]}function u(te){if(te.length===0)return null;var ce=te[0],$=te.pop();if($!==ce){te[0]=$;e:for(var me=0,Ae=te.length,Be=Ae>>>1;me<Be;){var We=2*(me+1)-1,ct=te[We],Te=We+1,mt=te[Te];if(0>o(ct,$))Te<Ae&&0>o(mt,ct)?(te[me]=mt,te[Te]=$,me=Te):(te[me]=ct,te[We]=$,me=We);else if(Te<Ae&&0>o(mt,$))te[me]=mt,te[Te]=$,me=Te;else break e}}return ce}function o(te,ce){var $=te.sortIndex-ce.sortIndex;return $!==0?$:te.id-ce.id}if(typeof performance=="object"&&typeof performance.now=="function"){var f=performance;a.unstable_now=function(){return f.now()}}else{var c=Date,h=c.now();a.unstable_now=function(){return c.now()-h}}var p=[],v=[],A=1,m=null,B=3,y=!1,w=!1,D=!1,F=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function O(te){for(var ce=i(v);ce!==null;){if(ce.callback===null)u(v);else if(ce.startTime<=te)u(v),ce.sortIndex=ce.expirationTime,n(p,ce);else break;ce=i(v)}}function Q(te){if(D=!1,O(te),!w)if(i(p)!==null)w=!0,ve(W);else{var ce=i(v);ce!==null&&tt(Q,ce.startTime-te)}}function W(te,ce){w=!1,D&&(D=!1,x(I),I=-1),y=!0;var $=B;try{for(O(ce),m=i(p);m!==null&&(!(m.expirationTime>ce)||te&&!H());){var me=m.callback;if(typeof me=="function"){m.callback=null,B=m.priorityLevel;var Ae=me(m.expirationTime<=ce);ce=a.unstable_now(),typeof Ae=="function"?m.callback=Ae:m===i(p)&&u(p),O(ce)}else u(p);m=i(p)}if(m!==null)var Be=!0;else{var We=i(v);We!==null&&tt(Q,We.startTime-ce),Be=!1}return Be}finally{m=null,B=$,y=!1}}var X=!1,K=null,I=-1,L=5,G=-1;function H(){return!(a.unstable_now()-G<L)}function z(){if(K!==null){var te=a.unstable_now();G=te;var ce=!0;try{ce=K(!0,te)}finally{ce?V():(X=!1,K=null)}}else X=!1}var V;if(typeof _=="function")V=function(){_(z)};else if(typeof MessageChannel<"u"){var oe=new MessageChannel,xe=oe.port2;oe.port1.onmessage=z,V=function(){xe.postMessage(null)}}else V=function(){F(z,0)};function ve(te){K=te,X||(X=!0,V())}function tt(te,ce){I=F(function(){te(a.unstable_now())},ce)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(te){te.callback=null},a.unstable_continueExecution=function(){w||y||(w=!0,ve(W))},a.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):L=0<te?Math.floor(1e3/te):5},a.unstable_getCurrentPriorityLevel=function(){return B},a.unstable_getFirstCallbackNode=function(){return i(p)},a.unstable_next=function(te){switch(B){case 1:case 2:case 3:var ce=3;break;default:ce=B}var $=B;B=ce;try{return te()}finally{B=$}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(te,ce){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var $=B;B=te;try{return ce()}finally{B=$}},a.unstable_scheduleCallback=function(te,ce,$){var me=a.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?me+$:me):$=me,te){case 1:var Ae=-1;break;case 2:Ae=250;break;case 5:Ae=1073741823;break;case 4:Ae=1e4;break;default:Ae=5e3}return Ae=$+Ae,te={id:A++,callback:ce,priorityLevel:te,startTime:$,expirationTime:Ae,sortIndex:-1},$>me?(te.sortIndex=$,n(v,te),i(p)===null&&te===i(v)&&(D?(x(I),I=-1):D=!0,tt(Q,$-me))):(te.sortIndex=Ae,n(p,te),w||y||(w=!0,ve(W))),te},a.unstable_shouldYield=H,a.unstable_wrapCallback=function(te){var ce=B;return function(){var $=B;B=ce;try{return te.apply(this,arguments)}finally{B=$}}}})(Jc);jc.exports=Jc;var ka=jc.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fp=function(n){var i={},u=U,o=ka,f=Object.assign;function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var h=u.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,p=Symbol.for("react.element"),v=Symbol.for("react.portal"),A=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),w=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),x=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),Q=Symbol.for("react.offscreen"),W=Symbol.iterator;function X(e){return e===null||typeof e!="object"?null:(e=W&&e[W]||e["@@iterator"],typeof e=="function"?e:null)}function K(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case A:return"Fragment";case v:return"Portal";case B:return"Profiler";case m:return"StrictMode";case F:return"Suspense";case x:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case w:return(e.displayName||"Context")+".Consumer";case y:return(e._context.displayName||"Context")+".Provider";case D:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case _:return t=e.displayName||null,t!==null?t:K(e.type)||"Memo";case O:t=e._payload,e=e._init;try{return K(e(t))}catch{}}return null}function I(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return K(t);case 8:return t===m?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function L(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function G(e){if(L(e)!==e)throw Error(c(188))}function H(e){var t=e.alternate;if(!t){if(t=L(e),t===null)throw Error(c(188));return t!==e?null:e}for(var r=e,s=t;;){var l=r.return;if(l===null)break;var d=l.alternate;if(d===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===d.child){for(d=l.child;d;){if(d===r)return G(l),e;if(d===s)return G(l),t;d=d.sibling}throw Error(c(188))}if(r.return!==s.return)r=l,s=d;else{for(var E=!1,R=l.child;R;){if(R===r){E=!0,r=l,s=d;break}if(R===s){E=!0,s=l,r=d;break}R=R.sibling}if(!E){for(R=d.child;R;){if(R===r){E=!0,r=d,s=l;break}if(R===s){E=!0,s=d,r=l;break}R=R.sibling}if(!E)throw Error(c(189))}}if(r.alternate!==s)throw Error(c(190))}if(r.tag!==3)throw Error(c(188));return r.stateNode.current===r?e:t}function z(e){return e=H(e),e!==null?V(e):null}function V(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=V(e);if(t!==null)return t;e=e.sibling}return null}function oe(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){if(e.tag!==4){var t=oe(e);if(t!==null)return t}e=e.sibling}return null}var xe=Array.isArray,ve=n.getPublicInstance,tt=n.getRootHostContext,te=n.getChildHostContext,ce=n.prepareForCommit,$=n.resetAfterCommit,me=n.createInstance,Ae=n.appendInitialChild,Be=n.finalizeInitialChildren,We=n.prepareUpdate,ct=n.shouldSetTextContent,Te=n.createTextInstance,mt=n.scheduleTimeout,Vt=n.cancelTimeout,br=n.noTimeout,hr=n.isPrimaryRenderer,_t=n.supportsMutation,mr=n.supportsPersistence,vt=n.supportsHydration,wi=n.getInstanceFromNode,Si=n.preparePortalMount,Ks=n.getCurrentEventPriority,zs=n.detachDeletedInstance,Qs=n.supportsMicrotasks,Xs=n.scheduleMicrotask,Xn=n.supportsTestSelectors,Ws=n.findFiberRoot,Zs=n.getBoundingRect,Mi=n.getTextContent,Wn=n.isHiddenSubtree,Kr=n.matchAccessibilityRole,Ys=n.setFocusIfFocusable,Vs=n.setupIntersectionObserver,xi=n.appendChild,Ar=n.appendChildToContainer,qs=n.commitTextUpdate,$s=n.commitMount,eo=n.commitUpdate,Zn=n.insertBefore,Bt=n.insertInContainerBefore,Ii=n.removeChild,xn=n.removeChildFromContainer,Mt=n.resetTextContent,ft=n.hideInstance,to=n.hideTextInstance,le=n.unhideInstance,Yn=n.unhideTextInstance,no=n.clearContainer,ro=n.cloneInstance,Ri=n.createContainerChildSet,Fi=n.appendChildToContainerChildSet,io=n.finalizeContainerChildren,Ti=n.replaceContainerChildren,_i=n.cloneHiddenInstance,Di=n.cloneHiddenTextInstance,so=n.canHydrateInstance,oo=n.canHydrateTextInstance,ao=n.canHydrateSuspenseInstance,Vn=n.isSuspenseInstancePending,zr=n.isSuspenseInstanceFallback,qn=n.registerSuspenseInstanceRetry,qt=n.getNextHydratableSibling,_e=n.getFirstHydratableChild,Gi=n.getFirstHydratableChildWithinContainer,lo=n.getFirstHydratableChildWithinSuspenseInstance,g=n.hydrateInstance,C=n.hydrateTextInstance,M=n.hydrateSuspenseInstance,k=n.getNextHydratableInstanceAfterSuspenseInstance,j=n.commitHydratedContainer,J=n.commitHydratedSuspenseInstance,Y=n.clearSuspenseBoundary,Z=n.clearSuspenseBoundaryFromContainer,re=n.shouldDeleteUnhydratedTailInstances,ne=n.didNotMatchHydratedContainerTextInstance,ie=n.didNotMatchHydratedTextInstance,ee;function Je(e){if(ee===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);ee=t&&t[1]||""}return`
`+ee+e}var fe=!1;function pe(e,t){if(!e||fe)return"";fe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(q){var s=q}Reflect.construct(e,[],t)}else{try{t.call()}catch(q){s=q}e.call(t.prototype)}else{try{throw Error()}catch(q){s=q}e()}}catch(q){if(q&&s&&typeof q.stack=="string"){for(var l=q.stack.split(`
`),d=s.stack.split(`
`),E=l.length-1,R=d.length-1;1<=E&&0<=R&&l[E]!==d[R];)R--;for(;1<=E&&0<=R;E--,R--)if(l[E]!==d[R]){if(E!==1||R!==1)do if(E--,R--,0>R||l[E]!==d[R]){var b=`
`+l[E].replace(" at new "," at ");return e.displayName&&b.includes("<anonymous>")&&(b=b.replace("<anonymous>",e.displayName)),b}while(1<=E&&0<=R);break}}}finally{fe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Je(e):""}var ye=Object.prototype.hasOwnProperty,Se=[],Pe=-1;function Ge(e){return{current:e}}function Ce(e){0>Pe||(e.current=Se[Pe],Se[Pe]=null,Pe--)}function Me(e,t){Pe++,Se[Pe]=e.current,e.current=t}var Le={},Ke=Ge(Le),Ie=Ge(!1),Qe=Le;function Ct(e,t){var r=e.type.contextTypes;if(!r)return Le;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},d;for(d in r)l[d]=t[d];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function it(e){return e=e.childContextTypes,e!=null}function At(){Ce(Ie),Ce(Ke)}function Ue(e,t,r){if(Ke.current!==Le)throw Error(c(168));Me(Ke,t),Me(Ie,r)}function lt(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(c(108,I(e)||"Unknown",l));return f({},r,s)}function be(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Le,Qe=Ke.current,Me(Ke,e),Me(Ie,Ie.current),!0}function He(e,t,r){var s=e.stateNode;if(!s)throw Error(c(169));r?(e=lt(e,t,Qe),s.__reactInternalMemoizedMergedChildContext=e,Ce(Ie),Ce(Ke),Me(Ke,e)):Ce(Ie),Me(Ie,r)}var Ve=Math.clz32?Math.clz32:nn,pn=Math.log,xt=Math.LN2;function nn(e){return e>>>=0,e===0?32:31-(pn(e)/xt|0)|0}var Li=64,Pi=4194304;function Qr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Hi(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,d=e.pingedLanes,E=r&268435455;if(E!==0){var R=E&~l;R!==0?s=Qr(R):(d&=E,d!==0&&(s=Qr(d)))}else E=r&~l,E!==0?s=Qr(E):d!==0&&(s=Qr(d));if(s===0)return 0;if(t!==0&&t!==s&&!(t&l)&&(l=s&-s,d=t&-t,l>=d||l===16&&(d&4194240)!==0))return t;if(s&4&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ve(t),l=1<<r,s|=e[r],t&=~l;return s}function wf(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Sf(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,d=e.pendingLanes;0<d;){var E=31-Ve(d),R=1<<E,b=l[E];b===-1?(!(R&r)||R&s)&&(l[E]=wf(R,t)):b<=t&&(e.expiredLanes|=R),d&=~R}}function uo(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function co(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Xr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ve(t),e[t]=r}function Mf(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-Ve(r),d=1<<l;t[l]=0,s[l]=-1,e[l]=-1,r&=~d}}function fo(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ve(r),l=1<<s;l&t|e[s]&t&&(e[s]|=t),r&=~l}}var ke=0;function ll(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var po=o.unstable_scheduleCallback,ul=o.unstable_cancelCallback,xf=o.unstable_shouldYield,If=o.unstable_requestPaint,dt=o.unstable_now,ho=o.unstable_ImmediatePriority,Rf=o.unstable_UserBlockingPriority,mo=o.unstable_NormalPriority,Ff=o.unstable_IdlePriority,ki=null,rn=null;function Tf(e){if(rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(ki,e,void 0,(e.current.flags&128)===128)}catch{}}function _f(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var sn=typeof Object.is=="function"?Object.is:_f,hn=null,Oi=!1,Ao=!1;function cl(e){hn===null?hn=[e]:hn.push(e)}function Df(e){Oi=!0,cl(e)}function on(){if(!Ao&&hn!==null){Ao=!0;var e=0,t=ke;try{var r=hn;for(ke=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}hn=null,Oi=!1}catch(l){throw hn!==null&&(hn=hn.slice(e+1)),po(ho,on),l}finally{ke=t,Ao=!1}}return null}var Gf=h.ReactCurrentBatchConfig;function Ni(e,t){if(sn(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!ye.call(t,l)||!sn(e[l],t[l]))return!1}return!0}function Lf(e){switch(e.tag){case 5:return Je(e.type);case 16:return Je("Lazy");case 13:return Je("Suspense");case 19:return Je("SuspenseList");case 0:case 2:case 15:return e=pe(e.type,!1),e;case 11:return e=pe(e.type.render,!1),e;case 1:return e=pe(e.type,!0),e;default:return""}}function $t(e,t){if(e&&e.defaultProps){t=f({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var Ui=Ge(null),ji=null,gr=null,go=null;function vo(){go=gr=ji=null}function fl(e,t,r){hr?(Me(Ui,t._currentValue),t._currentValue=r):(Me(Ui,t._currentValue2),t._currentValue2=r)}function Bo(e){var t=Ui.current;Ce(Ui),hr?e._currentValue=t:e._currentValue2=t}function Co(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function vr(e,t){ji=e,go=gr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(kt=!0),e.firstContext=null)}function Nt(e){var t=hr?e._currentValue:e._currentValue2;if(go!==e)if(e={context:e,memoizedValue:t,next:null},gr===null){if(ji===null)throw Error(c(308));gr=e,ji.dependencies={lanes:0,firstContext:e}}else gr=gr.next=e;return t}var an=null,In=!1;function yo(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dl(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function mn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Rn(e,t){var r=e.updateQueue;r!==null&&(r=r.shared,st!==null&&e.mode&1&&!(Fe&2)?(e=r.interleaved,e===null?(t.next=t,an===null?an=[r]:an.push(r)):(t.next=e.next,e.next=t),r.interleaved=t):(e=r.pending,e===null?t.next=t:(t.next=e.next,e.next=t),r.pending=t))}function Ji(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,fo(e,r)}}function pl(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,d=null;if(r=r.firstBaseUpdate,r!==null){do{var E={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};d===null?l=d=E:d=d.next=E,r=r.next}while(r!==null);d===null?l=d=t:d=d.next=t}else l=d=t;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:d,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function bi(e,t,r,s){var l=e.updateQueue;In=!1;var d=l.firstBaseUpdate,E=l.lastBaseUpdate,R=l.shared.pending;if(R!==null){l.shared.pending=null;var b=R,q=b.next;b.next=null,E===null?d=q:E.next=q,E=b;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,R=ue.lastBaseUpdate,R!==E&&(R===null?ue.firstBaseUpdate=q:R.next=q,ue.lastBaseUpdate=b))}if(d!==null){var Ee=l.baseState;E=0,ue=q=b=null,R=d;do{var ge=R.lane,ze=R.eventTime;if((s&ge)===ge){ue!==null&&(ue=ue.next={eventTime:ze,lane:0,tag:R.tag,payload:R.payload,callback:R.callback,next:null});e:{var he=e,St=R;switch(ge=t,ze=r,St.tag){case 1:if(he=St.payload,typeof he=="function"){Ee=he.call(ze,Ee,ge);break e}Ee=he;break e;case 3:he.flags=he.flags&-65537|128;case 0:if(he=St.payload,ge=typeof he=="function"?he.call(ze,Ee,ge):he,ge==null)break e;Ee=f({},Ee,ge);break e;case 2:In=!0}}R.callback!==null&&R.lane!==0&&(e.flags|=64,ge=l.effects,ge===null?l.effects=[R]:ge.push(R))}else ze={eventTime:ze,lane:ge,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ue===null?(q=ue=ze,b=Ee):ue=ue.next=ze,E|=ge;if(R=R.next,R===null){if(R=l.shared.pending,R===null)break;ge=R,R=ge.next,ge.next=null,l.lastBaseUpdate=ge,l.shared.pending=null}}while(!0);if(ue===null&&(b=Ee),l.baseState=b,l.firstBaseUpdate=q,l.lastBaseUpdate=ue,t=l.shared.interleaved,t!==null){l=t;do E|=l.lane,l=l.next;while(l!==t)}else d===null&&(l.shared.lanes=0);Ir|=E,e.lanes=E,e.memoizedState=Ee}}function hl(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(c(191,l));l.call(s)}}}var ml=new u.Component().refs;function Eo(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:f({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Ki={isMounted:function(e){return(e=e._reactInternals)?L(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=Rt(),l=_n(e),d=mn(s,l);d.payload=t,r!=null&&(d.callback=r),Rn(e,d),t=Kt(e,l,s),t!==null&&Ji(t,e,l)},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=Rt(),l=_n(e),d=mn(s,l);d.tag=1,d.payload=t,r!=null&&(d.callback=r),Rn(e,d),t=Kt(e,l,s),t!==null&&Ji(t,e,l)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Rt(),s=_n(e),l=mn(r,s);l.tag=2,t!=null&&(l.callback=t),Rn(e,l),t=Kt(e,s,r),t!==null&&Ji(t,e,s)}};function Al(e,t,r,s,l,d,E){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,d,E):t.prototype&&t.prototype.isPureReactComponent?!Ni(r,s)||!Ni(l,d):!0}function gl(e,t,r){var s=!1,l=Le,d=t.contextType;return typeof d=="object"&&d!==null?d=Nt(d):(l=it(t)?Qe:Ke.current,s=t.contextTypes,d=(s=s!=null)?Ct(e,l):Le),t=new t(r,d),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ki,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=d),t}function vl(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Ki.enqueueReplaceState(t,t.state,null)}function wo(e,t,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs=ml,yo(e);var d=t.contextType;typeof d=="object"&&d!==null?l.context=Nt(d):(d=it(t)?Qe:Ke.current,l.context=Ct(e,d)),l.state=e.memoizedState,d=t.getDerivedStateFromProps,typeof d=="function"&&(Eo(e,t,d,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Ki.enqueueReplaceState(l,l.state,null),bi(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}var Br=[],Cr=0,zi=null,Qi=0,Ut=[],jt=0,$n=null,An=1,gn="";function er(e,t){Br[Cr++]=Qi,Br[Cr++]=zi,zi=e,Qi=t}function Bl(e,t,r){Ut[jt++]=An,Ut[jt++]=gn,Ut[jt++]=$n,$n=e;var s=An;e=gn;var l=32-Ve(s)-1;s&=~(1<<l),r+=1;var d=32-Ve(t)+l;if(30<d){var E=l-l%5;d=(s&(1<<E)-1).toString(32),s>>=E,l-=E,An=1<<32-Ve(t)+l|r<<l|s,gn=d+e}else An=1<<d|r<<l|s,gn=e}function So(e){e.return!==null&&(er(e,1),Bl(e,1,0))}function Mo(e){for(;e===zi;)zi=Br[--Cr],Br[Cr]=null,Qi=Br[--Cr],Br[Cr]=null;for(;e===$n;)$n=Ut[--jt],Ut[jt]=null,gn=Ut[--jt],Ut[jt]=null,An=Ut[--jt],Ut[jt]=null}var Pt=null,Ht=null,qe=!1,Wr=!1,en=null;function Cl(e,t){var r=zt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function yl(e,t){switch(e.tag){case 5:return t=so(t,e.type,e.pendingProps),t!==null?(e.stateNode=t,Pt=e,Ht=_e(t),!0):!1;case 6:return t=oo(t,e.pendingProps),t!==null?(e.stateNode=t,Pt=e,Ht=null,!0):!1;case 13:if(t=ao(t),t!==null){var r=$n!==null?{id:An,overflow:gn}:null;return e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=zt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Pt=e,Ht=null,!0}return!1;default:return!1}}function xo(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Io(e){if(qe){var t=Ht;if(t){var r=t;if(!yl(e,t)){if(xo(e))throw Error(c(418));t=qt(r);var s=Pt;t&&yl(e,t)?Cl(s,r):(e.flags=e.flags&-4097|2,qe=!1,Pt=e)}}else{if(xo(e))throw Error(c(418));e.flags=e.flags&-4097|2,qe=!1,Pt=e}}}function El(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Pt=e}function Zr(e){if(!vt||e!==Pt)return!1;if(!qe)return El(e),qe=!0,!1;if(e.tag!==3&&(e.tag!==5||re(e.type)&&!ct(e.type,e.memoizedProps))){var t=Ht;if(t){if(xo(e)){for(e=Ht;e;)e=qt(e);throw Error(c(418))}for(;t;)Cl(e,t),t=qt(t)}}if(El(e),e.tag===13){if(!vt)throw Error(c(316));if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));Ht=k(e)}else Ht=Pt?qt(e.stateNode):null;return!0}function yr(){vt&&(Ht=Pt=null,Wr=qe=!1)}function Ro(e){en===null?en=[e]:en.push(e)}function Yr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(c(309));var s=r.stateNode}if(!s)throw Error(c(147,e));var l=s,d=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===d?t.ref:(t=function(E){var R=l.refs;R===ml&&(R=l.refs={}),E===null?delete R[d]:R[d]=E},t._stringRef=d,t)}if(typeof e!="string")throw Error(c(284));if(!r._owner)throw Error(c(290,e))}return e}function Xi(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function wl(e){var t=e._init;return t(e._payload)}function Sl(e){function t(P,T){if(e){var N=P.deletions;N===null?(P.deletions=[T],P.flags|=16):N.push(T)}}function r(P,T){if(!e)return null;for(;T!==null;)t(P,T),T=T.sibling;return null}function s(P,T){for(P=new Map;T!==null;)T.key!==null?P.set(T.key,T):P.set(T.index,T),T=T.sibling;return P}function l(P,T){return P=Gn(P,T),P.index=0,P.sibling=null,P}function d(P,T,N){return P.index=N,e?(N=P.alternate,N!==null?(N=N.index,N<T?(P.flags|=2,T):N):(P.flags|=2,T)):(P.flags|=1048576,T)}function E(P){return e&&P.alternate===null&&(P.flags|=2),P}function R(P,T,N,ae){return T===null||T.tag!==6?(T=fa(N,P.mode,ae),T.return=P,T):(T=l(T,N),T.return=P,T)}function b(P,T,N,ae){var de=N.type;return de===A?ue(P,T,N.props.children,ae,N.key):T!==null&&(T.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===O&&wl(de)===T.type)?(ae=l(T,N.props),ae.ref=Yr(P,T,N),ae.return=P,ae):(ae=Ss(N.type,N.key,N.props,null,P.mode,ae),ae.ref=Yr(P,T,N),ae.return=P,ae)}function q(P,T,N,ae){return T===null||T.tag!==4||T.stateNode.containerInfo!==N.containerInfo||T.stateNode.implementation!==N.implementation?(T=da(N,P.mode,ae),T.return=P,T):(T=l(T,N.children||[]),T.return=P,T)}function ue(P,T,N,ae,de){return T===null||T.tag!==7?(T=ar(N,P.mode,ae,de),T.return=P,T):(T=l(T,N),T.return=P,T)}function Ee(P,T,N){if(typeof T=="string"&&T!==""||typeof T=="number")return T=fa(""+T,P.mode,N),T.return=P,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case p:return N=Ss(T.type,T.key,T.props,null,P.mode,N),N.ref=Yr(P,null,T),N.return=P,N;case v:return T=da(T,P.mode,N),T.return=P,T;case O:var ae=T._init;return Ee(P,ae(T._payload),N)}if(xe(T)||X(T))return T=ar(T,P.mode,N,null),T.return=P,T;Xi(P,T)}return null}function ge(P,T,N,ae){var de=T!==null?T.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return de!==null?null:R(P,T,""+N,ae);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case p:return N.key===de?b(P,T,N,ae):null;case v:return N.key===de?q(P,T,N,ae):null;case O:return de=N._init,ge(P,T,de(N._payload),ae)}if(xe(N)||X(N))return de!==null?null:ue(P,T,N,ae,null);Xi(P,N)}return null}function ze(P,T,N,ae,de){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return P=P.get(N)||null,R(T,P,""+ae,de);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case p:return P=P.get(ae.key===null?N:ae.key)||null,b(T,P,ae,de);case v:return P=P.get(ae.key===null?N:ae.key)||null,q(T,P,ae,de);case O:var Re=ae._init;return ze(P,T,N,Re(ae._payload),de)}if(xe(ae)||X(ae))return P=P.get(N)||null,ue(T,P,ae,de,null);Xi(T,ae)}return null}function he(P,T,N,ae){for(var de=null,Re=null,we=T,Oe=T=0,ht=null;we!==null&&Oe<N.length;Oe++){we.index>Oe?(ht=we,we=null):ht=we.sibling;var Ne=ge(P,we,N[Oe],ae);if(Ne===null){we===null&&(we=ht);break}e&&we&&Ne.alternate===null&&t(P,we),T=d(Ne,T,Oe),Re===null?de=Ne:Re.sibling=Ne,Re=Ne,we=ht}if(Oe===N.length)return r(P,we),qe&&er(P,Oe),de;if(we===null){for(;Oe<N.length;Oe++)we=Ee(P,N[Oe],ae),we!==null&&(T=d(we,T,Oe),Re===null?de=we:Re.sibling=we,Re=we);return qe&&er(P,Oe),de}for(we=s(P,we);Oe<N.length;Oe++)ht=ze(we,P,Oe,N[Oe],ae),ht!==null&&(e&&ht.alternate!==null&&we.delete(ht.key===null?Oe:ht.key),T=d(ht,T,Oe),Re===null?de=ht:Re.sibling=ht,Re=ht);return e&&we.forEach(function(Ln){return t(P,Ln)}),qe&&er(P,Oe),de}function St(P,T,N,ae){var de=X(N);if(typeof de!="function")throw Error(c(150));if(N=de.call(N),N==null)throw Error(c(151));for(var Re=de=null,we=T,Oe=T=0,ht=null,Ne=N.next();we!==null&&!Ne.done;Oe++,Ne=N.next()){we.index>Oe?(ht=we,we=null):ht=we.sibling;var Ln=ge(P,we,Ne.value,ae);if(Ln===null){we===null&&(we=ht);break}e&&we&&Ln.alternate===null&&t(P,we),T=d(Ln,T,Oe),Re===null?de=Ln:Re.sibling=Ln,Re=Ln,we=ht}if(Ne.done)return r(P,we),qe&&er(P,Oe),de;if(we===null){for(;!Ne.done;Oe++,Ne=N.next())Ne=Ee(P,Ne.value,ae),Ne!==null&&(T=d(Ne,T,Oe),Re===null?de=Ne:Re.sibling=Ne,Re=Ne);return qe&&er(P,Oe),de}for(we=s(P,we);!Ne.done;Oe++,Ne=N.next())Ne=ze(we,P,Oe,Ne.value,ae),Ne!==null&&(e&&Ne.alternate!==null&&we.delete(Ne.key===null?Oe:Ne.key),T=d(Ne,T,Oe),Re===null?de=Ne:Re.sibling=Ne,Re=Ne);return e&&we.forEach(function(cd){return t(P,cd)}),qe&&er(P,Oe),de}function Qt(P,T,N,ae){if(typeof N=="object"&&N!==null&&N.type===A&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case p:e:{for(var de=N.key,Re=T;Re!==null;){if(Re.key===de){if(de=N.type,de===A){if(Re.tag===7){r(P,Re.sibling),T=l(Re,N.props.children),T.return=P,P=T;break e}}else if(Re.elementType===de||typeof de=="object"&&de!==null&&de.$$typeof===O&&wl(de)===Re.type){r(P,Re.sibling),T=l(Re,N.props),T.ref=Yr(P,Re,N),T.return=P,P=T;break e}r(P,Re);break}else t(P,Re);Re=Re.sibling}N.type===A?(T=ar(N.props.children,P.mode,ae,N.key),T.return=P,P=T):(ae=Ss(N.type,N.key,N.props,null,P.mode,ae),ae.ref=Yr(P,T,N),ae.return=P,P=ae)}return E(P);case v:e:{for(Re=N.key;T!==null;){if(T.key===Re)if(T.tag===4&&T.stateNode.containerInfo===N.containerInfo&&T.stateNode.implementation===N.implementation){r(P,T.sibling),T=l(T,N.children||[]),T.return=P,P=T;break e}else{r(P,T);break}else t(P,T);T=T.sibling}T=da(N,P.mode,ae),T.return=P,P=T}return E(P);case O:return Re=N._init,Qt(P,T,Re(N._payload),ae)}if(xe(N))return he(P,T,N,ae);if(X(N))return St(P,T,N,ae);Xi(P,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,T!==null&&T.tag===6?(r(P,T.sibling),T=l(T,N),T.return=P,P=T):(r(P,T),T=fa(N,P.mode,ae),T.return=P,P=T),E(P)):r(P,T)}return Qt}var Er=Sl(!0),Ml=Sl(!1),Vr={},Jt=Ge(Vr),qr=Ge(Vr),wr=Ge(Vr);function ln(e){if(e===Vr)throw Error(c(174));return e}function Fo(e,t){Me(wr,t),Me(qr,e),Me(Jt,Vr),e=tt(t),Ce(Jt),Me(Jt,e)}function Sr(){Ce(Jt),Ce(qr),Ce(wr)}function xl(e){var t=ln(wr.current),r=ln(Jt.current);t=te(r,e.type,t),r!==t&&(Me(qr,e),Me(Jt,t))}function To(e){qr.current===e&&(Ce(Jt),Ce(qr))}var et=Ge(0);function Wi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||Vn(r)||zr(r)))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var _o=[];function Do(){for(var e=0;e<_o.length;e++){var t=_o[e];hr?t._workInProgressVersionPrimary=null:t._workInProgressVersionSecondary=null}_o.length=0}var Zi=h.ReactCurrentDispatcher,bt=h.ReactCurrentBatchConfig,Mr=0,nt=null,yt=null,pt=null,Yi=!1,$r=!1,ei=0,Pf=0;function Et(){throw Error(c(321))}function Go(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!sn(e[r],t[r]))return!1;return!0}function Lo(e,t,r,s,l,d){if(Mr=d,nt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Zi.current=e===null||e.memoizedState===null?Nf:Uf,e=r(s,l),$r){d=0;do{if($r=!1,ei=0,25<=d)throw Error(c(301));d+=1,pt=yt=null,t.updateQueue=null,Zi.current=jf,e=r(s,l)}while($r)}if(Zi.current=ts,t=yt!==null&&yt.next!==null,Mr=0,pt=yt=nt=null,Yi=!1,t)throw Error(c(300));return e}function Po(){var e=ei!==0;return ei=0,e}function vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pt===null?nt.memoizedState=pt=e:pt=pt.next=e,pt}function un(){if(yt===null){var e=nt.alternate;e=e!==null?e.memoizedState:null}else e=yt.next;var t=pt===null?nt.memoizedState:pt.next;if(t!==null)pt=t,yt=e;else{if(e===null)throw Error(c(310));yt=e,e={memoizedState:yt.memoizedState,baseState:yt.baseState,baseQueue:yt.baseQueue,queue:yt.queue,next:null},pt===null?nt.memoizedState=pt=e:pt=pt.next=e}return pt}function tr(e,t){return typeof t=="function"?t(e):t}function Vi(e){var t=un(),r=t.queue;if(r===null)throw Error(c(311));r.lastRenderedReducer=e;var s=yt,l=s.baseQueue,d=r.pending;if(d!==null){if(l!==null){var E=l.next;l.next=d.next,d.next=E}s.baseQueue=l=d,r.pending=null}if(l!==null){d=l.next,s=s.baseState;var R=E=null,b=null,q=d;do{var ue=q.lane;if((Mr&ue)===ue)b!==null&&(b=b.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),s=q.hasEagerState?q.eagerState:e(s,q.action);else{var Ee={lane:ue,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};b===null?(R=b=Ee,E=s):b=b.next=Ee,nt.lanes|=ue,Ir|=ue}q=q.next}while(q!==null&&q!==d);b===null?E=s:b.next=R,sn(s,t.memoizedState)||(kt=!0),t.memoizedState=s,t.baseState=E,t.baseQueue=b,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do d=l.lane,nt.lanes|=d,Ir|=d,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function qi(e){var t=un(),r=t.queue;if(r===null)throw Error(c(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,d=t.memoizedState;if(l!==null){r.pending=null;var E=l=l.next;do d=e(d,E.action),E=E.next;while(E!==l);sn(d,t.memoizedState)||(kt=!0),t.memoizedState=d,t.baseQueue===null&&(t.baseState=d),r.lastRenderedState=d}return[d,s]}function Il(){}function Rl(e,t){var r=nt,s=un(),l=t(),d=!sn(s.memoizedState,l);if(d&&(s.memoizedState=l,kt=!0),s=s.queue,ni(_l.bind(null,r,s,e),[e]),s.getSnapshot!==t||d||pt!==null&&pt.memoizedState.tag&1){if(r.flags|=2048,ti(9,Tl.bind(null,r,s,l,t),void 0,null),st===null)throw Error(c(349));Mr&30||Fl(r,t,l)}return l}function Fl(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Tl(e,t,r,s){t.value=r,t.getSnapshot=s,Dl(t)&&Kt(e,1,-1)}function _l(e,t,r){return r(function(){Dl(t)&&Kt(e,1,-1)})}function Dl(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!sn(e,r)}catch{return!0}}function Ho(e){var t=vn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:tr,lastRenderedState:e},t.queue=e,e=e.dispatch=Of.bind(null,nt,e),[t.memoizedState,e]}function ti(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=nt.updateQueue,t===null?(t={lastEffect:null,stores:null},nt.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function Gl(){return un().memoizedState}function $i(e,t,r,s){var l=vn();nt.flags|=e,l.memoizedState=ti(1|t,r,void 0,s===void 0?null:s)}function es(e,t,r,s){var l=un();s=s===void 0?null:s;var d=void 0;if(yt!==null){var E=yt.memoizedState;if(d=E.destroy,s!==null&&Go(s,E.deps)){l.memoizedState=ti(t,r,d,s);return}}nt.flags|=e,l.memoizedState=ti(1|t,r,d,s)}function ko(e,t){return $i(8390656,8,e,t)}function ni(e,t){return es(2048,8,e,t)}function Ll(e,t){return es(4,2,e,t)}function Pl(e,t){return es(4,4,e,t)}function Hl(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function kl(e,t,r){return r=r!=null?r.concat([e]):null,es(4,4,Hl.bind(null,t,e),r)}function Oo(){}function Ol(e,t){var r=un();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Go(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Nl(e,t){var r=un();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Go(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Hf(e,t){var r=ke;ke=r!==0&&4>r?r:4,e(!0);var s=bt.transition;bt.transition={};try{e(!1),t()}finally{ke=r,bt.transition=s}}function Ul(){return un().memoizedState}function kf(e,t,r){var s=_n(e);r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},jl(e)?Jl(t,r):(bl(e,t,r),r=Rt(),e=Kt(e,s,r),e!==null&&Kl(e,t,s))}function Of(e,t,r){var s=_n(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(jl(e))Jl(t,l);else{bl(e,t,l);var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=t.lastRenderedReducer,d!==null))try{var E=t.lastRenderedState,R=d(E,r);if(l.hasEagerState=!0,l.eagerState=R,sn(R,E))return}catch{}finally{}r=Rt(),e=Kt(e,s,r),e!==null&&Kl(e,t,s)}}function jl(e){var t=e.alternate;return e===nt||t!==null&&t===nt}function Jl(e,t){$r=Yi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function bl(e,t,r){st!==null&&e.mode&1&&!(Fe&2)?(e=t.interleaved,e===null?(r.next=r,an===null?an=[t]:an.push(t)):(r.next=e.next,e.next=r),t.interleaved=r):(e=t.pending,e===null?r.next=r:(r.next=e.next,e.next=r),t.pending=r)}function Kl(e,t,r){if(r&4194240){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,fo(e,r)}}var ts={readContext:Nt,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},Nf={readContext:Nt,useCallback:function(e,t){return vn().memoizedState=[e,t===void 0?null:t],e},useContext:Nt,useEffect:ko,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,$i(4194308,4,Hl.bind(null,t,e),r)},useLayoutEffect:function(e,t){return $i(4194308,4,e,t)},useInsertionEffect:function(e,t){return $i(4,2,e,t)},useMemo:function(e,t){var r=vn();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=vn();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=kf.bind(null,nt,e),[s.memoizedState,e]},useRef:function(e){var t=vn();return e={current:e},t.memoizedState=e},useState:Ho,useDebugValue:Oo,useDeferredValue:function(e){var t=Ho(e),r=t[0],s=t[1];return ko(function(){var l=bt.transition;bt.transition={};try{s(e)}finally{bt.transition=l}},[e]),r},useTransition:function(){var e=Ho(!1),t=e[0];return e=Hf.bind(null,e[1]),vn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=nt,l=vn();if(qe){if(r===void 0)throw Error(c(407));r=r()}else{if(r=t(),st===null)throw Error(c(349));Mr&30||Fl(s,t,r)}l.memoizedState=r;var d={value:r,getSnapshot:t};return l.queue=d,ko(_l.bind(null,s,d,e),[e]),s.flags|=2048,ti(9,Tl.bind(null,s,d,r,t),void 0,null),r},useId:function(){var e=vn(),t=st.identifierPrefix;if(qe){var r=gn,s=An;r=(s&~(1<<32-Ve(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=ei++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Pf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Uf={readContext:Nt,useCallback:Ol,useContext:Nt,useEffect:ni,useImperativeHandle:kl,useInsertionEffect:Ll,useLayoutEffect:Pl,useMemo:Nl,useReducer:Vi,useRef:Gl,useState:function(){return Vi(tr)},useDebugValue:Oo,useDeferredValue:function(e){var t=Vi(tr),r=t[0],s=t[1];return ni(function(){var l=bt.transition;bt.transition={};try{s(e)}finally{bt.transition=l}},[e]),r},useTransition:function(){var e=Vi(tr)[0],t=un().memoizedState;return[e,t]},useMutableSource:Il,useSyncExternalStore:Rl,useId:Ul,unstable_isNewReconciler:!1},jf={readContext:Nt,useCallback:Ol,useContext:Nt,useEffect:ni,useImperativeHandle:kl,useInsertionEffect:Ll,useLayoutEffect:Pl,useMemo:Nl,useReducer:qi,useRef:Gl,useState:function(){return qi(tr)},useDebugValue:Oo,useDeferredValue:function(e){var t=qi(tr),r=t[0],s=t[1];return ni(function(){var l=bt.transition;bt.transition={};try{s(e)}finally{bt.transition=l}},[e]),r},useTransition:function(){var e=qi(tr)[0],t=un().memoizedState;return[e,t]},useMutableSource:Il,useSyncExternalStore:Rl,useId:Ul,unstable_isNewReconciler:!1};function No(e,t){try{var r="",s=t;do r+=Lf(s),s=s.return;while(s);var l=r}catch(d){l=`
Error generating stack: `+d.message+`
`+d.stack}return{value:e,source:t,stack:l}}function Uo(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var Jf=typeof WeakMap=="function"?WeakMap:Map;function zl(e,t,r){r=mn(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){gs||(gs=!0,ia=s),Uo(e,t)},r}function Ql(e,t,r){r=mn(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;r.payload=function(){return s(l)},r.callback=function(){Uo(e,t)}}var d=e.stateNode;return d!==null&&typeof d.componentDidCatch=="function"&&(r.callback=function(){Uo(e,t),typeof s!="function"&&(Fn===null?Fn=new Set([this]):Fn.add(this));var E=t.stack;this.componentDidCatch(t.value,{componentStack:E!==null?E:""})}),r}function Xl(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new Jf;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(r)||(l.add(r),e=nd.bind(null,e,t,r),t.then(e,e))}function Wl(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Zl(e,t,r,s,l){return e.mode&1?(e.flags|=65536,e.lanes=l,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=mn(-1,1),t.tag=2,Rn(r,t))),r.lanes|=1),e)}function cn(e){e.flags|=4}function Yl(e,t){if(e!==null&&e.child===t.child)return!0;if(t.flags&16)return!1;for(e=t.child;e!==null;){if(e.flags&12854||e.subtreeFlags&12854)return!1;e=e.sibling}return!0}var ri,ii,ns,rs;if(_t)ri=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)Ae(e,r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},ii=function(){},ns=function(e,t,r,s,l){if(e=e.memoizedProps,e!==s){var d=t.stateNode,E=ln(Jt.current);r=We(d,r,e,s,l,E),(t.updateQueue=r)&&cn(t)}},rs=function(e,t,r,s){r!==s&&cn(t)};else if(mr){ri=function(e,t,r,s){for(var l=t.child;l!==null;){if(l.tag===5){var d=l.stateNode;r&&s&&(d=_i(d,l.type,l.memoizedProps,l)),Ae(e,d)}else if(l.tag===6)d=l.stateNode,r&&s&&(d=Di(d,l.memoizedProps,l)),Ae(e,d);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)d=l.child,d!==null&&(d.return=l),ri(e,l,!0,!0);else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===t)break;for(;l.sibling===null;){if(l.return===null||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};var Vl=function(e,t,r,s){for(var l=t.child;l!==null;){if(l.tag===5){var d=l.stateNode;r&&s&&(d=_i(d,l.type,l.memoizedProps,l)),Fi(e,d)}else if(l.tag===6)d=l.stateNode,r&&s&&(d=Di(d,l.memoizedProps,l)),Fi(e,d);else if(l.tag!==4){if(l.tag===22&&l.memoizedState!==null)d=l.child,d!==null&&(d.return=l),Vl(e,l,!0,!0);else if(l.child!==null){l.child.return=l,l=l.child;continue}}if(l===t)break;for(;l.sibling===null;){if(l.return===null||l.return===t)return;l=l.return}l.sibling.return=l.return,l=l.sibling}};ii=function(e,t){var r=t.stateNode;if(!Yl(e,t)){e=r.containerInfo;var s=Ri(e);Vl(s,t,!1,!1),r.pendingChildren=s,cn(t),io(e,s)}},ns=function(e,t,r,s,l){var d=e.stateNode,E=e.memoizedProps;if((e=Yl(e,t))&&E===s)t.stateNode=d;else{var R=t.stateNode,b=ln(Jt.current),q=null;E!==s&&(q=We(R,r,E,s,l,b)),e&&q===null?t.stateNode=d:(d=ro(d,q,r,E,s,t,e,R),Be(d,r,s,l,b)&&cn(t),t.stateNode=d,e?cn(t):ri(d,t,!1,!1))}},rs=function(e,t,r,s){r!==s?(e=ln(wr.current),r=ln(Jt.current),t.stateNode=Te(s,e,r,t),cn(t)):t.stateNode=e.stateNode}}else ii=function(){},ns=function(){},rs=function(){};function si(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function wt(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function bf(e,t,r){var s=t.pendingProps;switch(Mo(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wt(t),null;case 1:return it(t.type)&&At(),wt(t),null;case 3:return s=t.stateNode,Sr(),Ce(Ie),Ce(Ke),Do(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Zr(t)?cn(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,en!==null&&(aa(en),en=null))),ii(e,t),wt(t),null;case 5:To(t),r=ln(wr.current);var l=t.type;if(e!==null&&t.stateNode!=null)ns(e,t,l,s,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(c(166));return wt(t),null}if(e=ln(Jt.current),Zr(t)){if(!vt)throw Error(c(175));e=g(t.stateNode,t.type,t.memoizedProps,r,e,t,!Wr),t.updateQueue=e,e!==null&&cn(t)}else{var d=me(l,s,r,e,t);ri(d,t,!1,!1),t.stateNode=d,Be(d,l,s,r,e)&&cn(t)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return wt(t),null;case 6:if(e&&t.stateNode!=null)rs(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(e=ln(wr.current),r=ln(Jt.current),Zr(t)){if(!vt)throw Error(c(176));if(e=t.stateNode,s=t.memoizedProps,(r=C(e,s,t,!Wr))&&(l=Pt,l!==null))switch(d=(l.mode&1)!==0,l.tag){case 3:ne(l.stateNode.containerInfo,e,s,d);break;case 5:ie(l.type,l.memoizedProps,l.stateNode,e,s,d)}r&&cn(t)}else t.stateNode=Te(s,e,r,t)}return wt(t),null;case 13:if(Ce(et),s=t.memoizedState,qe&&Ht!==null&&t.mode&1&&!(t.flags&128)){for(e=Ht;e;)e=qt(e);return yr(),t.flags|=98560,t}if(s!==null&&s.dehydrated!==null){if(s=Zr(t),e===null){if(!s)throw Error(c(318));if(!vt)throw Error(c(344));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));M(e,t)}else yr(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;return wt(t),null}return en!==null&&(aa(en),en=null),t.flags&128?(t.lanes=r,t):(s=s!==null,r=!1,e===null?Zr(t):r=e.memoizedState!==null,s&&!r&&(t.child.flags|=8192,t.mode&1&&(e===null||et.current&1?ut===0&&(ut=3):ua())),t.updateQueue!==null&&(t.flags|=4),wt(t),null);case 4:return Sr(),ii(e,t),e===null&&Si(t.stateNode.containerInfo),wt(t),null;case 10:return Bo(t.type._context),wt(t),null;case 17:return it(t.type)&&At(),wt(t),null;case 19:if(Ce(et),l=t.memoizedState,l===null)return wt(t),null;if(s=(t.flags&128)!==0,d=l.rendering,d===null)if(s)si(l,!1);else{if(ut!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(d=Wi(e),d!==null){for(t.flags|=128,si(l,!1),e=d.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),t.subtreeFlags=0,e=r,s=t.child;s!==null;)r=s,l=e,r.flags&=14680066,d=r.alternate,d===null?(r.childLanes=0,r.lanes=l,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=d.childLanes,r.lanes=d.lanes,r.child=d.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=d.memoizedProps,r.memoizedState=d.memoizedState,r.updateQueue=d.updateQueue,r.type=d.type,l=d.dependencies,r.dependencies=l===null?null:{lanes:l.lanes,firstContext:l.firstContext}),s=s.sibling;return Me(et,et.current&1|2),t.child}e=e.sibling}l.tail!==null&&dt()>ra&&(t.flags|=128,s=!0,si(l,!1),t.lanes=4194304)}else{if(!s)if(e=Wi(d),e!==null){if(t.flags|=128,s=!0,e=e.updateQueue,e!==null&&(t.updateQueue=e,t.flags|=4),si(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!qe)return wt(t),null}else 2*dt()-l.renderingStartTime>ra&&r!==1073741824&&(t.flags|=128,s=!0,si(l,!1),t.lanes=4194304);l.isBackwards?(d.sibling=t.child,t.child=d):(e=l.last,e!==null?e.sibling=d:t.child=d,l.last=d)}return l.tail!==null?(t=l.tail,l.rendering=t,l.tail=t.sibling,l.renderingStartTime=dt(),t.sibling=null,e=et.current,Me(et,s?e&1|2:e&1),t):(wt(t),null);case 22:case 23:return la(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Ot&1073741824&&(wt(t),_t&&t.subtreeFlags&6&&(t.flags|=8192)):wt(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}var Kf=h.ReactCurrentOwner,kt=!1;function It(e,t,r,s){t.child=e===null?Ml(t,null,r,s):Er(t,e.child,r,s)}function ql(e,t,r,s,l){r=r.render;var d=t.ref;return vr(t,l),s=Lo(e,t,r,s,d,l),r=Po(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Bn(e,t,l)):(qe&&r&&So(t),t.flags|=1,It(e,t,s,l),t.child)}function $l(e,t,r,s,l){if(e===null){var d=r.type;return typeof d=="function"&&!ca(d)&&d.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=d,eu(e,t,d,s,l)):(e=Ss(r.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(d=e.child,!(e.lanes&l)){var E=d.memoizedProps;if(r=r.compare,r=r!==null?r:Ni,r(E,s)&&e.ref===t.ref)return Bn(e,t,l)}return t.flags|=1,e=Gn(d,s),e.ref=t.ref,e.return=t,t.child=e}function eu(e,t,r,s,l){if(e!==null&&Ni(e.memoizedProps,s)&&e.ref===t.ref)if(kt=!1,(e.lanes&l)!==0)e.flags&131072&&(kt=!0);else return t.lanes=e.lanes,Bn(e,t,l);return jo(e,t,r,s,l)}function tu(e,t,r){var s=t.pendingProps,l=s.children,d=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null},Me(xr,Ot),Ot|=r;else if(r&1073741824)t.memoizedState={baseLanes:0,cachePool:null},s=d!==null?d.baseLanes:r,Me(xr,Ot),Ot|=s;else return e=d!==null?d.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null},t.updateQueue=null,Me(xr,Ot),Ot|=e,null;else d!==null?(s=d.baseLanes|r,t.memoizedState=null):s=r,Me(xr,Ot),Ot|=s;return It(e,t,l,r),t.child}function nu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function jo(e,t,r,s,l){var d=it(r)?Qe:Ke.current;return d=Ct(t,d),vr(t,l),r=Lo(e,t,r,s,d,l),s=Po(),e!==null&&!kt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,Bn(e,t,l)):(qe&&s&&So(t),t.flags|=1,It(e,t,r,l),t.child)}function ru(e,t,r,s,l){if(it(r)){var d=!0;be(t)}else d=!1;if(vr(t,l),t.stateNode===null)e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),gl(t,r,s),wo(t,r,s,l),s=!0;else if(e===null){var E=t.stateNode,R=t.memoizedProps;E.props=R;var b=E.context,q=r.contextType;typeof q=="object"&&q!==null?q=Nt(q):(q=it(r)?Qe:Ke.current,q=Ct(t,q));var ue=r.getDerivedStateFromProps,Ee=typeof ue=="function"||typeof E.getSnapshotBeforeUpdate=="function";Ee||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==s||b!==q)&&vl(t,E,s,q),In=!1;var ge=t.memoizedState;E.state=ge,bi(t,s,E,l),b=t.memoizedState,R!==s||ge!==b||Ie.current||In?(typeof ue=="function"&&(Eo(t,r,ue,s),b=t.memoizedState),(R=In||Al(t,r,R,s,ge,b,q))?(Ee||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(t.flags|=4194308)):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=b),E.props=s,E.state=b,E.context=q,s=R):(typeof E.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{E=t.stateNode,dl(e,t),R=t.memoizedProps,q=t.type===t.elementType?R:$t(t.type,R),E.props=q,Ee=t.pendingProps,ge=E.context,b=r.contextType,typeof b=="object"&&b!==null?b=Nt(b):(b=it(r)?Qe:Ke.current,b=Ct(t,b));var ze=r.getDerivedStateFromProps;(ue=typeof ze=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(R!==Ee||ge!==b)&&vl(t,E,s,b),In=!1,ge=t.memoizedState,E.state=ge,bi(t,s,E,l);var he=t.memoizedState;R!==Ee||ge!==he||Ie.current||In?(typeof ze=="function"&&(Eo(t,r,ze,s),he=t.memoizedState),(q=In||Al(t,r,q,s,ge,he,b)||!1)?(ue||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(s,he,b),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(s,he,b)),typeof E.componentDidUpdate=="function"&&(t.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof E.componentDidUpdate!="function"||R===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=he),E.props=s,E.state=he,E.context=b,s=q):(typeof E.componentDidUpdate!="function"||R===e.memoizedProps&&ge===e.memoizedState||(t.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||R===e.memoizedProps&&ge===e.memoizedState||(t.flags|=1024),s=!1)}return Jo(e,t,r,s,d,l)}function Jo(e,t,r,s,l,d){nu(e,t);var E=(t.flags&128)!==0;if(!s&&!E)return l&&He(t,r,!1),Bn(e,t,d);s=t.stateNode,Kf.current=t;var R=E&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&E?(t.child=Er(t,e.child,null,d),t.child=Er(t,null,R,d)):It(e,t,R,d),t.memoizedState=s.state,l&&He(t,r,!0),t.child}function iu(e){var t=e.stateNode;t.pendingContext?Ue(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ue(e,t.context,!1),Fo(e,t.containerInfo)}function su(e,t,r,s,l){return yr(),Ro(l),t.flags|=256,It(e,t,r,s),t.child}var is={dehydrated:null,treeContext:null,retryLane:0};function ss(e){return{baseLanes:e,cachePool:null}}function ou(e,t,r){var s=t.pendingProps,l=et.current,d=!1,E=(t.flags&128)!==0,R;if((R=E)||(R=e!==null&&e.memoizedState===null?!1:(l&2)!==0),R?(d=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Me(et,l&1),e===null)return Io(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?zr(e)?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=s.children,e=s.fallback,d?(s=t.mode,d=t.child,l={mode:"hidden",children:l},!(s&1)&&d!==null?(d.childLanes=0,d.pendingProps=l):d=Ms(l,s,0,null),e=ar(e,s,r,null),d.return=t,e.return=t,d.sibling=e,t.child=d,t.child.memoizedState=ss(r),t.memoizedState=is,e):bo(t,l));if(l=e.memoizedState,l!==null){if(R=l.dehydrated,R!==null){if(E)return t.flags&256?(t.flags&=-257,os(e,t,r,Error(c(422)))):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(d=s.fallback,l=t.mode,s=Ms({mode:"visible",children:s.children},l,0,null),d=ar(d,l,r,null),d.flags|=2,s.return=t,d.return=t,s.sibling=d,t.child=s,t.mode&1&&Er(t,e.child,null,r),t.child.memoizedState=ss(r),t.memoizedState=is,d);if(!(t.mode&1))t=os(e,t,r,null);else if(zr(R))t=os(e,t,r,Error(c(419)));else if(s=(r&e.childLanes)!==0,kt||s){if(s=st,s!==null){switch(r&-r){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}s=d&(s.suspendedLanes|r)?0:d,s!==0&&s!==l.retryLane&&(l.retryLane=s,Kt(e,s,-1))}ua(),t=os(e,t,r,Error(c(421)))}else Vn(R)?(t.flags|=128,t.child=e.child,t=rd.bind(null,e),qn(R,t),t=null):(r=l.treeContext,vt&&(Ht=lo(R),Pt=t,qe=!0,en=null,Wr=!1,r!==null&&(Ut[jt++]=An,Ut[jt++]=gn,Ut[jt++]=$n,An=r.id,gn=r.overflow,$n=t)),t=bo(t,t.pendingProps.children),t.flags|=4096);return t}return d?(s=lu(e,t,s.children,s.fallback,r),d=t.child,l=e.child.memoizedState,d.memoizedState=l===null?ss(r):{baseLanes:l.baseLanes|r,cachePool:null},d.childLanes=e.childLanes&~r,t.memoizedState=is,s):(r=au(e,t,s.children,r),t.memoizedState=null,r)}return d?(s=lu(e,t,s.children,s.fallback,r),d=t.child,l=e.child.memoizedState,d.memoizedState=l===null?ss(r):{baseLanes:l.baseLanes|r,cachePool:null},d.childLanes=e.childLanes&~r,t.memoizedState=is,s):(r=au(e,t,s.children,r),t.memoizedState=null,r)}function bo(e,t){return t=Ms({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function au(e,t,r,s){var l=e.child;return e=l.sibling,r=Gn(l,{mode:"visible",children:r}),!(t.mode&1)&&(r.lanes=s),r.return=t,r.sibling=null,e!==null&&(s=t.deletions,s===null?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r}function lu(e,t,r,s,l){var d=t.mode;e=e.child;var E=e.sibling,R={mode:"hidden",children:r};return!(d&1)&&t.child!==e?(r=t.child,r.childLanes=0,r.pendingProps=R,t.deletions=null):(r=Gn(e,R),r.subtreeFlags=e.subtreeFlags&14680064),E!==null?s=Gn(E,s):(s=ar(s,d,l,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,s}function os(e,t,r,s){return s!==null&&Ro(s),Er(t,e.child,null,r),e=bo(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uu(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),Co(e.return,t,r)}function Ko(e,t,r,s,l){var d=e.memoizedState;d===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(d.isBackwards=t,d.rendering=null,d.renderingStartTime=0,d.last=s,d.tail=r,d.tailMode=l)}function cu(e,t,r){var s=t.pendingProps,l=s.revealOrder,d=s.tail;if(It(e,t,s.children,r),s=et.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&uu(e,r,t);else if(e.tag===19)uu(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Me(et,s),!(t.mode&1))t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&Wi(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Ko(t,!1,l,r,d);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Wi(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Ko(t,!0,r,null,d);break;case"together":Ko(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Bn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Ir|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,r=Gn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Gn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function zf(e,t,r){switch(t.tag){case 3:iu(t),yr();break;case 5:xl(t);break;case 1:it(t.type)&&be(t);break;case 4:Fo(t,t.stateNode.containerInfo);break;case 10:fl(t,t.type._context,t.memoizedProps.value);break;case 13:var s=t.memoizedState;if(s!==null)return s.dehydrated!==null?(Me(et,et.current&1),t.flags|=128,null):r&t.child.childLanes?ou(e,t,r):(Me(et,et.current&1),e=Bn(e,t,r),e!==null?e.sibling:null);Me(et,et.current&1);break;case 19:if(s=(r&t.childLanes)!==0,e.flags&128){if(s)return cu(e,t,r);t.flags|=128}var l=t.memoizedState;if(l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Me(et,et.current),s)break;return null;case 22:case 23:return t.lanes=0,tu(e,t,r)}return Bn(e,t,r)}function Qf(e,t){switch(Mo(t),t.tag){case 1:return it(t.type)&&At(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Sr(),Ce(Ie),Ce(Ke),Do(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return To(t),null;case 13:if(Ce(et),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));yr()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Ce(et),null;case 4:return Sr(),null;case 10:return Bo(t.type._context),null;case 22:case 23:return la(),null;case 24:return null;default:return null}}var as=!1,nr=!1,Xf=typeof WeakSet=="function"?WeakSet:Set,se=null;function ls(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Lt(e,t,s)}else r.current=null}function zo(e,t,r){try{r()}catch(s){Lt(e,t,s)}}var fu=!1;function Wf(e,t){for(ce(e.containerInfo),se=t;se!==null;)if(e=se,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,se=t;else for(;se!==null;){e=se;try{var r=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(r!==null){var s=r.memoizedProps,l=r.memoizedState,d=e.stateNode,E=d.getSnapshotBeforeUpdate(e.elementType===e.type?s:$t(e.type,s),l);d.__reactInternalSnapshotBeforeUpdate=E}break;case 3:_t&&no(e.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(R){Lt(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,se=t;break}se=e.return}return r=fu,fu=!1,r}function rr(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var d=l.destroy;l.destroy=void 0,d!==void 0&&zo(t,r,d)}l=l.next}while(l!==s)}}function oi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Qo(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=ve(r);break;default:e=r}typeof t=="function"?t(e):t.current=e}}function du(e,t,r){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(ki,t)}catch{}switch(t.tag){case 0:case 11:case 14:case 15:if(e=t.updateQueue,e!==null&&(e=e.lastEffect,e!==null)){var s=e=e.next;do{var l=s,d=l.destroy;l=l.tag,d!==void 0&&(l&2||l&4)&&zo(t,r,d),s=s.next}while(s!==e)}break;case 1:if(ls(t,r),e=t.stateNode,typeof e.componentWillUnmount=="function")try{e.props=t.memoizedProps,e.state=t.memoizedState,e.componentWillUnmount()}catch(E){Lt(t,r,E)}break;case 5:ls(t,r);break;case 4:_t?vu(e,t,r):mr&&mr&&(t=t.stateNode.containerInfo,r=Ri(t),Ti(t,r))}}function pu(e,t,r){for(var s=t;;)if(du(e,s,r),s.child===null||_t&&s.tag===4){if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return}s.sibling.return=s.return,s=s.sibling}else s.child.return=s,s=s.child}function hu(e){var t=e.alternate;t!==null&&(e.alternate=null,hu(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&zs(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mu(e){return e.tag===5||e.tag===3||e.tag===4}function Au(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mu(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function gu(e){if(_t){e:{for(var t=e.return;t!==null;){if(mu(t))break e;t=t.return}throw Error(c(160))}var r=t;switch(r.tag){case 5:t=r.stateNode,r.flags&32&&(Mt(t),r.flags&=-33),r=Au(e),Wo(e,r,t);break;case 3:case 4:t=r.stateNode.containerInfo,r=Au(e),Xo(e,r,t);break;default:throw Error(c(161))}}}function Xo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?Bt(r,e,t):Ar(r,e);else if(s!==4&&(e=e.child,e!==null))for(Xo(e,t,r),e=e.sibling;e!==null;)Xo(e,t,r),e=e.sibling}function Wo(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?Zn(r,e,t):xi(r,e);else if(s!==4&&(e=e.child,e!==null))for(Wo(e,t,r),e=e.sibling;e!==null;)Wo(e,t,r),e=e.sibling}function vu(e,t,r){for(var s=t,l=!1,d,E;;){if(!l){l=s.return;e:for(;;){if(l===null)throw Error(c(160));switch(d=l.stateNode,l.tag){case 5:E=!1;break e;case 3:d=d.containerInfo,E=!0;break e;case 4:d=d.containerInfo,E=!0;break e}l=l.return}l=!0}if(s.tag===5||s.tag===6)pu(e,s,r),E?xn(d,s.stateNode):Ii(d,s.stateNode);else if(s.tag===18)E?Z(d,s.stateNode):Y(d,s.stateNode);else if(s.tag===4){if(s.child!==null){d=s.stateNode.containerInfo,E=!0,s.child.return=s,s=s.child;continue}}else if(du(e,s,r),s.child!==null){s.child.return=s,s=s.child;continue}if(s===t)break;for(;s.sibling===null;){if(s.return===null||s.return===t)return;s=s.return,s.tag===4&&(l=!1)}s.sibling.return=s.return,s=s.sibling}}function Zo(e,t){if(_t){switch(t.tag){case 0:case 11:case 14:case 15:rr(3,t,t.return),oi(3,t),rr(5,t,t.return);return;case 1:return;case 5:var r=t.stateNode;if(r!=null){var s=t.memoizedProps;e=e!==null?e.memoizedProps:s;var l=t.type,d=t.updateQueue;t.updateQueue=null,d!==null&&eo(r,d,l,e,s,t)}return;case 6:if(t.stateNode===null)throw Error(c(162));r=t.memoizedProps,qs(t.stateNode,e!==null?e.memoizedProps:r,r);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&j(t.stateNode.containerInfo);return;case 12:return;case 13:us(t);return;case 19:us(t);return;case 17:return}throw Error(c(163))}switch(t.tag){case 0:case 11:case 14:case 15:rr(3,t,t.return),oi(3,t),rr(5,t,t.return);return;case 12:return;case 13:us(t);return;case 19:us(t);return;case 3:vt&&e!==null&&e.memoizedState.isDehydrated&&j(t.stateNode.containerInfo);break;case 22:case 23:return}e:if(mr){switch(t.tag){case 1:case 5:case 6:break e;case 3:case 4:t=t.stateNode,Ti(t.containerInfo,t.pendingChildren);break e}throw Error(c(163))}}function us(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Xf),t.forEach(function(s){var l=id.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function Zf(e,t){for(se=t;se!==null;){t=se;var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var d=e;_t?vu(d,l,t):pu(d,l,t);var E=l.alternate;E!==null&&(E.return=null),l.return=null}catch(de){Lt(l,t,de)}}if(r=t.child,t.subtreeFlags&12854&&r!==null)r.return=t,se=r;else for(;se!==null;){t=se;try{var R=t.flags;if(R&32&&_t&&Mt(t.stateNode),R&512){var b=t.alternate;if(b!==null){var q=b.ref;q!==null&&(typeof q=="function"?q(null):q.current=null)}}if(R&8192)switch(t.tag){case 13:if(t.memoizedState!==null){var ue=t.alternate;(ue===null||ue.memoizedState===null)&&(na=dt())}break;case 22:var Ee=t.memoizedState!==null,ge=t.alternate,ze=ge!==null&&ge.memoizedState!==null;if(r=t,_t){e:if(s=r,l=Ee,d=null,_t)for(var he=s;;){if(he.tag===5){if(d===null){d=he;var St=he.stateNode;l?ft(St):le(he.stateNode,he.memoizedProps)}}else if(he.tag===6){if(d===null){var Qt=he.stateNode;l?to(Qt):Yn(Qt,he.memoizedProps)}}else if((he.tag!==22&&he.tag!==23||he.memoizedState===null||he===s)&&he.child!==null){he.child.return=he,he=he.child;continue}if(he===s)break;for(;he.sibling===null;){if(he.return===null||he.return===s)break e;d===he&&(d=null),he=he.return}d===he&&(d=null),he.sibling.return=he.return,he=he.sibling}}if(Ee&&!ze&&r.mode&1){se=r;for(var P=r.child;P!==null;){for(r=se=P;se!==null;){s=se;var T=s.child;switch(s.tag){case 0:case 11:case 14:case 15:rr(4,s,s.return);break;case 1:ls(s,s.return);var N=s.stateNode;if(typeof N.componentWillUnmount=="function"){var ae=s.return;try{N.props=s.memoizedProps,N.state=s.memoizedState,N.componentWillUnmount()}catch(de){Lt(s,ae,de)}}break;case 5:ls(s,s.return);break;case 22:if(s.memoizedState!==null){yu(r);continue}}T!==null?(T.return=s,se=T):yu(r)}P=P.sibling}}}switch(R&4102){case 2:gu(t),t.flags&=-3;break;case 6:gu(t),t.flags&=-3,Zo(t.alternate,t);break;case 4096:t.flags&=-4097;break;case 4100:t.flags&=-4097,Zo(t.alternate,t);break;case 4:Zo(t.alternate,t)}}catch(de){Lt(t,t.return,de)}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}}function Yf(e,t,r){se=e,Bu(e)}function Bu(e,t,r){for(var s=(e.mode&1)!==0;se!==null;){var l=se,d=l.child;if(l.tag===22&&s){var E=l.memoizedState!==null||as;if(!E){var R=l.alternate,b=R!==null&&R.memoizedState!==null||nr;R=as;var q=nr;if(as=E,(nr=b)&&!q)for(se=l;se!==null;)E=se,b=E.child,E.tag===22&&E.memoizedState!==null?Eu(l):b!==null?(b.return=E,se=b):Eu(l);for(;d!==null;)se=d,Bu(d),d=d.sibling;se=l,as=R,nr=q}Cu(e)}else l.subtreeFlags&8772&&d!==null?(d.return=l,se=d):Cu(e)}}function Cu(e){for(;se!==null;){var t=se;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:nr||oi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!nr)if(r===null)s.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:$t(t.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var d=t.updateQueue;d!==null&&hl(t,d,s);break;case 3:var E=t.updateQueue;if(E!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=ve(t.child.stateNode);break;case 1:r=t.child.stateNode}hl(t,E,r)}break;case 5:var R=t.stateNode;r===null&&t.flags&4&&$s(R,t.type,t.memoizedProps,t);break;case 6:break;case 4:break;case 12:break;case 13:if(vt&&t.memoizedState===null){var b=t.alternate;if(b!==null){var q=b.memoizedState;if(q!==null){var ue=q.dehydrated;ue!==null&&J(ue)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(c(163))}nr||t.flags&512&&Qo(t)}catch(Ee){Lt(t,t.return,Ee)}}if(t===e){se=null;break}if(r=t.sibling,r!==null){r.return=t.return,se=r;break}se=t.return}}function yu(e){for(;se!==null;){var t=se;if(t===e){se=null;break}var r=t.sibling;if(r!==null){r.return=t.return,se=r;break}se=t.return}}function Eu(e){for(;se!==null;){var t=se;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{oi(4,t)}catch(b){Lt(t,r,b)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(b){Lt(t,l,b)}}var d=t.return;try{Qo(t)}catch(b){Lt(t,d,b)}break;case 5:var E=t.return;try{Qo(t)}catch(b){Lt(t,E,b)}}}catch(b){Lt(t,t.return,b)}if(t===e){se=null;break}var R=t.sibling;if(R!==null){R.return=t.return,se=R;break}se=t.return}}var cs=0,fs=1,ds=2,ps=3,hs=4;if(typeof Symbol=="function"&&Symbol.for){var ai=Symbol.for;cs=ai("selector.component"),fs=ai("selector.has_pseudo_class"),ds=ai("selector.role"),ps=ai("selector.test_id"),hs=ai("selector.text")}function Yo(e){var t=wi(e);if(t!=null){if(typeof t.memoizedProps["data-testname"]!="string")throw Error(c(364));return t}if(e=Ws(e),e===null)throw Error(c(362));return e.stateNode.current}function Vo(e,t){switch(t.$$typeof){case cs:if(e.type===t.value)return!0;break;case fs:e:{t=t.value,e=[e,0];for(var r=0;r<e.length;){var s=e[r++],l=e[r++],d=t[l];if(s.tag!==5||!Wn(s)){for(;d!=null&&Vo(s,d);)l++,d=t[l];if(l===t.length){t=!0;break e}else for(s=s.child;s!==null;)e.push(s,l),s=s.sibling}}t=!1}return t;case ds:if(e.tag===5&&Kr(e.stateNode,t.value))return!0;break;case hs:if((e.tag===5||e.tag===6)&&(e=Mi(e),e!==null&&0<=e.indexOf(t.value)))return!0;break;case ps:if(e.tag===5&&(e=e.memoizedProps["data-testname"],typeof e=="string"&&e.toLowerCase()===t.value.toLowerCase()))return!0;break;default:throw Error(c(365))}return!1}function qo(e){switch(e.$$typeof){case cs:return"<"+(K(e.value)||"Unknown")+">";case fs:return":has("+(qo(e)||"")+")";case ds:return'[role="'+e.value+'"]';case hs:return'"'+e.value+'"';case ps:return'[data-testname="'+e.value+'"]';default:throw Error(c(365))}}function wu(e,t){var r=[];e=[e,0];for(var s=0;s<e.length;){var l=e[s++],d=e[s++],E=t[d];if(l.tag!==5||!Wn(l)){for(;E!=null&&Vo(l,E);)d++,E=t[d];if(d===t.length)r.push(l);else for(l=l.child;l!==null;)e.push(l,d),l=l.sibling}}return r}function $o(e,t){if(!Xn)throw Error(c(363));e=Yo(e),e=wu(e,t),t=[],e=Array.from(e);for(var r=0;r<e.length;){var s=e[r++];if(s.tag===5)Wn(s)||t.push(s.stateNode);else for(s=s.child;s!==null;)e.push(s),s=s.sibling}return t}var Vf=Math.ceil,ms=h.ReactCurrentDispatcher,ea=h.ReactCurrentOwner,rt=h.ReactCurrentBatchConfig,Fe=0,st=null,ot=null,gt=0,Ot=0,xr=Ge(0),ut=0,li=null,Ir=0,As=0,ta=0,ui=null,Dt=null,na=0,ra=1/0;function Rr(){ra=dt()+500}var gs=!1,ia=null,Fn=null,vs=!1,Tn=null,Bs=0,ci=0,sa=null,Cs=-1,ys=0;function Rt(){return Fe&6?dt():Cs!==-1?Cs:Cs=dt()}function _n(e){return e.mode&1?Fe&2&&gt!==0?gt&-gt:Gf.transition!==null?(ys===0&&(e=Li,Li<<=1,!(Li&4194240)&&(Li=64),ys=e),ys):(e=ke,e!==0?e:Ks()):1}function Kt(e,t,r){if(50<ci)throw ci=0,sa=null,Error(c(185));var s=Es(e,t);return s===null?null:(Xr(s,t,r),(!(Fe&2)||s!==st)&&(s===st&&(!(Fe&2)&&(As|=t),ut===4&&Dn(s,gt)),Gt(s,r),t===1&&Fe===0&&!(e.mode&1)&&(Rr(),Oi&&on())),s)}function Es(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}function Gt(e,t){var r=e.callbackNode;Sf(e,t);var s=Hi(e,e===st?gt:0);if(s===0)r!==null&&ul(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&ul(r),t===1)e.tag===0?Df(Mu.bind(null,e)):cl(Mu.bind(null,e)),Qs?Xs(function(){Fe===0&&on()}):po(ho,on),r=null;else{switch(ll(s)){case 1:r=ho;break;case 4:r=Rf;break;case 16:r=mo;break;case 536870912:r=Ff;break;default:r=mo}r=Lu(r,Su.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Su(e,t){if(Cs=-1,ys=0,Fe&6)throw Error(c(327));var r=e.callbackNode;if(or()&&e.callbackNode!==r)return null;var s=Hi(e,e===st?gt:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=ws(e,s);else{t=s;var l=Fe;Fe|=2;var d=Ru();(st!==e||gt!==t)&&(Rr(),ir(e,t));do try{ed();break}catch(R){Iu(e,R)}while(!0);vo(),ms.current=d,Fe=l,ot!==null?t=0:(st=null,gt=0,t=ut)}if(t!==0){if(t===2&&(l=uo(e),l!==0&&(s=l,t=oa(e,l))),t===1)throw r=li,ir(e,0),Dn(e,s),Gt(e,dt()),r;if(t===6)Dn(e,s);else{if(l=e.current.alternate,!(s&30)&&!qf(l)&&(t=ws(e,s),t===2&&(d=uo(e),d!==0&&(s=d,t=oa(e,d))),t===1))throw r=li,ir(e,0),Dn(e,s),Gt(e,dt()),r;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(c(345));case 2:sr(e,Dt);break;case 3:if(Dn(e,s),(s&130023424)===s&&(t=na+500-dt(),10<t)){if(Hi(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){Rt(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=mt(sr.bind(null,e,Dt),t);break}sr(e,Dt);break;case 4:if(Dn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var E=31-Ve(s);d=1<<E,E=t[E],E>l&&(l=E),s&=~d}if(s=l,s=dt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*Vf(s/1960))-s,10<s){e.timeoutHandle=mt(sr.bind(null,e,Dt),s);break}sr(e,Dt);break;case 5:sr(e,Dt);break;default:throw Error(c(329))}}}return Gt(e,dt()),e.callbackNode===r?Su.bind(null,e):null}function oa(e,t){var r=ui;return e.current.memoizedState.isDehydrated&&(ir(e,t).flags|=256),e=ws(e,t),e!==2&&(t=Dt,Dt=r,t!==null&&aa(t)),e}function aa(e){Dt===null?Dt=e:Dt.push.apply(Dt,e)}function qf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],d=l.getSnapshot;l=l.value;try{if(!sn(d(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dn(e,t){for(t&=~ta,t&=~As,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ve(t),s=1<<r;e[r]=-1,t&=~s}}function Mu(e){if(Fe&6)throw Error(c(327));or();var t=Hi(e,0);if(!(t&1))return Gt(e,dt()),null;var r=ws(e,t);if(e.tag!==0&&r===2){var s=uo(e);s!==0&&(t=s,r=oa(e,s))}if(r===1)throw r=li,ir(e,0),Dn(e,t),Gt(e,dt()),r;if(r===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,sr(e,Dt),Gt(e,dt()),null}function xu(e){Tn!==null&&Tn.tag===0&&!(Fe&6)&&or();var t=Fe;Fe|=1;var r=rt.transition,s=ke;try{if(rt.transition=null,ke=1,e)return e()}finally{ke=s,rt.transition=r,Fe=t,!(Fe&6)&&on()}}function la(){Ot=xr.current,Ce(xr)}function ir(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==br&&(e.timeoutHandle=br,Vt(r)),ot!==null)for(r=ot.return;r!==null;){var s=r;switch(Mo(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&At();break;case 3:Sr(),Ce(Ie),Ce(Ke),Do();break;case 5:To(s);break;case 4:Sr();break;case 13:Ce(et);break;case 19:Ce(et);break;case 10:Bo(s.type._context);break;case 22:case 23:la()}r=r.return}if(st=e,ot=e=Gn(e.current,null),gt=Ot=t,ut=0,li=null,ta=As=Ir=0,Dt=ui=null,an!==null){for(t=0;t<an.length;t++)if(r=an[t],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,d=r.pending;if(d!==null){var E=d.next;d.next=l,s.next=E}r.pending=s}an=null}return e}function Iu(e,t){do{var r=ot;try{if(vo(),Zi.current=ts,Yi){for(var s=nt.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Yi=!1}if(Mr=0,pt=yt=nt=null,$r=!1,ei=0,ea.current=null,r===null||r.return===null){ut=1,li=t,ot=null;break}e:{var d=e,E=r.return,R=r,b=t;if(t=gt,R.flags|=32768,b!==null&&typeof b=="object"&&typeof b.then=="function"){var q=b,ue=R,Ee=ue.tag;if(!(ue.mode&1)&&(Ee===0||Ee===11||Ee===15)){var ge=ue.alternate;ge?(ue.updateQueue=ge.updateQueue,ue.memoizedState=ge.memoizedState,ue.lanes=ge.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ze=Wl(E);if(ze!==null){ze.flags&=-257,Zl(ze,E,R,d,t),ze.mode&1&&Xl(d,q,t),t=ze,b=q;var he=t.updateQueue;if(he===null){var St=new Set;St.add(b),t.updateQueue=St}else he.add(b);break e}else{if(!(t&1)){Xl(d,q,t),ua();break e}b=Error(c(426))}}else if(qe&&R.mode&1){var Qt=Wl(E);if(Qt!==null){!(Qt.flags&65536)&&(Qt.flags|=256),Zl(Qt,E,R,d,t),Ro(b);break e}}d=b,ut!==4&&(ut=2),ui===null?ui=[d]:ui.push(d),b=No(b,R),R=E;do{switch(R.tag){case 3:R.flags|=65536,t&=-t,R.lanes|=t;var P=zl(R,b,t);pl(R,P);break e;case 1:d=b;var T=R.type,N=R.stateNode;if(!(R.flags&128)&&(typeof T.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(Fn===null||!Fn.has(N)))){R.flags|=65536,t&=-t,R.lanes|=t;var ae=Ql(R,d,t);pl(R,ae);break e}}R=R.return}while(R!==null)}Tu(r)}catch(de){t=de,ot===r&&r!==null&&(ot=r=r.return);continue}break}while(!0)}function Ru(){var e=ms.current;return ms.current=ts,e===null?ts:e}function ua(){(ut===0||ut===3||ut===2)&&(ut=4),st===null||!(Ir&268435455)&&!(As&268435455)||Dn(st,gt)}function ws(e,t){var r=Fe;Fe|=2;var s=Ru();st===e&&gt===t||ir(e,t);do try{$f();break}catch(l){Iu(e,l)}while(!0);if(vo(),Fe=r,ms.current=s,ot!==null)throw Error(c(261));return st=null,gt=0,ut}function $f(){for(;ot!==null;)Fu(ot)}function ed(){for(;ot!==null&&!xf();)Fu(ot)}function Fu(e){var t=Gu(e.alternate,e,Ot);e.memoizedProps=e.pendingProps,t===null?Tu(e):ot=t,ea.current=null}function Tu(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=Qf(r,t),r!==null){r.flags&=32767,ot=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{ut=6,ot=null;return}}else if(r=bf(r,t,Ot),r!==null){ot=r;return}if(t=t.sibling,t!==null){ot=t;return}ot=t=e}while(t!==null);ut===0&&(ut=5)}function sr(e,t){var r=ke,s=rt.transition;try{rt.transition=null,ke=1,td(e,t,r)}finally{rt.transition=s,ke=r}return null}function td(e,t,r){do or();while(Tn!==null);if(Fe&6)throw Error(c(327));var s=e.finishedWork,l=e.finishedLanes;if(s===null)return null;if(e.finishedWork=null,e.finishedLanes=0,s===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var d=s.lanes|s.childLanes;if(Mf(e,d),e===st&&(ot=st=null,gt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||vs||(vs=!0,Lu(mo,function(){return or(),null})),d=(s.flags&15990)!==0,s.subtreeFlags&15990||d){d=rt.transition,rt.transition=null;var E=ke;ke=1;var R=Fe;Fe|=4,ea.current=null,Wf(e,s),Zf(e,s),$(e.containerInfo),e.current=s,Yf(s),If(),Fe=R,ke=E,rt.transition=d}else e.current=s;if(vs&&(vs=!1,Tn=e,Bs=l),d=e.pendingLanes,d===0&&(Fn=null),Tf(s.stateNode),Gt(e,dt()),t!==null)for(r=e.onRecoverableError,s=0;s<t.length;s++)r(t[s]);if(gs)throw gs=!1,e=ia,ia=null,e;return Bs&1&&e.tag!==0&&or(),d=e.pendingLanes,d&1?e===sa?ci++:(ci=0,sa=e):ci=0,on(),null}function or(){if(Tn!==null){var e=ll(Bs),t=rt.transition,r=ke;try{if(rt.transition=null,ke=16>e?16:e,Tn===null)var s=!1;else{if(e=Tn,Tn=null,Bs=0,Fe&6)throw Error(c(331));var l=Fe;for(Fe|=4,se=e.current;se!==null;){var d=se,E=d.child;if(se.flags&16){var R=d.deletions;if(R!==null){for(var b=0;b<R.length;b++){var q=R[b];for(se=q;se!==null;){var ue=se;switch(ue.tag){case 0:case 11:case 15:rr(8,ue,d)}var Ee=ue.child;if(Ee!==null)Ee.return=ue,se=Ee;else for(;se!==null;){ue=se;var ge=ue.sibling,ze=ue.return;if(hu(ue),ue===q){se=null;break}if(ge!==null){ge.return=ze,se=ge;break}se=ze}}}var he=d.alternate;if(he!==null){var St=he.child;if(St!==null){he.child=null;do{var Qt=St.sibling;St.sibling=null,St=Qt}while(St!==null)}}se=d}}if(d.subtreeFlags&2064&&E!==null)E.return=d,se=E;else e:for(;se!==null;){if(d=se,d.flags&2048)switch(d.tag){case 0:case 11:case 15:rr(9,d,d.return)}var P=d.sibling;if(P!==null){P.return=d.return,se=P;break e}se=d.return}}var T=e.current;for(se=T;se!==null;){E=se;var N=E.child;if(E.subtreeFlags&2064&&N!==null)N.return=E,se=N;else e:for(E=T;se!==null;){if(R=se,R.flags&2048)try{switch(R.tag){case 0:case 11:case 15:oi(9,R)}}catch(de){Lt(R,R.return,de)}if(R===E){se=null;break e}var ae=R.sibling;if(ae!==null){ae.return=R.return,se=ae;break e}se=R.return}}if(Fe=l,on(),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(ki,e)}catch{}s=!0}return s}finally{ke=r,rt.transition=t}}return!1}function _u(e,t,r){t=No(r,t),t=zl(e,t,1),Rn(e,t),t=Rt(),e=Es(e,1),e!==null&&(Xr(e,1,t),Gt(e,t))}function Lt(e,t,r){if(e.tag===3)_u(e,e,r);else for(;t!==null;){if(t.tag===3){_u(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Fn===null||!Fn.has(s))){e=No(r,e),e=Ql(t,e,1),Rn(t,e),e=Rt(),t=Es(t,1),t!==null&&(Xr(t,1,e),Gt(t,e));break}}t=t.return}}function nd(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=Rt(),e.pingedLanes|=e.suspendedLanes&r,st===e&&(gt&r)===r&&(ut===4||ut===3&&(gt&130023424)===gt&&500>dt()-na?ir(e,0):ta|=r),Gt(e,t)}function Du(e,t){t===0&&(e.mode&1?(t=Pi,Pi<<=1,!(Pi&130023424)&&(Pi=4194304)):t=1);var r=Rt();e=Es(e,t),e!==null&&(Xr(e,t,r),Gt(e,r))}function rd(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Du(e,r)}function id(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(c(314))}s!==null&&s.delete(t),Du(e,r)}var Gu;Gu=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Ie.current)kt=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return kt=!1,zf(e,t,r);kt=!!(e.flags&131072)}else kt=!1,qe&&t.flags&1048576&&Bl(t,Qi,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var l=Ct(t,Ke.current);vr(t,r),l=Lo(null,t,s,e,l,r);var d=Po();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,it(s)?(d=!0,be(t)):d=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,yo(t),l.updater=Ki,t.stateNode=l,l._reactInternals=t,wo(t,s,e,r),t=Jo(null,t,s,!0,d,r)):(t.tag=0,qe&&d&&So(t),It(null,t,l,r),t=t.child),t;case 16:s=t.elementType;e:{switch(e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=od(s),e=$t(s,e),l){case 0:t=jo(null,t,s,e,r);break e;case 1:t=ru(null,t,s,e,r);break e;case 11:t=ql(null,t,s,e,r);break e;case 14:t=$l(null,t,s,$t(s.type,e),r);break e}throw Error(c(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:$t(s,l),jo(e,t,s,l,r);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:$t(s,l),ru(e,t,s,l,r);case 3:e:{if(iu(t),e===null)throw Error(c(387));s=t.pendingProps,d=t.memoizedState,l=d.element,dl(e,t),bi(t,s,null,r);var E=t.memoizedState;if(s=E.element,vt&&d.isDehydrated)if(d={element:s,isDehydrated:!1,cache:E.cache,transitions:E.transitions},t.updateQueue.baseState=d,t.memoizedState=d,t.flags&256){l=Error(c(423)),t=su(e,t,s,r,l);break e}else if(s!==l){l=Error(c(424)),t=su(e,t,s,r,l);break e}else for(vt&&(Ht=Gi(t.stateNode.containerInfo),Pt=t,qe=!0,en=null,Wr=!1),r=Ml(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(yr(),s===l){t=Bn(e,t,r);break e}It(e,t,s,r)}t=t.child}return t;case 5:return xl(t),e===null&&Io(t),s=t.type,l=t.pendingProps,d=e!==null?e.memoizedProps:null,E=l.children,ct(s,l)?E=null:d!==null&&ct(s,d)&&(t.flags|=32),nu(e,t),It(e,t,E,r),t.child;case 6:return e===null&&Io(t),null;case 13:return ou(e,t,r);case 4:return Fo(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Er(t,null,s,r):It(e,t,s,r),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:$t(s,l),ql(e,t,s,l,r);case 7:return It(e,t,t.pendingProps,r),t.child;case 8:return It(e,t,t.pendingProps.children,r),t.child;case 12:return It(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,d=t.memoizedProps,E=l.value,fl(t,s,E),d!==null)if(sn(d.value,E)){if(d.children===l.children&&!Ie.current){t=Bn(e,t,r);break e}}else for(d=t.child,d!==null&&(d.return=t);d!==null;){var R=d.dependencies;if(R!==null){E=d.child;for(var b=R.firstContext;b!==null;){if(b.context===s){if(d.tag===1){b=mn(-1,r&-r),b.tag=2;var q=d.updateQueue;if(q!==null){q=q.shared;var ue=q.pending;ue===null?b.next=b:(b.next=ue.next,ue.next=b),q.pending=b}}d.lanes|=r,b=d.alternate,b!==null&&(b.lanes|=r),Co(d.return,r,t),R.lanes|=r;break}b=b.next}}else if(d.tag===10)E=d.type===t.type?null:d.child;else if(d.tag===18){if(E=d.return,E===null)throw Error(c(341));E.lanes|=r,R=E.alternate,R!==null&&(R.lanes|=r),Co(E,r,t),E=d.sibling}else E=d.child;if(E!==null)E.return=d;else for(E=d;E!==null;){if(E===t){E=null;break}if(d=E.sibling,d!==null){d.return=E.return,E=d;break}E=E.return}d=E}It(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,vr(t,r),l=Nt(l),s=s(l),t.flags|=1,It(e,t,s,r),t.child;case 14:return s=t.type,l=$t(s,t.pendingProps),l=$t(s.type,l),$l(e,t,s,l,r);case 15:return eu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:$t(s,l),e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,it(s)?(e=!0,be(t)):e=!1,vr(t,r),gl(t,s,l),wo(t,s,l,r),Jo(null,t,s,!0,e,r);case 19:return cu(e,t,r);case 22:return tu(e,t,r)}throw Error(c(156,t.tag))};function Lu(e,t){return po(e,t)}function sd(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zt(e,t,r,s){return new sd(e,t,r,s)}function ca(e){return e=e.prototype,!(!e||!e.isReactComponent)}function od(e){if(typeof e=="function")return ca(e)?1:0;if(e!=null){if(e=e.$$typeof,e===D)return 11;if(e===_)return 14}return 2}function Gn(e,t){var r=e.alternate;return r===null?(r=zt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function Ss(e,t,r,s,l,d){var E=2;if(s=e,typeof e=="function")ca(e)&&(E=1);else if(typeof e=="string")E=5;else e:switch(e){case A:return ar(r.children,l,d,t);case m:E=8,l|=8;break;case B:return e=zt(12,r,t,l|2),e.elementType=B,e.lanes=d,e;case F:return e=zt(13,r,t,l),e.elementType=F,e.lanes=d,e;case x:return e=zt(19,r,t,l),e.elementType=x,e.lanes=d,e;case Q:return Ms(r,l,d,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case y:E=10;break e;case w:E=9;break e;case D:E=11;break e;case _:E=14;break e;case O:E=16,s=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=zt(E,r,t,l),t.elementType=e,t.type=s,t.lanes=d,t}function ar(e,t,r,s){return e=zt(7,e,s,t),e.lanes=r,e}function Ms(e,t,r,s){return e=zt(22,e,s,t),e.elementType=Q,e.lanes=r,e.stateNode={},e}function fa(e,t,r){return e=zt(6,e,null,t),e.lanes=r,e}function da(e,t,r){return t=zt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function ad(e,t,r,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=br,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=co(0),this.expirationTimes=co(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=co(0),this.identifierPrefix=s,this.onRecoverableError=l,vt&&(this.mutableSourceEagerHydrationData=null)}function Pu(e,t,r,s,l,d,E,R,b){return e=new ad(e,t,r,R,b),t===1?(t=1,d===!0&&(t|=8)):t=0,d=zt(3,null,null,t),e.current=d,d.stateNode=e,d.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null},yo(d),e}function Hu(e){if(!e)return Le;e=e._reactInternals;e:{if(L(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(it(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var r=e.type;if(it(r))return lt(e,r,t)}return t}function ku(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=z(t),e===null?null:e.stateNode}function Ou(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function pa(e,t){Ou(e,t),(e=e.alternate)&&Ou(e,t)}function ld(e){return e=z(e),e===null?null:e.stateNode}function ud(){return null}return i.attemptContinuousHydration=function(e){if(e.tag===13){var t=Rt();Kt(e,134217728,t),pa(e,134217728)}},i.attemptHydrationAtCurrentPriority=function(e){if(e.tag===13){var t=Rt(),r=_n(e);Kt(e,r,t),pa(e,r)}},i.attemptSynchronousHydration=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Qr(t.pendingLanes);r!==0&&(fo(t,r|1),Gt(t,dt()),!(Fe&6)&&(Rr(),on()))}break;case 13:var s=Rt();xu(function(){return Kt(e,1,s)}),pa(e,1)}},i.batchedUpdates=function(e,t){var r=Fe;Fe|=1;try{return e(t)}finally{Fe=r,Fe===0&&(Rr(),Oi&&on())}},i.createComponentSelector=function(e){return{$$typeof:cs,value:e}},i.createContainer=function(e,t,r,s,l,d,E){return Pu(e,t,!1,null,r,s,l,d,E)},i.createHasPseudoClassSelector=function(e){return{$$typeof:fs,value:e}},i.createHydrationContainer=function(e,t,r,s,l,d,E,R,b){return e=Pu(r,s,!0,e,l,d,E,R,b),e.context=Hu(null),r=e.current,s=Rt(),l=_n(r),d=mn(s,l),d.callback=t??null,Rn(r,d),e.current.lanes=l,Xr(e,l,s),Gt(e,s),e},i.createPortal=function(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:v,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}},i.createRoleSelector=function(e){return{$$typeof:ds,value:e}},i.createTestNameSelector=function(e){return{$$typeof:ps,value:e}},i.createTextSelector=function(e){return{$$typeof:hs,value:e}},i.deferredUpdates=function(e){var t=ke,r=rt.transition;try{return rt.transition=null,ke=16,e()}finally{ke=t,rt.transition=r}},i.discreteUpdates=function(e,t,r,s,l){var d=ke,E=rt.transition;try{return rt.transition=null,ke=1,e(t,r,s,l)}finally{ke=d,rt.transition=E,Fe===0&&Rr()}},i.findAllNodes=$o,i.findBoundingRects=function(e,t){if(!Xn)throw Error(c(363));t=$o(e,t),e=[];for(var r=0;r<t.length;r++)e.push(Zs(t[r]));for(t=e.length-1;0<t;t--){r=e[t];for(var s=r.x,l=s+r.width,d=r.y,E=d+r.height,R=t-1;0<=R;R--)if(t!==R){var b=e[R],q=b.x,ue=q+b.width,Ee=b.y,ge=Ee+b.height;if(s>=q&&d>=Ee&&l<=ue&&E<=ge){e.splice(t,1);break}else if(s!==q||r.width!==b.width||ge<d||Ee>E){if(!(d!==Ee||r.height!==b.height||ue<s||q>l)){q>s&&(b.width+=q-s,b.x=s),ue<l&&(b.width=l-q),e.splice(t,1);break}}else{Ee>d&&(b.height+=Ee-d,b.y=d),ge<E&&(b.height=E-Ee),e.splice(t,1);break}}}return e},i.findHostInstance=ku,i.findHostInstanceWithNoPortals=function(e){return e=H(e),e=e!==null?oe(e):null,e===null?null:e.stateNode},i.findHostInstanceWithWarning=function(e){return ku(e)},i.flushControlled=function(e){var t=Fe;Fe|=1;var r=rt.transition,s=ke;try{rt.transition=null,ke=1,e()}finally{ke=s,rt.transition=r,Fe=t,Fe===0&&(Rr(),on())}},i.flushPassiveEffects=or,i.flushSync=xu,i.focusWithin=function(e,t){if(!Xn)throw Error(c(363));for(e=Yo(e),t=wu(e,t),t=Array.from(t),e=0;e<t.length;){var r=t[e++];if(!Wn(r)){if(r.tag===5&&Ys(r.stateNode))return!0;for(r=r.child;r!==null;)t.push(r),r=r.sibling}}return!1},i.getCurrentUpdatePriority=function(){return ke},i.getFindAllNodesFailureDescription=function(e,t){if(!Xn)throw Error(c(363));var r=0,s=[];e=[Yo(e),0];for(var l=0;l<e.length;){var d=e[l++],E=e[l++],R=t[E];if((d.tag!==5||!Wn(d))&&(Vo(d,R)&&(s.push(qo(R)),E++,E>r&&(r=E)),E<t.length))for(d=d.child;d!==null;)e.push(d,E),d=d.sibling}if(r<t.length){for(e=[];r<t.length;r++)e.push(qo(t[r]));return`findAllNodes was able to match part of the selector:
  `+(s.join(" > ")+`

No matching component was found for:
  `)+e.join(" > ")}return null},i.getPublicRootInstance=function(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return ve(e.child.stateNode);default:return e.child.stateNode}},i.injectIntoDevTools=function(e){if(e={bundleType:e.bundleType,version:e.version,rendererPackageName:e.rendererPackageName,rendererConfig:e.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:ld,findFiberByHostInstance:e.findFiberByHostInstance||ud,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")e=!1;else{var t=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t.isDisabled||!t.supportsFiber)e=!0;else{try{ki=t.inject(e),rn=t}catch{}e=!!t.checkDCE}}return e},i.isAlreadyRendering=function(){return!1},i.observeVisibleRects=function(e,t,r,s){if(!Xn)throw Error(c(363));e=$o(e,t);var l=Vs(e,r,s).disconnect;return{disconnect:function(){l()}}},i.registerMutableSourceForHydration=function(e,t){var r=t._getVersion;r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r)},i.runWithPriority=function(e,t){var r=ke;try{return ke=e,t()}finally{ke=r}},i.shouldError=function(){return null},i.shouldSuspend=function(){return!1},i.updateContainer=function(e,t,r,s){var l=t.current,d=Rt(),E=_n(l);return r=Hu(r),t.context===null?t.context=r:t.pendingContext=r,t=mn(d,E),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),Rn(l,t),e=Kt(l,E,d),e!==null&&Ji(e,l,E),E},i};Uc.exports=Fp;var Tp=Uc.exports;const _p=dd(Tp),Za={},bc=a=>void Object.assign(Za,a);function Dp(a,n){function i(A,{args:m=[],attach:B,...y},w){let D=`${A[0].toUpperCase()}${A.slice(1)}`,F;if(A==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const x=y.object;F=Dr(x,{type:A,root:w,attach:B,primitive:!0})}else{const x=Za[D];if(!x)throw new Error(`R3F: ${D} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(m))throw new Error("R3F: The args prop must be an array!");F=Dr(new x(...m),{type:A,root:w,attach:B,memoizedProps:{args:m}})}return F.__r3f.attach===void 0&&(F.isBufferGeometry?F.__r3f.attach="geometry":F.isMaterial&&(F.__r3f.attach="material")),D!=="inject"&&Ca(F,y),F}function u(A,m){let B=!1;if(m){var y,w;(y=m.__r3f)!=null&&y.attach?Ba(A,m,m.__r3f.attach):m.isObject3D&&A.isObject3D&&(A.add(m),B=!0),B||(w=A.__r3f)==null||w.objects.push(m),m.__r3f||Dr(m,{}),m.__r3f.parent=A,Na(m),Gr(m)}}function o(A,m,B){let y=!1;if(m){var w,D;if((w=m.__r3f)!=null&&w.attach)Ba(A,m,m.__r3f.attach);else if(m.isObject3D&&A.isObject3D){m.parent=A,m.dispatchEvent({type:"added"}),A.dispatchEvent({type:"childadded",child:m});const F=A.children.filter(_=>_!==m),x=F.indexOf(B);A.children=[...F.slice(0,x),m,...F.slice(x)],y=!0}y||(D=A.__r3f)==null||D.objects.push(m),m.__r3f||Dr(m,{}),m.__r3f.parent=A,Na(m),Gr(m)}}function f(A,m,B=!1){A&&[...A].forEach(y=>c(m,y,B))}function c(A,m,B){if(m){var y,w,D;if(m.__r3f&&(m.__r3f.parent=null),(y=A.__r3f)!=null&&y.objects&&(A.__r3f.objects=A.__r3f.objects.filter(Q=>Q!==m)),(w=m.__r3f)!=null&&w.attach)Zu(A,m,m.__r3f.attach);else if(m.isObject3D&&A.isObject3D){var F;A.remove(m),(F=m.__r3f)!=null&&F.root&&Np(Ls(m),m)}const _=(D=m.__r3f)==null?void 0:D.primitive,O=!_&&(B===void 0?m.dispose!==null:B);if(!_){var x;f((x=m.__r3f)==null?void 0:x.objects,m,O),f(m.children,m,O)}if(delete m.__r3f,O&&m.dispose&&m.type!=="Scene"){const Q=()=>{try{m.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ka.unstable_scheduleCallback(ka.unstable_IdlePriority,Q):Q()}Gr(A)}}function h(A,m,B,y){var w;const D=(w=A.__r3f)==null?void 0:w.parent;if(!D)return;const F=i(m,B,A.__r3f.root);if(A.children){for(const x of A.children)x.__r3f&&u(F,x);A.children=A.children.filter(x=>!x.__r3f)}A.__r3f.objects.forEach(x=>u(F,x)),A.__r3f.objects=[],A.__r3f.autoRemovedBeforeAppend||c(D,A),F.parent&&(F.__r3f.autoRemovedBeforeAppend=!0),u(D,F),F.raycast&&F.__r3f.eventCount&&Ls(F).getState().internal.interaction.push(F),[y,y.alternate].forEach(x=>{x!==null&&(x.stateNode=F,x.ref&&(typeof x.ref=="function"?x.ref(F):x.ref.current=F))})}const p=()=>{};return{reconciler:_p({createInstance:i,removeChild:c,appendChild:u,appendInitialChild:u,insertBefore:o,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(A,m)=>{if(!m)return;const B=A.getState().scene;B.__r3f&&(B.__r3f.root=A,u(B,m))},removeChildFromContainer:(A,m)=>{m&&c(A.getState().scene,m)},insertInContainerBefore:(A,m,B)=>{if(!m||!B)return;const y=A.getState().scene;y.__r3f&&o(y,m,B)},getRootHostContext:()=>null,getChildHostContext:A=>A,finalizeInitialChildren(A){var m;return!!((m=A==null?void 0:A.__r3f)!=null?m:{}).handlers},prepareUpdate(A,m,B,y){var w;if(((w=A==null?void 0:A.__r3f)!=null?w:{}).primitive&&y.object&&y.object!==A)return[!0];{const{args:F=[],children:x,..._}=y,{args:O=[],children:Q,...W}=B;if(!Array.isArray(F))throw new Error("R3F: the args prop must be an array!");if(F.some((K,I)=>K!==O[I]))return[!0];const X=Yc(A,_,W,!0);return X.changes.length?[!1,X]:null}},commitUpdate(A,[m,B],y,w,D,F){m?h(A,y,D,F):Ca(A,B)},commitMount(A,m,B,y){var w;const D=(w=A.__r3f)!=null?w:{};A.raycast&&D.handlers&&D.eventCount&&Ls(A).getState().internal.interaction.push(A)},getPublicInstance:A=>A,prepareForCommit:()=>null,preparePortalMount:A=>Dr(A.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(A){var m;const{attach:B,parent:y}=(m=A.__r3f)!=null?m:{};B&&y&&Zu(y,A,B),A.isObject3D&&(A.visible=!1),Gr(A)},unhideInstance(A,m){var B;const{attach:y,parent:w}=(B=A.__r3f)!=null?B:{};y&&w&&Ba(w,A,y),(A.isObject3D&&m.visible==null||m.visible)&&(A.visible=!0),Gr(A)},createTextInstance:p,hideTextInstance:p,unhideTextInstance:p,getCurrentEventPriority:()=>n?n():Hr.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Xe.fun(performance.now)?performance.now:Xe.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Xe.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Xe.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Ca}}var zu,Qu;const va=a=>"colorSpace"in a||"outputColorSpace"in a,Kc=()=>{var a;return(a=Za.ColorManagement)!=null?a:null},zc=a=>a&&a.isOrthographicCamera,Gp=a=>a&&a.hasOwnProperty("current"),yi=typeof window<"u"&&((zu=window.document)!=null&&zu.createElement||((Qu=window.navigator)==null?void 0:Qu.product)==="ReactNative")?U.useLayoutEffect:U.useEffect;function Qc(a){const n=U.useRef(a);return yi(()=>void(n.current=a),[a]),n}function Lp({set:a}){return yi(()=>(a(new Promise(()=>null)),()=>a(!1)),[a]),null}class Xc extends U.Component{constructor(...n){super(...n),this.state={error:!1}}componentDidCatch(n){this.props.set(n)}render(){return this.state.error?null:this.props.children}}Xc.getDerivedStateFromError=()=>({error:!0});const Wc="__default",Xu=new Map,Pp=a=>a&&!!a.memoized&&!!a.changes;function Zc(a){var n;const i=typeof window<"u"?(n=window.devicePixelRatio)!=null?n:2:1;return Array.isArray(a)?Math.min(Math.max(a[0],i),a[1]):a}const fi=a=>{var n;return(n=a.__r3f)==null?void 0:n.root.getState()};function Ls(a){let n=a.__r3f.root;for(;n.getState().previousRoot;)n=n.getState().previousRoot;return n}const Xe={obj:a=>a===Object(a)&&!Xe.arr(a)&&typeof a!="function",fun:a=>typeof a=="function",str:a=>typeof a=="string",num:a=>typeof a=="number",boo:a=>typeof a=="boolean",und:a=>a===void 0,arr:a=>Array.isArray(a),equ(a,n,{arrays:i="shallow",objects:u="reference",strict:o=!0}={}){if(typeof a!=typeof n||!!a!=!!n)return!1;if(Xe.str(a)||Xe.num(a)||Xe.boo(a))return a===n;const f=Xe.obj(a);if(f&&u==="reference")return a===n;const c=Xe.arr(a);if(c&&i==="reference")return a===n;if((c||f)&&a===n)return!0;let h;for(h in a)if(!(h in n))return!1;if(f&&i==="shallow"&&u==="shallow"){for(h in o?n:a)if(!Xe.equ(a[h],n[h],{strict:o,objects:"reference"}))return!1}else for(h in o?n:a)if(a[h]!==n[h])return!1;if(Xe.und(h)){if(c&&a.length===0&&n.length===0||f&&Object.keys(a).length===0&&Object.keys(n).length===0)return!0;if(a!==n)return!1}return!0}};function Hp(a){const n={nodes:{},materials:{}};return a&&a.traverse(i=>{i.name&&(n.nodes[i.name]=i),i.material&&!n.materials[i.material.name]&&(n.materials[i.material.name]=i.material)}),n}function kp(a){a.dispose&&a.type!=="Scene"&&a.dispose();for(const n in a)n.dispose==null||n.dispose(),delete a[n]}function Dr(a,n){const i=a;return i.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...n},a}function Oa(a,n){let i=a;if(n.includes("-")){const u=n.split("-"),o=u.pop();return i=u.reduce((f,c)=>f[c],a),{target:i,key:o}}else return{target:i,key:n}}const Wu=/-\d+$/;function Ba(a,n,i){if(Xe.str(i)){if(Wu.test(i)){const f=i.replace(Wu,""),{target:c,key:h}=Oa(a,f);Array.isArray(c[h])||(c[h]=[])}const{target:u,key:o}=Oa(a,i);n.__r3f.previousAttach=u[o],u[o]=n}else n.__r3f.previousAttach=i(a,n)}function Zu(a,n,i){var u,o;if(Xe.str(i)){const{target:f,key:c}=Oa(a,i),h=n.__r3f.previousAttach;h===void 0?delete f[c]:f[c]=h}else(u=n.__r3f)==null||u.previousAttach==null||u.previousAttach(a,n);(o=n.__r3f)==null||delete o.previousAttach}function Yc(a,{children:n,key:i,ref:u,...o},{children:f,key:c,ref:h,...p}={},v=!1){const A=a.__r3f,m=Object.entries(o),B=[];if(v){const w=Object.keys(p);for(let D=0;D<w.length;D++)o.hasOwnProperty(w[D])||m.unshift([w[D],Wc+"remove"])}m.forEach(([w,D])=>{var F;if((F=a.__r3f)!=null&&F.primitive&&w==="object"||Xe.equ(D,p[w]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(w))return B.push([w,D,!0,[]]);let x=[];w.includes("-")&&(x=w.split("-")),B.push([w,D,!1,x]);for(const _ in o){const O=o[_];_.startsWith(`${w}-`)&&B.push([_,O,!1,_.split("-")])}});const y={...o};return A!=null&&A.memoizedProps&&A!=null&&A.memoizedProps.args&&(y.args=A.memoizedProps.args),A!=null&&A.memoizedProps&&A!=null&&A.memoizedProps.attach&&(y.attach=A.memoizedProps.attach),{memoized:y,changes:B}}function Ca(a,n){var i;const u=a.__r3f,o=u==null?void 0:u.root,f=o==null||o.getState==null?void 0:o.getState(),{memoized:c,changes:h}=Pp(n)?n:Yc(a,n),p=u==null?void 0:u.eventCount;a.__r3f&&(a.__r3f.memoizedProps=c);for(let B=0;B<h.length;B++){let[y,w,D,F]=h[B];if(va(a)){const Q="srgb",W="srgb-linear";y==="encoding"?(y="colorSpace",w=w===3001?Q:W):y==="outputEncoding"&&(y="outputColorSpace",w=w===3001?Q:W)}let x=a,_=x[y];if(F.length&&(_=F.reduce((O,Q)=>O[Q],a),!(_&&_.set))){const[O,...Q]=F.reverse();x=Q.reverse().reduce((W,X)=>W[X],a),y=O}if(w===Wc+"remove")if(x.constructor){let O=Xu.get(x.constructor);O||(O=new x.constructor,Xu.set(x.constructor,O)),w=O[y]}else w=0;if(D&&u)w?u.handlers[y]=w:delete u.handlers[y],u.eventCount=Object.keys(u.handlers).length;else if(_&&_.set&&(_.copy||_ instanceof ma)){if(Array.isArray(w))_.fromArray?_.fromArray(w):_.set(...w);else if(_.copy&&w&&w.constructor&&_.constructor===w.constructor)_.copy(w);else if(w!==void 0){var v;const O=(v=_)==null?void 0:v.isColor;!O&&_.setScalar?_.setScalar(w):_ instanceof ma&&w instanceof ma?_.mask=w.mask:_.set(w),!Kc()&&f&&!f.linear&&O&&_.convertSRGBToLinear()}}else{var A;if(x[y]=w,(A=x[y])!=null&&A.isTexture&&x[y].format===Ur&&x[y].type===Ps&&f){const O=x[y];va(O)&&va(f.gl)?O.colorSpace=f.gl.outputColorSpace:O.encoding=f.gl.outputEncoding}}Gr(a)}if(u&&u.parent&&a.raycast&&p!==u.eventCount){const B=Ls(a).getState().internal,y=B.interaction.indexOf(a);y>-1&&B.interaction.splice(y,1),u.eventCount&&B.interaction.push(a)}return!(h.length===1&&h[0][0]==="onUpdate")&&h.length&&(i=a.__r3f)!=null&&i.parent&&Na(a),a}function Gr(a){var n,i;const u=(n=a.__r3f)==null||(i=n.root)==null||i.getState==null?void 0:i.getState();u&&u.internal.frames===0&&u.invalidate()}function Na(a){a.onUpdate==null||a.onUpdate(a)}function Vc(a,n){a.manual||(zc(a)?(a.left=n.width/-2,a.right=n.width/2,a.top=n.height/2,a.bottom=n.height/-2):a.aspect=n.width/n.height,a.updateProjectionMatrix(),a.updateMatrixWorld())}function xs(a){return(a.eventObject||a.object).uuid+"/"+a.index+a.instanceId}function Op(){var a;const n=typeof self<"u"&&self||typeof window<"u"&&window;if(!n)return Hr.DefaultEventPriority;switch((a=n.event)==null?void 0:a.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Hr.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Hr.ContinuousEventPriority;default:return Hr.DefaultEventPriority}}function qc(a,n,i,u){const o=i.get(n);o&&(i.delete(n),i.size===0&&(a.delete(u),o.target.releasePointerCapture(u)))}function Np(a,n){const{internal:i}=a.getState();i.interaction=i.interaction.filter(u=>u!==n),i.initialHits=i.initialHits.filter(u=>u!==n),i.hovered.forEach((u,o)=>{(u.eventObject===n||u.object===n)&&i.hovered.delete(o)}),i.capturedMap.forEach((u,o)=>{qc(i.capturedMap,n,u,o)})}function Up(a){function n(p){const{internal:v}=a.getState(),A=p.offsetX-v.initialClick[0],m=p.offsetY-v.initialClick[1];return Math.round(Math.sqrt(A*A+m*m))}function i(p){return p.filter(v=>["Move","Over","Enter","Out","Leave"].some(A=>{var m;return(m=v.__r3f)==null?void 0:m.handlers["onPointer"+A]}))}function u(p,v){const A=a.getState(),m=new Set,B=[],y=v?v(A.internal.interaction):A.internal.interaction;for(let x=0;x<y.length;x++){const _=fi(y[x]);_&&(_.raycaster.camera=void 0)}A.previousRoot||A.events.compute==null||A.events.compute(p,A);function w(x){const _=fi(x);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var O;_.events.compute==null||_.events.compute(p,_,(O=_.previousRoot)==null?void 0:O.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(x,!0):[]}let D=y.flatMap(w).sort((x,_)=>{const O=fi(x.object),Q=fi(_.object);return!O||!Q?x.distance-_.distance:Q.events.priority-O.events.priority||x.distance-_.distance}).filter(x=>{const _=xs(x);return m.has(_)?!1:(m.add(_),!0)});A.events.filter&&(D=A.events.filter(D,A));for(const x of D){let _=x.object;for(;_;){var F;(F=_.__r3f)!=null&&F.eventCount&&B.push({...x,eventObject:_}),_=_.parent}}if("pointerId"in p&&A.internal.capturedMap.has(p.pointerId))for(let x of A.internal.capturedMap.get(p.pointerId).values())m.has(xs(x.intersection))||B.push(x.intersection);return B}function o(p,v,A,m){const B=a.getState();if(p.length){const y={stopped:!1};for(const w of p){const D=fi(w.object)||B,{raycaster:F,pointer:x,camera:_,internal:O}=D,Q=new Ze(x.x,x.y,0).unproject(_),W=G=>{var H,z;return(H=(z=O.capturedMap.get(G))==null?void 0:z.has(w.eventObject))!=null?H:!1},X=G=>{const H={intersection:w,target:v.target};O.capturedMap.has(G)?O.capturedMap.get(G).set(w.eventObject,H):O.capturedMap.set(G,new Map([[w.eventObject,H]])),v.target.setPointerCapture(G)},K=G=>{const H=O.capturedMap.get(G);H&&qc(O.capturedMap,w.eventObject,H,G)};let I={};for(let G in v){let H=v[G];typeof H!="function"&&(I[G]=H)}let L={...w,...I,pointer:x,intersections:p,stopped:y.stopped,delta:A,unprojectedPoint:Q,ray:F.ray,camera:_,stopPropagation(){const G="pointerId"in v&&O.capturedMap.get(v.pointerId);if((!G||G.has(w.eventObject))&&(L.stopped=y.stopped=!0,O.hovered.size&&Array.from(O.hovered.values()).find(H=>H.eventObject===w.eventObject))){const H=p.slice(0,p.indexOf(w));f([...H,w])}},target:{hasPointerCapture:W,setPointerCapture:X,releasePointerCapture:K},currentTarget:{hasPointerCapture:W,setPointerCapture:X,releasePointerCapture:K},nativeEvent:v};if(m(L),y.stopped===!0)break}}return p}function f(p){const{internal:v}=a.getState();for(const A of v.hovered.values())if(!p.length||!p.find(m=>m.object===A.object&&m.index===A.index&&m.instanceId===A.instanceId)){const B=A.eventObject.__r3f,y=B==null?void 0:B.handlers;if(v.hovered.delete(xs(A)),B!=null&&B.eventCount){const w={...A,intersections:p};y.onPointerOut==null||y.onPointerOut(w),y.onPointerLeave==null||y.onPointerLeave(w)}}}function c(p,v){for(let A=0;A<v.length;A++){const m=v[A].__r3f;m==null||m.handlers.onPointerMissed==null||m.handlers.onPointerMissed(p)}}function h(p){switch(p){case"onPointerLeave":case"onPointerCancel":return()=>f([]);case"onLostPointerCapture":return v=>{const{internal:A}=a.getState();"pointerId"in v&&A.capturedMap.has(v.pointerId)&&requestAnimationFrame(()=>{A.capturedMap.has(v.pointerId)&&(A.capturedMap.delete(v.pointerId),f([]))})}}return function(A){const{onPointerMissed:m,internal:B}=a.getState();B.lastEvent.current=A;const y=p==="onPointerMove",w=p==="onClick"||p==="onContextMenu"||p==="onDoubleClick",F=u(A,y?i:void 0),x=w?n(A):0;p==="onPointerDown"&&(B.initialClick=[A.offsetX,A.offsetY],B.initialHits=F.map(O=>O.eventObject)),w&&!F.length&&x<=2&&(c(A,B.interaction),m&&m(A)),y&&f(F);function _(O){const Q=O.eventObject,W=Q.__r3f,X=W==null?void 0:W.handlers;if(W!=null&&W.eventCount)if(y){if(X.onPointerOver||X.onPointerEnter||X.onPointerOut||X.onPointerLeave){const K=xs(O),I=B.hovered.get(K);I?I.stopped&&O.stopPropagation():(B.hovered.set(K,O),X.onPointerOver==null||X.onPointerOver(O),X.onPointerEnter==null||X.onPointerEnter(O))}X.onPointerMove==null||X.onPointerMove(O)}else{const K=X[p];K?(!w||B.initialHits.includes(Q))&&(c(A,B.interaction.filter(I=>!B.initialHits.includes(I))),K(O)):w&&B.initialHits.includes(Q)&&c(A,B.interaction.filter(I=>!B.initialHits.includes(I)))}}o(F,A,x,_)}}return{handlePointer:h}}const jp=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],$c=a=>!!(a!=null&&a.render),Ya=U.createContext(null),Jp=(a,n)=>{const i=kc((h,p)=>{const v=new Ze,A=new Ze,m=new Ze;function B(x=p().camera,_=A,O=p().size){const{width:Q,height:W,top:X,left:K}=O,I=Q/W;_.isVector3?m.copy(_):m.set(..._);const L=x.getWorldPosition(v).distanceTo(m);if(zc(x))return{width:Q/x.zoom,height:W/x.zoom,top:X,left:K,factor:1,distance:L,aspect:I};{const G=x.fov*Math.PI/180,H=2*Math.tan(G/2)*L,z=H*(Q/W);return{width:z,height:H,top:X,left:K,factor:Q/z,distance:L,aspect:I}}}let y;const w=x=>h(_=>({performance:{..._.performance,current:x}})),D=new Ns;return{set:h,get:p,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(x=1)=>a(p(),x),advance:(x,_)=>n(x,_,p()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Bd,pointer:D,mouse:D,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const x=p();y&&clearTimeout(y),x.performance.current!==x.performance.min&&w(x.performance.min),y=setTimeout(()=>w(p().performance.max),x.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:B},setEvents:x=>h(_=>({..._,events:{..._.events,...x}})),setSize:(x,_,O,Q,W)=>{const X=p().camera,K={width:x,height:_,top:Q||0,left:W||0,updateStyle:O};h(I=>({size:K,viewport:{...I.viewport,...B(X,A,K)}}))},setDpr:x=>h(_=>{const O=Zc(x);return{viewport:{..._.viewport,dpr:O,initialDpr:_.viewport.initialDpr||O}}}),setFrameloop:(x="always")=>{const _=p().clock;_.stop(),_.elapsedTime=0,x!=="never"&&(_.start(),_.elapsedTime=0),h(()=>({frameloop:x}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:U.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(x,_,O)=>{const Q=p().internal;return Q.priority=Q.priority+(_>0?1:0),Q.subscribers.push({ref:x,priority:_,store:O}),Q.subscribers=Q.subscribers.sort((W,X)=>W.priority-X.priority),()=>{const W=p().internal;W!=null&&W.subscribers&&(W.priority=W.priority-(_>0?1:0),W.subscribers=W.subscribers.filter(X=>X.ref!==x))}}}}}),u=i.getState();let o=u.size,f=u.viewport.dpr,c=u.camera;return i.subscribe(()=>{const{camera:h,size:p,viewport:v,gl:A,set:m}=i.getState();if(p.width!==o.width||p.height!==o.height||v.dpr!==f){var B;o=p,f=v.dpr,Vc(h,p),A.setPixelRatio(v.dpr);const y=(B=p.updateStyle)!=null?B:typeof HTMLCanvasElement<"u"&&A.domElement instanceof HTMLCanvasElement;A.setSize(p.width,p.height,y)}h!==c&&(c=h,m(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(h)}})))}),i.subscribe(h=>a(h)),i};let Is,bp=new Set,Kp=new Set,zp=new Set;function ya(a,n){if(a.size)for(const{callback:i}of a.values())i(n)}function di(a,n){switch(a){case"before":return ya(bp,n);case"after":return ya(Kp,n);case"tail":return ya(zp,n)}}let Ea,wa;function Sa(a,n,i){let u=n.clock.getDelta();for(n.frameloop==="never"&&typeof a=="number"&&(u=a-n.clock.elapsedTime,n.clock.oldTime=n.clock.elapsedTime,n.clock.elapsedTime=a),Ea=n.internal.subscribers,Is=0;Is<Ea.length;Is++)wa=Ea[Is],wa.ref.current(wa.store.getState(),u,i);return!n.internal.priority&&n.gl.render&&n.gl.render(n.scene,n.camera),n.internal.frames=Math.max(0,n.internal.frames-1),n.frameloop==="always"?1:n.internal.frames}function Qp(a){let n=!1,i=!1,u,o,f;function c(v){o=requestAnimationFrame(c),n=!0,u=0,di("before",v),i=!0;for(const m of a.values()){var A;f=m.store.getState(),f.internal.active&&(f.frameloop==="always"||f.internal.frames>0)&&!((A=f.gl.xr)!=null&&A.isPresenting)&&(u+=Sa(v,f))}if(i=!1,di("after",v),u===0)return di("tail",v),n=!1,cancelAnimationFrame(o)}function h(v,A=1){var m;if(!v)return a.forEach(B=>h(B.store.getState(),A));(m=v.gl.xr)!=null&&m.isPresenting||!v.internal.active||v.frameloop==="never"||(A>1?v.internal.frames=Math.min(60,v.internal.frames+A):i?v.internal.frames=2:v.internal.frames=1,n||(n=!0,requestAnimationFrame(c)))}function p(v,A=!0,m,B){if(A&&di("before",v),m)Sa(v,m,B);else for(const y of a.values())Sa(v,y.store.getState());A&&di("after",v)}return{loop:c,invalidate:h,advance:p}}function Va(){const a=U.useContext(Ya);if(!a)throw new Error("R3F: Hooks can only be used within the Canvas component!");return a}function Qn(a=i=>i,n){return Va()(a,n)}function Js(a,n=0){const i=Va(),u=i.getState().internal.subscribe,o=Qc(a);return yi(()=>u(o,n,i),[n,u,i]),null}const Yu=new WeakMap;function ef(a,n){return function(i,...u){let o=Yu.get(i);return o||(o=new i,Yu.set(i,o)),a&&a(o),Promise.all(u.map(f=>new Promise((c,h)=>o.load(f,p=>{p.scene&&Object.assign(p,Hp(p.scene)),c(p)},n,p=>h(new Error(`Could not load ${f}: ${p==null?void 0:p.message}`))))))}}function Mn(a,n,i,u){const o=Array.isArray(n)?n:[n],f=xp(ef(i,u),[a,...o],{equal:Xe.equ});return Array.isArray(n)?f:f[0]}Mn.preload=function(a,n,i){const u=Array.isArray(n)?n:[n];return Ip(ef(i),[a,...u])};Mn.clear=function(a,n){const i=Array.isArray(n)?n:[n];return Rp([a,...i])};const jr=new Map,{invalidate:Vu,advance:qu}=Qp(jr),{reconciler:Bi,applyProps:jn}=Dp(jr,Op),Fr={objects:"shallow",strict:!1},Xp=(a,n)=>{const i=typeof a=="function"?a(n):a;return $c(i)?i:new Sc({powerPreference:"high-performance",canvas:n,antialias:!0,alpha:!0,...a})};function Wp(a,n){const i=typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement;if(n){const{width:u,height:o,top:f,left:c,updateStyle:h=i}=n;return{width:u,height:o,top:f,left:c,updateStyle:h}}else if(typeof HTMLCanvasElement<"u"&&a instanceof HTMLCanvasElement&&a.parentElement){const{width:u,height:o,top:f,left:c}=a.parentElement.getBoundingClientRect();return{width:u,height:o,top:f,left:c,updateStyle:i}}else if(typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas)return{width:a.width,height:a.height,top:0,left:0,updateStyle:i};return{width:0,height:0,top:0,left:0}}function Zp(a){const n=jr.get(a),i=n==null?void 0:n.fiber,u=n==null?void 0:n.store;n&&console.warn("R3F.createRoot should only be called once!");const o=typeof reportError=="function"?reportError:console.error,f=u||Jp(Vu,qu),c=i||Bi.createContainer(f,Hr.ConcurrentRoot,null,!1,null,"",o,null);n||jr.set(a,{fiber:c,store:f});let h,p=!1,v;return{configure(A={}){let{gl:m,size:B,scene:y,events:w,onCreated:D,shadows:F=!1,linear:x=!1,flat:_=!1,legacy:O=!1,orthographic:Q=!1,frameloop:W="always",dpr:X=[1,2],performance:K,raycaster:I,camera:L,onPointerMissed:G}=A,H=f.getState(),z=H.gl;H.gl||H.set({gl:z=Xp(m,a)});let V=H.raycaster;V||H.set({raycaster:V=new Ec});const{params:oe,...xe}=I||{};if(Xe.equ(xe,V,Fr)||jn(V,{...xe}),Xe.equ(oe,V.params,Fr)||jn(V,{params:{...V.params,...oe}}),!H.camera||H.camera===v&&!Xe.equ(v,L,Fr)){v=L;const $=L instanceof vd,me=$?L:Q?new za(0,0,0,0,.1,1e3):new wc(75,0,.1,1e3);$||(me.position.z=5,L&&(jn(me,L),("aspect"in L||"left"in L||"right"in L||"bottom"in L||"top"in L)&&(me.manual=!0,me.updateProjectionMatrix())),!H.camera&&!(L!=null&&L.rotation)&&me.lookAt(0,0,0)),H.set({camera:me}),V.camera=me}if(!H.scene){let $;y!=null&&y.isScene?$=y:($=new Qa,y&&jn($,y)),H.set({scene:Dr($)})}if(!H.xr){var ve;const $=(Be,We)=>{const ct=f.getState();ct.frameloop!=="never"&&qu(Be,!0,ct,We)},me=()=>{const Be=f.getState();Be.gl.xr.enabled=Be.gl.xr.isPresenting,Be.gl.xr.setAnimationLoop(Be.gl.xr.isPresenting?$:null),Be.gl.xr.isPresenting||Vu(Be)},Ae={connect(){const Be=f.getState().gl;Be.xr.addEventListener("sessionstart",me),Be.xr.addEventListener("sessionend",me)},disconnect(){const Be=f.getState().gl;Be.xr.removeEventListener("sessionstart",me),Be.xr.removeEventListener("sessionend",me)}};typeof((ve=z.xr)==null?void 0:ve.addEventListener)=="function"&&Ae.connect(),H.set({xr:Ae})}if(z.shadowMap){const $=z.shadowMap.enabled,me=z.shadowMap.type;if(z.shadowMap.enabled=!!F,Xe.boo(F))z.shadowMap.type=ha;else if(Xe.str(F)){var tt;const Ae={basic:md,percentage:hd,soft:ha,variance:pd};z.shadowMap.type=(tt=Ae[F])!=null?tt:ha}else Xe.obj(F)&&Object.assign(z.shadowMap,F);($!==z.shadowMap.enabled||me!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const te=Kc();te&&("enabled"in te?te.enabled=!O:"legacyMode"in te&&(te.legacyMode=O)),p||jn(z,{outputEncoding:x?3e3:3001,toneMapping:_?Ad:gd}),H.legacy!==O&&H.set(()=>({legacy:O})),H.linear!==x&&H.set(()=>({linear:x})),H.flat!==_&&H.set(()=>({flat:_})),m&&!Xe.fun(m)&&!$c(m)&&!Xe.equ(m,z,Fr)&&jn(z,m),w&&!H.events.handlers&&H.set({events:w(f)});const ce=Wp(a,B);return Xe.equ(ce,H.size,Fr)||H.setSize(ce.width,ce.height,ce.updateStyle,ce.top,ce.left),X&&H.viewport.dpr!==Zc(X)&&H.setDpr(X),H.frameloop!==W&&H.setFrameloop(W),H.onPointerMissed||H.set({onPointerMissed:G}),K&&!Xe.equ(K,H.performance,Fr)&&H.set($=>({performance:{...$.performance,...K}})),h=D,p=!0,this},render(A){return p||this.configure(),Bi.updateContainer(S.jsx(Yp,{store:f,children:A,onCreated:h,rootElement:a}),c,null,()=>{}),f},unmount(){tf(a)}}}function Yp({store:a,children:n,onCreated:i,rootElement:u}){return yi(()=>{const o=a.getState();o.set(f=>({internal:{...f.internal,active:!0}})),i&&i(o),a.getState().events.connected||o.events.connect==null||o.events.connect(u)},[]),S.jsx(Ya.Provider,{value:a,children:n})}function tf(a,n){const i=jr.get(a),u=i==null?void 0:i.fiber;if(u){const o=i==null?void 0:i.store.getState();o&&(o.internal.active=!1),Bi.updateContainer(null,u,null,()=>{o&&setTimeout(()=>{try{var f,c,h,p;o.events.disconnect==null||o.events.disconnect(),(f=o.gl)==null||(c=f.renderLists)==null||c.dispose==null||c.dispose(),(h=o.gl)==null||h.forceContextLoss==null||h.forceContextLoss(),(p=o.gl)!=null&&p.xr&&o.xr.disconnect(),kp(o),jr.delete(a)}catch{}},500)})}}function Vp(a,n,i){return S.jsx(qp,{children:a,container:n,state:i},n.uuid)}function qp({state:a={},children:n,container:i}){const{events:u,size:o,...f}=a,c=Va(),[h]=U.useState(()=>new Ec),[p]=U.useState(()=>new Ns),v=U.useCallback((m,B)=>{const y={...m};Object.keys(m).forEach(D=>{(jp.includes(D)||m[D]!==B[D]&&B[D])&&delete y[D]});let w;if(B&&o){const D=B.camera;w=m.viewport.getCurrentViewport(D,new Ze,o),D!==m.camera&&Vc(D,o)}return{...y,scene:i,raycaster:h,pointer:p,mouse:p,previousRoot:c,events:{...m.events,...B==null?void 0:B.events,...u},size:{...m.size,...o},viewport:{...m.viewport,...w},...f}},[a]),[A]=U.useState(()=>{const m=c.getState();return kc((y,w)=>({...m,scene:i,raycaster:h,pointer:p,mouse:p,previousRoot:c,events:{...m.events,...u},size:{...m.size,...o},...f,set:y,get:w,setEvents:D=>y(F=>({...F,events:{...F.events,...D}}))}))});return U.useEffect(()=>{const m=c.subscribe(B=>A.setState(y=>v(B,y)));return()=>{m()}},[v]),U.useEffect(()=>{A.setState(m=>v(c.getState(),m))},[v]),U.useEffect(()=>()=>{A.destroy()},[]),S.jsx(S.Fragment,{children:Bi.createPortal(S.jsx(Ya.Provider,{value:A,children:n}),A,null)})}Bi.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:U.version});const Ma={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function $p(a){const{handlePointer:n}=Up(a);return{priority:1,enabled:!0,compute(i,u,o){u.pointer.set(i.offsetX/u.size.width*2-1,-(i.offsetY/u.size.height)*2+1),u.raycaster.setFromCamera(u.pointer,u.camera)},connected:void 0,handlers:Object.keys(Ma).reduce((i,u)=>({...i,[u]:n(u)}),{}),update:()=>{var i;const{events:u,internal:o}=a.getState();(i=o.lastEvent)!=null&&i.current&&u.handlers&&u.handlers.onPointerMove(o.lastEvent.current)},connect:i=>{var u;const{set:o,events:f}=a.getState();f.disconnect==null||f.disconnect(),o(c=>({events:{...c.events,connected:i}})),Object.entries((u=f.handlers)!=null?u:[]).forEach(([c,h])=>{const[p,v]=Ma[c];i.addEventListener(p,h,{passive:v})})},disconnect:()=>{const{set:i,events:u}=a.getState();if(u.connected){var o;Object.entries((o=u.handlers)!=null?o:[]).forEach(([f,c])=>{if(u&&u.connected instanceof HTMLElement){const[h]=Ma[f];u.connected.removeEventListener(h,c)}}),i(f=>({events:{...f.events,connected:void 0}}))}}}}function $u(a,n){let i;return(...u)=>{window.clearTimeout(i),i=window.setTimeout(()=>a(...u),n)}}function eh({debounce:a,scroll:n,polyfill:i,offsetSize:u}={debounce:0,scroll:!1,offsetSize:!1}){const o=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!o)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[f,c]=U.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),h=U.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:f,orientationHandler:null}),p=a?typeof a=="number"?a:a.scroll:null,v=a?typeof a=="number"?a:a.resize:null,A=U.useRef(!1);U.useEffect(()=>(A.current=!0,()=>void(A.current=!1)));const[m,B,y]=U.useMemo(()=>{const x=()=>{if(!h.current.element)return;const{left:_,top:O,width:Q,height:W,bottom:X,right:K,x:I,y:L}=h.current.element.getBoundingClientRect(),G={left:_,top:O,width:Q,height:W,bottom:X,right:K,x:I,y:L};h.current.element instanceof HTMLElement&&u&&(G.height=h.current.element.offsetHeight,G.width=h.current.element.offsetWidth),Object.freeze(G),A.current&&!ih(h.current.lastBounds,G)&&c(h.current.lastBounds=G)};return[x,v?$u(x,v):x,p?$u(x,p):x]},[c,u,p,v]);function w(){h.current.scrollContainers&&(h.current.scrollContainers.forEach(x=>x.removeEventListener("scroll",y,!0)),h.current.scrollContainers=null),h.current.resizeObserver&&(h.current.resizeObserver.disconnect(),h.current.resizeObserver=null),h.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",h.current.orientationHandler))}function D(){h.current.element&&(h.current.resizeObserver=new o(y),h.current.resizeObserver.observe(h.current.element),n&&h.current.scrollContainers&&h.current.scrollContainers.forEach(x=>x.addEventListener("scroll",y,{capture:!0,passive:!0})),h.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",h.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",h.current.orientationHandler))}const F=x=>{!x||x===h.current.element||(w(),h.current.element=x,h.current.scrollContainers=nf(x),D())};return nh(y,!!n),th(B),U.useEffect(()=>{w(),D()},[n,y,B]),U.useEffect(()=>w,[]),[F,f,m]}function th(a){U.useEffect(()=>{const n=a;return window.addEventListener("resize",n),()=>void window.removeEventListener("resize",n)},[a])}function nh(a,n){U.useEffect(()=>{if(n){const i=a;return window.addEventListener("scroll",i,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",i,!0)}},[a,n])}function nf(a){const n=[];if(!a||a===document.body)return n;const{overflow:i,overflowX:u,overflowY:o}=window.getComputedStyle(a);return[i,u,o].some(f=>f==="auto"||f==="scroll")&&n.push(a),[...n,...nf(a.parentElement)]}const rh=["x","y","top","bottom","left","right","width","height"],ih=(a,n)=>rh.every(i=>a[i]===n[i]);var sh=Object.defineProperty,oh=Object.defineProperties,ah=Object.getOwnPropertyDescriptors,ec=Object.getOwnPropertySymbols,lh=Object.prototype.hasOwnProperty,uh=Object.prototype.propertyIsEnumerable,tc=(a,n,i)=>n in a?sh(a,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[n]=i,nc=(a,n)=>{for(var i in n||(n={}))lh.call(n,i)&&tc(a,i,n[i]);if(ec)for(var i of ec(n))uh.call(n,i)&&tc(a,i,n[i]);return a},ch=(a,n)=>oh(a,ah(n)),rc,ic;typeof window<"u"&&((rc=window.document)!=null&&rc.createElement||((ic=window.navigator)==null?void 0:ic.product)==="ReactNative")?U.useLayoutEffect:U.useEffect;function rf(a,n,i){if(!a)return;if(i(a)===!0)return a;let u=a.child;for(;u;){const o=rf(u,n,i);if(o)return o;u=u.sibling}}function sf(a){try{return Object.defineProperties(a,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return a}}const sc=console.error;console.error=function(){const a=[...arguments].join("");if(a!=null&&a.startsWith("Warning:")&&a.includes("useContext")){console.error=sc;return}return sc.apply(this,arguments)};const qa=sf(U.createContext(null));class of extends U.Component{render(){return U.createElement(qa.Provider,{value:this._reactInternals},this.props.children)}}function fh(){const a=U.useContext(qa);if(a===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const n=U.useId();return U.useMemo(()=>{for(const u of[a,a==null?void 0:a.alternate]){if(!u)continue;const o=rf(u,!1,f=>{let c=f.memoizedState;for(;c;){if(c.memoizedState===n)return!0;c=c.next}});if(o)return o}},[a,n])}function dh(){const a=fh(),[n]=U.useState(()=>new Map);n.clear();let i=a;for(;i;){if(i.type&&typeof i.type=="object"){const o=i.type._context===void 0&&i.type.Provider===i.type?i.type:i.type._context;o&&o!==qa&&!n.has(o)&&n.set(o,U.useContext(sf(o)))}i=i.return}return n}function ph(){const a=dh();return U.useMemo(()=>Array.from(a.keys()).reduce((n,i)=>u=>U.createElement(n,null,U.createElement(i.Provider,ch(nc({},u),{value:a.get(i)}))),n=>U.createElement(of,nc({},n))),[a])}const hh=U.forwardRef(function({children:n,fallback:i,resize:u,style:o,gl:f,events:c=$p,eventSource:h,eventPrefix:p,shadows:v,linear:A,flat:m,legacy:B,orthographic:y,frameloop:w,dpr:D,performance:F,raycaster:x,camera:_,scene:O,onPointerMissed:Q,onCreated:W,...X},K){U.useMemo(()=>bc(Cd),[]);const I=ph(),[L,G]=eh({scroll:!0,debounce:{scroll:50,resize:0},...u}),H=U.useRef(null),z=U.useRef(null);U.useImperativeHandle(K,()=>H.current);const V=Qc(Q),[oe,xe]=U.useState(!1),[ve,tt]=U.useState(!1);if(oe)throw oe;if(ve)throw ve;const te=U.useRef(null);yi(()=>{const $=H.current;G.width>0&&G.height>0&&$&&(te.current||(te.current=Zp($)),te.current.configure({gl:f,events:c,shadows:v,linear:A,flat:m,legacy:B,orthographic:y,frameloop:w,dpr:D,performance:F,raycaster:x,camera:_,scene:O,size:G,onPointerMissed:(...me)=>V.current==null?void 0:V.current(...me),onCreated:me=>{me.events.connect==null||me.events.connect(h?Gp(h)?h.current:h:z.current),p&&me.setEvents({compute:(Ae,Be)=>{const We=Ae[p+"X"],ct=Ae[p+"Y"];Be.pointer.set(We/Be.size.width*2-1,-(ct/Be.size.height)*2+1),Be.raycaster.setFromCamera(Be.pointer,Be.camera)}}),W==null||W(me)}}),te.current.render(S.jsx(I,{children:S.jsx(Xc,{set:tt,children:S.jsx(U.Suspense,{fallback:S.jsx(Lp,{set:xe}),children:n??null})})})))}),U.useEffect(()=>{const $=H.current;if($)return()=>tf($)},[]);const ce=h?"none":"auto";return S.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:ce,...o},...X,children:S.jsx("div",{ref:L,style:{width:"100%",height:"100%"},children:S.jsx("canvas",{ref:H,style:{display:"block"},children:i})})})}),mh=U.forwardRef(function(n,i){return S.jsx(of,{children:S.jsx(hh,{...n,ref:i})})});function Ua(){return Ua=Object.assign?Object.assign.bind():function(a){for(var n=1;n<arguments.length;n++){var i=arguments[n];for(var u in i)({}).hasOwnProperty.call(i,u)&&(a[u]=i[u])}return a},Ua.apply(null,arguments)}const $a=parseInt(yd.replace(/\D+/g,""));function oc(a,n){if(n===Ed)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),a;if(n===Ga||n===Mc){let i=a.getIndex();if(i===null){const c=[],h=a.getAttribute("position");if(h!==void 0){for(let p=0;p<h.count;p++)c.push(p);a.setIndex(c),i=a.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),a}const u=i.count-2,o=[];if(i)if(n===Ga)for(let c=1;c<=u;c++)o.push(i.getX(0)),o.push(i.getX(c)),o.push(i.getX(c+1));else for(let c=0;c<u;c++)c%2===0?(o.push(i.getX(c)),o.push(i.getX(c+1)),o.push(i.getX(c+2))):(o.push(i.getX(c+2)),o.push(i.getX(c+1)),o.push(i.getX(c)));o.length/3!==u&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const f=a.clone();return f.setIndex(o),f.clearGroups(),f}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",n),a}var Wt=Uint8Array,bn=Uint16Array,ja=Uint32Array,af=new Wt([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),lf=new Wt([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Ah=new Wt([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),uf=function(a,n){for(var i=new bn(31),u=0;u<31;++u)i[u]=n+=1<<a[u-1];for(var o=new ja(i[30]),u=1;u<30;++u)for(var f=i[u];f<i[u+1];++f)o[f]=f-i[u]<<5|u;return[i,o]},cf=uf(af,2),ff=cf[0],gh=cf[1];ff[28]=258,gh[258]=28;var vh=uf(lf,0),Bh=vh[0],Ja=new bn(32768);for(var Ye=0;Ye<32768;++Ye){var Pn=(Ye&43690)>>>1|(Ye&21845)<<1;Pn=(Pn&52428)>>>2|(Pn&13107)<<2,Pn=(Pn&61680)>>>4|(Pn&3855)<<4,Ja[Ye]=((Pn&65280)>>>8|(Pn&255)<<8)>>>1}var vi=function(a,n,i){for(var u=a.length,o=0,f=new bn(n);o<u;++o)++f[a[o]-1];var c=new bn(n);for(o=0;o<n;++o)c[o]=c[o-1]+f[o-1]<<1;var h;if(i){h=new bn(1<<n);var p=15-n;for(o=0;o<u;++o)if(a[o])for(var v=o<<4|a[o],A=n-a[o],m=c[a[o]-1]++<<A,B=m|(1<<A)-1;m<=B;++m)h[Ja[m]>>>p]=v}else for(h=new bn(u),o=0;o<u;++o)a[o]&&(h[o]=Ja[c[a[o]-1]++]>>>15-a[o]);return h},Ei=new Wt(288);for(var Ye=0;Ye<144;++Ye)Ei[Ye]=8;for(var Ye=144;Ye<256;++Ye)Ei[Ye]=9;for(var Ye=256;Ye<280;++Ye)Ei[Ye]=7;for(var Ye=280;Ye<288;++Ye)Ei[Ye]=8;var df=new Wt(32);for(var Ye=0;Ye<32;++Ye)df[Ye]=5;var Ch=vi(Ei,9,1),yh=vi(df,5,1),xa=function(a){for(var n=a[0],i=1;i<a.length;++i)a[i]>n&&(n=a[i]);return n},tn=function(a,n,i){var u=n/8|0;return(a[u]|a[u+1]<<8)>>(n&7)&i},Ia=function(a,n){var i=n/8|0;return(a[i]|a[i+1]<<8|a[i+2]<<16)>>(n&7)},Eh=function(a){return(a/8|0)+(a&7&&1)},wh=function(a,n,i){(i==null||i>a.length)&&(i=a.length);var u=new(a instanceof bn?bn:a instanceof ja?ja:Wt)(i-n);return u.set(a.subarray(n,i)),u},Sh=function(a,n,i){var u=a.length;if(!u||i&&!i.l&&u<5)return n||new Wt(0);var o=!n||i,f=!i||i.i;i||(i={}),n||(n=new Wt(u*3));var c=function(Te){var mt=n.length;if(Te>mt){var Vt=new Wt(Math.max(mt*2,Te));Vt.set(n),n=Vt}},h=i.f||0,p=i.p||0,v=i.b||0,A=i.l,m=i.d,B=i.m,y=i.n,w=u*8;do{if(!A){i.f=h=tn(a,p,1);var D=tn(a,p+1,3);if(p+=3,D)if(D==1)A=Ch,m=yh,B=9,y=5;else if(D==2){var O=tn(a,p,31)+257,Q=tn(a,p+10,15)+4,W=O+tn(a,p+5,31)+1;p+=14;for(var X=new Wt(W),K=new Wt(19),I=0;I<Q;++I)K[Ah[I]]=tn(a,p+I*3,7);p+=Q*3;for(var L=xa(K),G=(1<<L)-1,H=vi(K,L,1),I=0;I<W;){var z=H[tn(a,p,G)];p+=z&15;var F=z>>>4;if(F<16)X[I++]=F;else{var V=0,oe=0;for(F==16?(oe=3+tn(a,p,3),p+=2,V=X[I-1]):F==17?(oe=3+tn(a,p,7),p+=3):F==18&&(oe=11+tn(a,p,127),p+=7);oe--;)X[I++]=V}}var xe=X.subarray(0,O),ve=X.subarray(O);B=xa(xe),y=xa(ve),A=vi(xe,B,1),m=vi(ve,y,1)}else throw"invalid block type";else{var F=Eh(p)+4,x=a[F-4]|a[F-3]<<8,_=F+x;if(_>u){if(f)throw"unexpected EOF";break}o&&c(v+x),n.set(a.subarray(F,_),v),i.b=v+=x,i.p=p=_*8;continue}if(p>w){if(f)throw"unexpected EOF";break}}o&&c(v+131072);for(var tt=(1<<B)-1,te=(1<<y)-1,ce=p;;ce=p){var V=A[Ia(a,p)&tt],$=V>>>4;if(p+=V&15,p>w){if(f)throw"unexpected EOF";break}if(!V)throw"invalid length/literal";if($<256)n[v++]=$;else if($==256){ce=p,A=null;break}else{var me=$-254;if($>264){var I=$-257,Ae=af[I];me=tn(a,p,(1<<Ae)-1)+ff[I],p+=Ae}var Be=m[Ia(a,p)&te],We=Be>>>4;if(!Be)throw"invalid distance";p+=Be&15;var ve=Bh[We];if(We>3){var Ae=lf[We];ve+=Ia(a,p)&(1<<Ae)-1,p+=Ae}if(p>w){if(f)throw"unexpected EOF";break}o&&c(v+131072);for(var ct=v+me;v<ct;v+=4)n[v]=n[v-ve],n[v+1]=n[v+1-ve],n[v+2]=n[v+2-ve],n[v+3]=n[v+3-ve];v=ct}}i.l=A,i.p=ce,i.b=v,A&&(h=1,i.m=B,i.d=m,i.n=y)}while(!h);return v==n.length?n:wh(n,0,v)},Mh=new Wt(0),xh=function(a){if((a[0]&15)!=8||a[0]>>>4>7||(a[0]<<8|a[1])%31)throw"invalid zlib data";if(a[1]&32)throw"invalid zlib data: preset dictionaries not supported"};function Rs(a,n){return Sh((xh(a),a.subarray(2,-4)),n)}var Ih=typeof TextDecoder<"u"&&new TextDecoder,Rh=0;try{Ih.decode(Mh,{stream:!0}),Rh=1}catch{}const Fh=a=>a&&a.isCubeTexture;class Th extends Us{constructor(n,i){var u,o;const f=Fh(n),h=((o=f?(u=n.image[0])==null?void 0:u.width:n.image.width)!=null?o:1024)/4,p=Math.floor(Math.log2(h)),v=Math.pow(2,p),A=3*Math.max(v,16*7),m=4*v,B=[f?"#define ENVMAP_TYPE_CUBE":"",`#define CUBEUV_TEXEL_WIDTH ${1/A}`,`#define CUBEUV_TEXEL_HEIGHT ${1/m}`,`#define CUBEUV_MAX_MIP ${p}.0`],y=`
        varying vec3 vWorldPosition;
        void main() 
        {
            vec4 worldPosition = ( modelMatrix * vec4( position, 1.0 ) );
            vWorldPosition = worldPosition.xyz;
            
            gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
        }
        `,w=B.join(`
`)+`
        #define ENVMAP_TYPE_CUBE_UV
        varying vec3 vWorldPosition;
        uniform float radius;
        uniform float height;
        uniform float angle;
        #ifdef ENVMAP_TYPE_CUBE
            uniform samplerCube map;
        #else
            uniform sampler2D map;
        #endif
        // From: https://www.shadertoy.com/view/4tsBD7
        float diskIntersectWithBackFaceCulling( vec3 ro, vec3 rd, vec3 c, vec3 n, float r ) 
        {
            float d = dot ( rd, n );
            
            if( d > 0.0 ) { return 1e6; }
            
            vec3  o = ro - c;
            float t = - dot( n, o ) / d;
            vec3  q = o + rd * t;
            
            return ( dot( q, q ) < r * r ) ? t : 1e6;
        }
        // From: https://www.iquilezles.org/www/articles/intersectors/intersectors.htm
        float sphereIntersect( vec3 ro, vec3 rd, vec3 ce, float ra ) 
        {
            vec3 oc = ro - ce;
            float b = dot( oc, rd );
            float c = dot( oc, oc ) - ra * ra;
            float h = b * b - c;
            
            if( h < 0.0 ) { return -1.0; }
            
            h = sqrt( h );
            
            return - b + h;
        }
        vec3 project() 
        {
            vec3 p = normalize( vWorldPosition );
            vec3 camPos = cameraPosition;
            camPos.y -= height;
            float intersection = sphereIntersect( camPos, p, vec3( 0.0 ), radius );
            if( intersection > 0.0 ) {
                
                vec3 h = vec3( 0.0, - height, 0.0 );
                float intersection2 = diskIntersectWithBackFaceCulling( camPos, p, h, vec3( 0.0, 1.0, 0.0 ), radius );
                p = ( camPos + min( intersection, intersection2 ) * p ) / radius;
            } else {
                p = vec3( 0.0, 1.0, 0.0 );
            }
            return p;
        }
        #include <common>
        #include <cube_uv_reflection_fragment>
        void main() 
        {
            vec3 projectedWorldPosition = project();
            
            #ifdef ENVMAP_TYPE_CUBE
                vec3 outcolor = textureCube( map, projectedWorldPosition ).rgb;
            #else
                vec3 direction = normalize( projectedWorldPosition );
                vec2 uv = equirectUv( direction );
                vec3 outcolor = texture2D( map, uv ).rgb;
            #endif
            gl_FragColor = vec4( outcolor, 1.0 );
            #include <tonemapping_fragment>
            #include <${$a>=154?"colorspace_fragment":"encodings_fragment"}>
        }
        `,D={map:{value:n},height:{value:(i==null?void 0:i.height)||15},radius:{value:(i==null?void 0:i.radius)||100}},F=new wd(1,16),x=new Xa({uniforms:D,fragmentShader:w,vertexShader:y,side:xc});super(F,x)}set radius(n){this.material.uniforms.radius.value=n}get radius(){return this.material.uniforms.radius.value}set height(n){this.material.uniforms.height.value=n}get height(){return this.material.uniforms.height.value}}function Os(a){if(typeof TextDecoder<"u")return new TextDecoder().decode(a);let n="";for(let i=0,u=a.length;i<u;i++)n+=String.fromCharCode(a[i]);try{return decodeURIComponent(escape(n))}catch{return n}}const fr="srgb",Sn="srgb-linear",ac=3001,_h=3e3;class el extends Wa{constructor(n){super(n),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(i){return new Hh(i)}),this.register(function(i){return new kh(i)}),this.register(function(i){return new Qh(i)}),this.register(function(i){return new Xh(i)}),this.register(function(i){return new Wh(i)}),this.register(function(i){return new Nh(i)}),this.register(function(i){return new Uh(i)}),this.register(function(i){return new jh(i)}),this.register(function(i){return new Jh(i)}),this.register(function(i){return new Ph(i)}),this.register(function(i){return new bh(i)}),this.register(function(i){return new Oh(i)}),this.register(function(i){return new zh(i)}),this.register(function(i){return new Kh(i)}),this.register(function(i){return new Gh(i)}),this.register(function(i){return new Zh(i)}),this.register(function(i){return new Yh(i)})}load(n,i,u,o){const f=this;let c;if(this.resourcePath!=="")c=this.resourcePath;else if(this.path!==""){const v=Ai.extractUrlBase(n);c=Ai.resolveURL(v,this.path)}else c=Ai.extractUrlBase(n);this.manager.itemStart(n);const h=function(v){o?o(v):console.error(v),f.manager.itemError(n),f.manager.itemEnd(n)},p=new zn(this.manager);p.setPath(this.path),p.setResponseType("arraybuffer"),p.setRequestHeader(this.requestHeader),p.setWithCredentials(this.withCredentials),p.load(n,function(v){try{f.parse(v,c,function(A){i(A),f.manager.itemEnd(n)},h)}catch(A){h(A)}},u,h)}setDRACOLoader(n){return this.dracoLoader=n,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(n){return this.ktx2Loader=n,this}setMeshoptDecoder(n){return this.meshoptDecoder=n,this}register(n){return this.pluginCallbacks.indexOf(n)===-1&&this.pluginCallbacks.push(n),this}unregister(n){return this.pluginCallbacks.indexOf(n)!==-1&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(n),1),this}parse(n,i,u,o){let f;const c={},h={};if(typeof n=="string")f=JSON.parse(n);else if(n instanceof ArrayBuffer)if(Os(new Uint8Array(n.slice(0,4)))===pf){try{c[De.KHR_BINARY_GLTF]=new Vh(n)}catch(A){o&&o(A);return}f=JSON.parse(c[De.KHR_BINARY_GLTF].content)}else f=JSON.parse(Os(new Uint8Array(n)));else f=n;if(f.asset===void 0||f.asset.version[0]<2){o&&o(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));return}const p=new cm(f,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});p.fileLoader.setRequestHeader(this.requestHeader);for(let v=0;v<this.pluginCallbacks.length;v++){const A=this.pluginCallbacks[v](p);A.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),h[A.name]=A,c[A.name]=!0}if(f.extensionsUsed)for(let v=0;v<f.extensionsUsed.length;++v){const A=f.extensionsUsed[v],m=f.extensionsRequired||[];switch(A){case De.KHR_MATERIALS_UNLIT:c[A]=new Lh;break;case De.KHR_DRACO_MESH_COMPRESSION:c[A]=new qh(f,this.dracoLoader);break;case De.KHR_TEXTURE_TRANSFORM:c[A]=new $h;break;case De.KHR_MESH_QUANTIZATION:c[A]=new em;break;default:m.indexOf(A)>=0&&h[A]===void 0&&console.warn('THREE.GLTFLoader: Unknown extension "'+A+'".')}}p.setExtensions(c),p.setPlugins(h),p.parse(u,o)}parseAsync(n,i){const u=this;return new Promise(function(o,f){u.parse(n,i,o,f)})}}function Dh(){let a={};return{get:function(n){return a[n]},add:function(n,i){a[n]=i},remove:function(n){delete a[n]},removeAll:function(){a={}}}}const De={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class Gh{constructor(n){this.parser=n,this.name=De.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const n=this.parser,i=this.parser.json.nodes||[];for(let u=0,o=i.length;u<o;u++){const f=i[u];f.extensions&&f.extensions[this.name]&&f.extensions[this.name].light!==void 0&&n._addNodeRef(this.cache,f.extensions[this.name].light)}}_loadLight(n){const i=this.parser,u="light:"+n;let o=i.cache.get(u);if(o)return o;const f=i.json,p=((f.extensions&&f.extensions[this.name]||{}).lights||[])[n];let v;const A=new dr(16777215);p.color!==void 0&&A.setRGB(p.color[0],p.color[1],p.color[2],Sn);const m=p.range!==void 0?p.range:0;switch(p.type){case"directional":v=new xd(A),v.target.position.set(0,0,-1),v.add(v.target);break;case"point":v=new Md(A),v.distance=m;break;case"spot":v=new Sd(A),v.distance=m,p.spot=p.spot||{},p.spot.innerConeAngle=p.spot.innerConeAngle!==void 0?p.spot.innerConeAngle:0,p.spot.outerConeAngle=p.spot.outerConeAngle!==void 0?p.spot.outerConeAngle:Math.PI/4,v.angle=p.spot.outerConeAngle,v.penumbra=1-p.spot.innerConeAngle/p.spot.outerConeAngle,v.target.position.set(0,0,-1),v.add(v.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+p.type)}return v.position.set(0,0,0),v.decay=2,yn(v,p),p.intensity!==void 0&&(v.intensity=p.intensity),v.name=i.createUniqueName(p.name||"light_"+n),o=Promise.resolve(v),i.cache.add(u,o),o}getDependency(n,i){if(n==="light")return this._loadLight(i)}createNodeAttachment(n){const i=this,u=this.parser,f=u.json.nodes[n],h=(f.extensions&&f.extensions[this.name]||{}).light;return h===void 0?null:this._loadLight(h).then(function(p){return u._getNodeRef(i.cache,h,p)})}}class Lh{constructor(){this.name=De.KHR_MATERIALS_UNLIT}getMaterialType(){return Lr}extendParams(n,i,u){const o=[];n.color=new dr(1,1,1),n.opacity=1;const f=i.pbrMetallicRoughness;if(f){if(Array.isArray(f.baseColorFactor)){const c=f.baseColorFactor;n.color.setRGB(c[0],c[1],c[2],Sn),n.opacity=c[3]}f.baseColorTexture!==void 0&&o.push(u.assignTexture(n,"map",f.baseColorTexture,fr))}return Promise.all(o)}}class Ph{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(n,i){const o=this.parser.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=o.extensions[this.name].emissiveStrength;return f!==void 0&&(i.emissiveIntensity=f),Promise.resolve()}}class Hh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_CLEARCOAT}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];if(c.clearcoatFactor!==void 0&&(i.clearcoat=c.clearcoatFactor),c.clearcoatTexture!==void 0&&f.push(u.assignTexture(i,"clearcoatMap",c.clearcoatTexture)),c.clearcoatRoughnessFactor!==void 0&&(i.clearcoatRoughness=c.clearcoatRoughnessFactor),c.clearcoatRoughnessTexture!==void 0&&f.push(u.assignTexture(i,"clearcoatRoughnessMap",c.clearcoatRoughnessTexture)),c.clearcoatNormalTexture!==void 0&&(f.push(u.assignTexture(i,"clearcoatNormalMap",c.clearcoatNormalTexture)),c.clearcoatNormalTexture.scale!==void 0)){const h=c.clearcoatNormalTexture.scale;i.clearcoatNormalScale=new Ns(h,h)}return Promise.all(f)}}class kh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_DISPERSION}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const o=this.parser.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=o.extensions[this.name];return i.dispersion=f.dispersion!==void 0?f.dispersion:0,Promise.resolve()}}class Oh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_IRIDESCENCE}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];return c.iridescenceFactor!==void 0&&(i.iridescence=c.iridescenceFactor),c.iridescenceTexture!==void 0&&f.push(u.assignTexture(i,"iridescenceMap",c.iridescenceTexture)),c.iridescenceIor!==void 0&&(i.iridescenceIOR=c.iridescenceIor),i.iridescenceThicknessRange===void 0&&(i.iridescenceThicknessRange=[100,400]),c.iridescenceThicknessMinimum!==void 0&&(i.iridescenceThicknessRange[0]=c.iridescenceThicknessMinimum),c.iridescenceThicknessMaximum!==void 0&&(i.iridescenceThicknessRange[1]=c.iridescenceThicknessMaximum),c.iridescenceThicknessTexture!==void 0&&f.push(u.assignTexture(i,"iridescenceThicknessMap",c.iridescenceThicknessTexture)),Promise.all(f)}}class Nh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_SHEEN}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[];i.sheenColor=new dr(0,0,0),i.sheenRoughness=0,i.sheen=1;const c=o.extensions[this.name];if(c.sheenColorFactor!==void 0){const h=c.sheenColorFactor;i.sheenColor.setRGB(h[0],h[1],h[2],Sn)}return c.sheenRoughnessFactor!==void 0&&(i.sheenRoughness=c.sheenRoughnessFactor),c.sheenColorTexture!==void 0&&f.push(u.assignTexture(i,"sheenColorMap",c.sheenColorTexture,fr)),c.sheenRoughnessTexture!==void 0&&f.push(u.assignTexture(i,"sheenRoughnessMap",c.sheenRoughnessTexture)),Promise.all(f)}}class Uh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_TRANSMISSION}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];return c.transmissionFactor!==void 0&&(i.transmission=c.transmissionFactor),c.transmissionTexture!==void 0&&f.push(u.assignTexture(i,"transmissionMap",c.transmissionTexture)),Promise.all(f)}}class jh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_VOLUME}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];i.thickness=c.thicknessFactor!==void 0?c.thicknessFactor:0,c.thicknessTexture!==void 0&&f.push(u.assignTexture(i,"thicknessMap",c.thicknessTexture)),i.attenuationDistance=c.attenuationDistance||1/0;const h=c.attenuationColor||[1,1,1];return i.attenuationColor=new dr().setRGB(h[0],h[1],h[2],Sn),Promise.all(f)}}class Jh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_IOR}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const o=this.parser.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=o.extensions[this.name];return i.ior=f.ior!==void 0?f.ior:1.5,Promise.resolve()}}class bh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_SPECULAR}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];i.specularIntensity=c.specularFactor!==void 0?c.specularFactor:1,c.specularTexture!==void 0&&f.push(u.assignTexture(i,"specularIntensityMap",c.specularTexture));const h=c.specularColorFactor||[1,1,1];return i.specularColor=new dr().setRGB(h[0],h[1],h[2],Sn),c.specularColorTexture!==void 0&&f.push(u.assignTexture(i,"specularColorMap",c.specularColorTexture,fr)),Promise.all(f)}}class Kh{constructor(n){this.parser=n,this.name=De.EXT_MATERIALS_BUMP}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];return i.bumpScale=c.bumpFactor!==void 0?c.bumpFactor:1,c.bumpTexture!==void 0&&f.push(u.assignTexture(i,"bumpMap",c.bumpTexture)),Promise.all(f)}}class zh{constructor(n){this.parser=n,this.name=De.KHR_MATERIALS_ANISOTROPY}getMaterialType(n){const u=this.parser.json.materials[n];return!u.extensions||!u.extensions[this.name]?null:dn}extendMaterialParams(n,i){const u=this.parser,o=u.json.materials[n];if(!o.extensions||!o.extensions[this.name])return Promise.resolve();const f=[],c=o.extensions[this.name];return c.anisotropyStrength!==void 0&&(i.anisotropy=c.anisotropyStrength),c.anisotropyRotation!==void 0&&(i.anisotropyRotation=c.anisotropyRotation),c.anisotropyTexture!==void 0&&f.push(u.assignTexture(i,"anisotropyMap",c.anisotropyTexture)),Promise.all(f)}}class Qh{constructor(n){this.parser=n,this.name=De.KHR_TEXTURE_BASISU}loadTexture(n){const i=this.parser,u=i.json,o=u.textures[n];if(!o.extensions||!o.extensions[this.name])return null;const f=o.extensions[this.name],c=i.options.ktx2Loader;if(!c){if(u.extensionsRequired&&u.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return i.loadTextureImage(n,f.source,c)}}class Xh{constructor(n){this.parser=n,this.name=De.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(n){const i=this.name,u=this.parser,o=u.json,f=o.textures[n];if(!f.extensions||!f.extensions[i])return null;const c=f.extensions[i],h=o.images[c.source];let p=u.textureLoader;if(h.uri){const v=u.options.manager.getHandler(h.uri);v!==null&&(p=v)}return this.detectSupport().then(function(v){if(v)return u.loadTextureImage(n,c.source,p);if(o.extensionsRequired&&o.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return u.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const i=new Image;i.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",i.onload=i.onerror=function(){n(i.height===1)}})),this.isSupported}}class Wh{constructor(n){this.parser=n,this.name=De.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(n){const i=this.name,u=this.parser,o=u.json,f=o.textures[n];if(!f.extensions||!f.extensions[i])return null;const c=f.extensions[i],h=o.images[c.source];let p=u.textureLoader;if(h.uri){const v=u.options.manager.getHandler(h.uri);v!==null&&(p=v)}return this.detectSupport().then(function(v){if(v)return u.loadTextureImage(n,c.source,p);if(o.extensionsRequired&&o.extensionsRequired.indexOf(i)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return u.loadTexture(n)})}detectSupport(){return this.isSupported||(this.isSupported=new Promise(function(n){const i=new Image;i.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",i.onload=i.onerror=function(){n(i.height===1)}})),this.isSupported}}class Zh{constructor(n){this.name=De.EXT_MESHOPT_COMPRESSION,this.parser=n}loadBufferView(n){const i=this.parser.json,u=i.bufferViews[n];if(u.extensions&&u.extensions[this.name]){const o=u.extensions[this.name],f=this.parser.getDependency("buffer",o.buffer),c=this.parser.options.meshoptDecoder;if(!c||!c.supported){if(i.extensionsRequired&&i.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return f.then(function(h){const p=o.byteOffset||0,v=o.byteLength||0,A=o.count,m=o.byteStride,B=new Uint8Array(h,p,v);return c.decodeGltfBufferAsync?c.decodeGltfBufferAsync(A,m,B,o.mode,o.filter).then(function(y){return y.buffer}):c.ready.then(function(){const y=new ArrayBuffer(A*m);return c.decodeGltfBuffer(new Uint8Array(y),A,m,B,o.mode,o.filter),y})})}else return null}}class Yh{constructor(n){this.name=De.EXT_MESH_GPU_INSTANCING,this.parser=n}createNodeMesh(n){const i=this.parser.json,u=i.nodes[n];if(!u.extensions||!u.extensions[this.name]||u.mesh===void 0)return null;const o=i.meshes[u.mesh];for(const v of o.primitives)if(v.mode!==Xt.TRIANGLES&&v.mode!==Xt.TRIANGLE_STRIP&&v.mode!==Xt.TRIANGLE_FAN&&v.mode!==void 0)return null;const c=u.extensions[this.name].attributes,h=[],p={};for(const v in c)h.push(this.parser.getDependency("accessor",c[v]).then(A=>(p[v]=A,p[v])));return h.length<1?null:(h.push(this.parser.createNodeMesh(n)),Promise.all(h).then(v=>{const A=v.pop(),m=A.isGroup?A.children:[A],B=v[0].count,y=[];for(const w of m){const D=new Hs,F=new Ze,x=new Ic,_=new Ze(1,1,1),O=new Id(w.geometry,w.material,B);for(let Q=0;Q<B;Q++)p.TRANSLATION&&F.fromBufferAttribute(p.TRANSLATION,Q),p.ROTATION&&x.fromBufferAttribute(p.ROTATION,Q),p.SCALE&&_.fromBufferAttribute(p.SCALE,Q),O.setMatrixAt(Q,D.compose(F,x,_));for(const Q in p)if(Q==="_COLOR_0"){const W=p[Q];O.instanceColor=new Rd(W.array,W.itemSize,W.normalized)}else Q!=="TRANSLATION"&&Q!=="ROTATION"&&Q!=="SCALE"&&w.geometry.setAttribute(Q,p[Q]);Rc.prototype.copy.call(O,w),this.parser.assignFinalMaterial(O),y.push(O)}return A.isGroup?(A.clear(),A.add(...y),A):y[0]}))}}const pf="glTF",pi=12,lc={JSON:1313821514,BIN:5130562};class Vh{constructor(n){this.name=De.KHR_BINARY_GLTF,this.content=null,this.body=null;const i=new DataView(n,0,pi);if(this.header={magic:Os(new Uint8Array(n.slice(0,4))),version:i.getUint32(4,!0),length:i.getUint32(8,!0)},this.header.magic!==pf)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const u=this.header.length-pi,o=new DataView(n,pi);let f=0;for(;f<u;){const c=o.getUint32(f,!0);f+=4;const h=o.getUint32(f,!0);if(f+=4,h===lc.JSON){const p=new Uint8Array(n,pi+f,c);this.content=Os(p)}else if(h===lc.BIN){const p=pi+f;this.body=n.slice(p,p+c)}f+=c}if(this.content===null)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class qh{constructor(n,i){if(!i)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=De.KHR_DRACO_MESH_COMPRESSION,this.json=n,this.dracoLoader=i,this.dracoLoader.preload()}decodePrimitive(n,i){const u=this.json,o=this.dracoLoader,f=n.extensions[this.name].bufferView,c=n.extensions[this.name].attributes,h={},p={},v={};for(const A in c){const m=ba[A]||A.toLowerCase();h[m]=c[A]}for(const A in n.attributes){const m=ba[A]||A.toLowerCase();if(c[A]!==void 0){const B=u.accessors[n.attributes[A]],y=Or[B.componentType];v[m]=y.name,p[m]=B.normalized===!0}}return i.getDependency("bufferView",f).then(function(A){return new Promise(function(m,B){o.decodeDracoFile(A,function(y){for(const w in y.attributes){const D=y.attributes[w],F=p[w];F!==void 0&&(D.normalized=F)}m(y)},h,v,Sn,B)})})}}class $h{constructor(){this.name=De.KHR_TEXTURE_TRANSFORM}extendTexture(n,i){return(i.texCoord===void 0||i.texCoord===n.channel)&&i.offset===void 0&&i.rotation===void 0&&i.scale===void 0||(n=n.clone(),i.texCoord!==void 0&&(n.channel=i.texCoord),i.offset!==void 0&&n.offset.fromArray(i.offset),i.rotation!==void 0&&(n.rotation=i.rotation),i.scale!==void 0&&n.repeat.fromArray(i.scale),n.needsUpdate=!0),n}}class em{constructor(){this.name=De.KHR_MESH_QUANTIZATION}}class hf extends qd{constructor(n,i,u,o){super(n,i,u,o)}copySampleValue_(n){const i=this.resultBuffer,u=this.sampleValues,o=this.valueSize,f=n*o*3+o;for(let c=0;c!==o;c++)i[c]=u[f+c];return i}interpolate_(n,i,u,o){const f=this.resultBuffer,c=this.sampleValues,h=this.valueSize,p=h*2,v=h*3,A=o-i,m=(u-i)/A,B=m*m,y=B*m,w=n*v,D=w-v,F=-2*y+3*B,x=y-B,_=1-F,O=x-B+m;for(let Q=0;Q!==h;Q++){const W=c[D+Q+h],X=c[D+Q+p]*A,K=c[w+Q+h],I=c[w+Q]*A;f[Q]=_*W+O*X+F*K+x*I}return f}}const tm=new Ic;class nm extends hf{interpolate_(n,i,u,o){const f=super.interpolate_(n,i,u,o);return tm.fromArray(f).normalize().toArray(f),f}}const Xt={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Or={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},uc={9728:Pd,9729:Zt,9984:Ld,9985:Gd,9986:Dd,9987:Fc},cc={33071:En,33648:Hd,10497:La},Ra={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ba={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",...$a>=152?{TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3"}:{TEXCOORD_0:"uv",TEXCOORD_1:"uv2"},COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},Hn={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},rm={CUBICSPLINE:void 0,LINEAR:_c,STEP:Zd},Fa={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};function im(a){return a.DefaultMaterial===void 0&&(a.DefaultMaterial=new je({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:Vd})),a.DefaultMaterial}function lr(a,n,i){for(const u in i.extensions)a[u]===void 0&&(n.userData.gltfExtensions=n.userData.gltfExtensions||{},n.userData.gltfExtensions[u]=i.extensions[u])}function yn(a,n){n.extras!==void 0&&(typeof n.extras=="object"?Object.assign(a.userData,n.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+n.extras))}function sm(a,n,i){let u=!1,o=!1,f=!1;for(let v=0,A=n.length;v<A;v++){const m=n[v];if(m.POSITION!==void 0&&(u=!0),m.NORMAL!==void 0&&(o=!0),m.COLOR_0!==void 0&&(f=!0),u&&o&&f)break}if(!u&&!o&&!f)return Promise.resolve(a);const c=[],h=[],p=[];for(let v=0,A=n.length;v<A;v++){const m=n[v];if(u){const B=m.POSITION!==void 0?i.getDependency("accessor",m.POSITION):a.attributes.position;c.push(B)}if(o){const B=m.NORMAL!==void 0?i.getDependency("accessor",m.NORMAL):a.attributes.normal;h.push(B)}if(f){const B=m.COLOR_0!==void 0?i.getDependency("accessor",m.COLOR_0):a.attributes.color;p.push(B)}}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(p)]).then(function(v){const A=v[0],m=v[1],B=v[2];return u&&(a.morphAttributes.position=A),o&&(a.morphAttributes.normal=m),f&&(a.morphAttributes.color=B),a.morphTargetsRelative=!0,a})}function om(a,n){if(a.updateMorphTargets(),n.weights!==void 0)for(let i=0,u=n.weights.length;i<u;i++)a.morphTargetInfluences[i]=n.weights[i];if(n.extras&&Array.isArray(n.extras.targetNames)){const i=n.extras.targetNames;if(a.morphTargetInfluences.length===i.length){a.morphTargetDictionary={};for(let u=0,o=i.length;u<o;u++)a.morphTargetDictionary[i[u]]=u}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function am(a){let n;const i=a.extensions&&a.extensions[De.KHR_DRACO_MESH_COMPRESSION];if(i?n="draco:"+i.bufferView+":"+i.indices+":"+Ta(i.attributes):n=a.indices+":"+Ta(a.attributes)+":"+a.mode,a.targets!==void 0)for(let u=0,o=a.targets.length;u<o;u++)n+=":"+Ta(a.targets[u]);return n}function Ta(a){let n="";const i=Object.keys(a).sort();for(let u=0,o=i.length;u<o;u++)n+=i[u]+":"+a[i[u]]+";";return n}function Ka(a){switch(a){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}function lm(a){return a.search(/\.jpe?g($|\?)/i)>0||a.search(/^data\:image\/jpeg/)===0?"image/jpeg":a.search(/\.webp($|\?)/i)>0||a.search(/^data\:image\/webp/)===0?"image/webp":"image/png"}const um=new Hs;class cm{constructor(n={},i={}){this.json=n,this.extensions={},this.plugins={},this.options=i,this.cache=new Dh,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let u=!1,o=!1,f=-1;typeof navigator<"u"&&typeof navigator.userAgent<"u"&&(u=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)===!0,o=navigator.userAgent.indexOf("Firefox")>-1,f=o?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),typeof createImageBitmap>"u"||u||o&&f<98?this.textureLoader=new Fd(this.options.manager):this.textureLoader=new Td(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new zn(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),this.options.crossOrigin==="use-credentials"&&this.fileLoader.setWithCredentials(!0)}setExtensions(n){this.extensions=n}setPlugins(n){this.plugins=n}parse(n,i){const u=this,o=this.json,f=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll(function(c){return c._markDefs&&c._markDefs()}),Promise.all(this._invokeAll(function(c){return c.beforeRoot&&c.beforeRoot()})).then(function(){return Promise.all([u.getDependencies("scene"),u.getDependencies("animation"),u.getDependencies("camera")])}).then(function(c){const h={scene:c[0][o.scene||0],scenes:c[0],animations:c[1],cameras:c[2],asset:o.asset,parser:u,userData:{}};return lr(f,h,o),yn(h,o),Promise.all(u._invokeAll(function(p){return p.afterRoot&&p.afterRoot(h)})).then(function(){for(const p of h.scenes)p.updateMatrixWorld();n(h)})}).catch(i)}_markDefs(){const n=this.json.nodes||[],i=this.json.skins||[],u=this.json.meshes||[];for(let o=0,f=i.length;o<f;o++){const c=i[o].joints;for(let h=0,p=c.length;h<p;h++)n[c[h]].isBone=!0}for(let o=0,f=n.length;o<f;o++){const c=n[o];c.mesh!==void 0&&(this._addNodeRef(this.meshCache,c.mesh),c.skin!==void 0&&(u[c.mesh].isSkinnedMesh=!0)),c.camera!==void 0&&this._addNodeRef(this.cameraCache,c.camera)}}_addNodeRef(n,i){i!==void 0&&(n.refs[i]===void 0&&(n.refs[i]=n.uses[i]=0),n.refs[i]++)}_getNodeRef(n,i,u){if(n.refs[i]<=1)return u;const o=u.clone(),f=(c,h)=>{const p=this.associations.get(c);p!=null&&this.associations.set(h,p);for(const[v,A]of c.children.entries())f(A,h.children[v])};return f(u,o),o.name+="_instance_"+n.uses[i]++,o}_invokeOne(n){const i=Object.values(this.plugins);i.push(this);for(let u=0;u<i.length;u++){const o=n(i[u]);if(o)return o}return null}_invokeAll(n){const i=Object.values(this.plugins);i.unshift(this);const u=[];for(let o=0;o<i.length;o++){const f=n(i[o]);f&&u.push(f)}return u}getDependency(n,i){const u=n+":"+i;let o=this.cache.get(u);if(!o){switch(n){case"scene":o=this.loadScene(i);break;case"node":o=this._invokeOne(function(f){return f.loadNode&&f.loadNode(i)});break;case"mesh":o=this._invokeOne(function(f){return f.loadMesh&&f.loadMesh(i)});break;case"accessor":o=this.loadAccessor(i);break;case"bufferView":o=this._invokeOne(function(f){return f.loadBufferView&&f.loadBufferView(i)});break;case"buffer":o=this.loadBuffer(i);break;case"material":o=this._invokeOne(function(f){return f.loadMaterial&&f.loadMaterial(i)});break;case"texture":o=this._invokeOne(function(f){return f.loadTexture&&f.loadTexture(i)});break;case"skin":o=this.loadSkin(i);break;case"animation":o=this._invokeOne(function(f){return f.loadAnimation&&f.loadAnimation(i)});break;case"camera":o=this.loadCamera(i);break;default:if(o=this._invokeOne(function(f){return f!=this&&f.getDependency&&f.getDependency(n,i)}),!o)throw new Error("Unknown type: "+n);break}this.cache.add(u,o)}return o}getDependencies(n){let i=this.cache.get(n);if(!i){const u=this,o=this.json[n+(n==="mesh"?"es":"s")]||[];i=Promise.all(o.map(function(f,c){return u.getDependency(n,c)})),this.cache.add(n,i)}return i}loadBuffer(n){const i=this.json.buffers[n],u=this.fileLoader;if(i.type&&i.type!=="arraybuffer")throw new Error("THREE.GLTFLoader: "+i.type+" buffer type is not supported.");if(i.uri===void 0&&n===0)return Promise.resolve(this.extensions[De.KHR_BINARY_GLTF].body);const o=this.options;return new Promise(function(f,c){u.load(Ai.resolveURL(i.uri,o.path),f,void 0,function(){c(new Error('THREE.GLTFLoader: Failed to load buffer "'+i.uri+'".'))})})}loadBufferView(n){const i=this.json.bufferViews[n];return this.getDependency("buffer",i.buffer).then(function(u){const o=i.byteLength||0,f=i.byteOffset||0;return u.slice(f,f+o)})}loadAccessor(n){const i=this,u=this.json,o=this.json.accessors[n];if(o.bufferView===void 0&&o.sparse===void 0){const c=Ra[o.type],h=Or[o.componentType],p=o.normalized===!0,v=new h(o.count*c);return Promise.resolve(new gi(v,c,p))}const f=[];return o.bufferView!==void 0?f.push(this.getDependency("bufferView",o.bufferView)):f.push(null),o.sparse!==void 0&&(f.push(this.getDependency("bufferView",o.sparse.indices.bufferView)),f.push(this.getDependency("bufferView",o.sparse.values.bufferView))),Promise.all(f).then(function(c){const h=c[0],p=Ra[o.type],v=Or[o.componentType],A=v.BYTES_PER_ELEMENT,m=A*p,B=o.byteOffset||0,y=o.bufferView!==void 0?u.bufferViews[o.bufferView].byteStride:void 0,w=o.normalized===!0;let D,F;if(y&&y!==m){const x=Math.floor(B/y),_="InterleavedBuffer:"+o.bufferView+":"+o.componentType+":"+x+":"+o.count;let O=i.cache.get(_);O||(D=new v(h,x*y,o.count*y/A),O=new _d(D,y/A),i.cache.add(_,O)),F=new Yd(O,p,B%y/A,w)}else h===null?D=new v(o.count*p):D=new v(h,B,o.count*p),F=new gi(D,p,w);if(o.sparse!==void 0){const x=Ra.SCALAR,_=Or[o.sparse.indices.componentType],O=o.sparse.indices.byteOffset||0,Q=o.sparse.values.byteOffset||0,W=new _(c[1],O,o.sparse.count*x),X=new v(c[2],Q,o.sparse.count*p);h!==null&&(F=new gi(F.array.slice(),F.itemSize,F.normalized));for(let K=0,I=W.length;K<I;K++){const L=W[K];if(F.setX(L,X[K*p]),p>=2&&F.setY(L,X[K*p+1]),p>=3&&F.setZ(L,X[K*p+2]),p>=4&&F.setW(L,X[K*p+3]),p>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return F})}loadTexture(n){const i=this.json,u=this.options,f=i.textures[n].source,c=i.images[f];let h=this.textureLoader;if(c.uri){const p=u.manager.getHandler(c.uri);p!==null&&(h=p)}return this.loadTextureImage(n,f,h)}loadTextureImage(n,i,u){const o=this,f=this.json,c=f.textures[n],h=f.images[i],p=(h.uri||h.bufferView)+":"+c.sampler;if(this.textureCache[p])return this.textureCache[p];const v=this.loadImageSource(i,u).then(function(A){A.flipY=!1,A.name=c.name||h.name||"",A.name===""&&typeof h.uri=="string"&&h.uri.startsWith("data:image/")===!1&&(A.name=h.uri);const B=(f.samplers||{})[c.sampler]||{};return A.magFilter=uc[B.magFilter]||Zt,A.minFilter=uc[B.minFilter]||Fc,A.wrapS=cc[B.wrapS]||La,A.wrapT=cc[B.wrapT]||La,o.associations.set(A,{textures:n}),A}).catch(function(){return null});return this.textureCache[p]=v,v}loadImageSource(n,i){const u=this,o=this.json,f=this.options;if(this.sourceCache[n]!==void 0)return this.sourceCache[n].then(m=>m.clone());const c=o.images[n],h=self.URL||self.webkitURL;let p=c.uri||"",v=!1;if(c.bufferView!==void 0)p=u.getDependency("bufferView",c.bufferView).then(function(m){v=!0;const B=new Blob([m],{type:c.mimeType});return p=h.createObjectURL(B),p});else if(c.uri===void 0)throw new Error("THREE.GLTFLoader: Image "+n+" is missing URI and bufferView");const A=Promise.resolve(p).then(function(m){return new Promise(function(B,y){let w=B;i.isImageBitmapLoader===!0&&(w=function(D){const F=new Jn(D);F.needsUpdate=!0,B(F)}),i.load(Ai.resolveURL(m,f.path),w,void 0,y)})}).then(function(m){return v===!0&&h.revokeObjectURL(p),yn(m,c),m.userData.mimeType=c.mimeType||lm(c.uri),m}).catch(function(m){throw console.error("THREE.GLTFLoader: Couldn't load texture",p),m});return this.sourceCache[n]=A,A}assignTexture(n,i,u,o){const f=this;return this.getDependency("texture",u.index).then(function(c){if(!c)return null;if(u.texCoord!==void 0&&u.texCoord>0&&(c=c.clone(),c.channel=u.texCoord),f.extensions[De.KHR_TEXTURE_TRANSFORM]){const h=u.extensions!==void 0?u.extensions[De.KHR_TEXTURE_TRANSFORM]:void 0;if(h){const p=f.associations.get(c);c=f.extensions[De.KHR_TEXTURE_TRANSFORM].extendTexture(c,h),f.associations.set(c,p)}}return o!==void 0&&(typeof o=="number"&&(o=o===ac?fr:Sn),"colorSpace"in c?c.colorSpace=o:c.encoding=o===fr?ac:_h),n[i]=c,c})}assignFinalMaterial(n){const i=n.geometry;let u=n.material;const o=i.attributes.tangent===void 0,f=i.attributes.color!==void 0,c=i.attributes.normal===void 0;if(n.isPoints){const h="PointsMaterial:"+u.uuid;let p=this.cache.get(h);p||(p=new kd,Aa.prototype.copy.call(p,u),p.color.copy(u.color),p.map=u.map,p.sizeAttenuation=!1,this.cache.add(h,p)),u=p}else if(n.isLine){const h="LineBasicMaterial:"+u.uuid;let p=this.cache.get(h);p||(p=new Od,Aa.prototype.copy.call(p,u),p.color.copy(u.color),p.map=u.map,this.cache.add(h,p)),u=p}if(o||f||c){let h="ClonedMaterial:"+u.uuid+":";o&&(h+="derivative-tangents:"),f&&(h+="vertex-colors:"),c&&(h+="flat-shading:");let p=this.cache.get(h);p||(p=u.clone(),f&&(p.vertexColors=!0),c&&(p.flatShading=!0),o&&(p.normalScale&&(p.normalScale.y*=-1),p.clearcoatNormalScale&&(p.clearcoatNormalScale.y*=-1)),this.cache.add(h,p),this.associations.set(p,this.associations.get(u))),u=p}n.material=u}getMaterialType(){return je}loadMaterial(n){const i=this,u=this.json,o=this.extensions,f=u.materials[n];let c;const h={},p=f.extensions||{},v=[];if(p[De.KHR_MATERIALS_UNLIT]){const m=o[De.KHR_MATERIALS_UNLIT];c=m.getMaterialType(),v.push(m.extendParams(h,f,i))}else{const m=f.pbrMetallicRoughness||{};if(h.color=new dr(1,1,1),h.opacity=1,Array.isArray(m.baseColorFactor)){const B=m.baseColorFactor;h.color.setRGB(B[0],B[1],B[2],Sn),h.opacity=B[3]}m.baseColorTexture!==void 0&&v.push(i.assignTexture(h,"map",m.baseColorTexture,fr)),h.metalness=m.metallicFactor!==void 0?m.metallicFactor:1,h.roughness=m.roughnessFactor!==void 0?m.roughnessFactor:1,m.metallicRoughnessTexture!==void 0&&(v.push(i.assignTexture(h,"metalnessMap",m.metallicRoughnessTexture)),v.push(i.assignTexture(h,"roughnessMap",m.metallicRoughnessTexture))),c=this._invokeOne(function(B){return B.getMaterialType&&B.getMaterialType(n)}),v.push(Promise.all(this._invokeAll(function(B){return B.extendMaterialParams&&B.extendMaterialParams(n,h)})))}f.doubleSided===!0&&(h.side=xc);const A=f.alphaMode||Fa.OPAQUE;if(A===Fa.BLEND?(h.transparent=!0,h.depthWrite=!1):(h.transparent=!1,A===Fa.MASK&&(h.alphaTest=f.alphaCutoff!==void 0?f.alphaCutoff:.5)),f.normalTexture!==void 0&&c!==Lr&&(v.push(i.assignTexture(h,"normalMap",f.normalTexture)),h.normalScale=new Ns(1,1),f.normalTexture.scale!==void 0)){const m=f.normalTexture.scale;h.normalScale.set(m,m)}if(f.occlusionTexture!==void 0&&c!==Lr&&(v.push(i.assignTexture(h,"aoMap",f.occlusionTexture)),f.occlusionTexture.strength!==void 0&&(h.aoMapIntensity=f.occlusionTexture.strength)),f.emissiveFactor!==void 0&&c!==Lr){const m=f.emissiveFactor;h.emissive=new dr().setRGB(m[0],m[1],m[2],Sn)}return f.emissiveTexture!==void 0&&c!==Lr&&v.push(i.assignTexture(h,"emissiveMap",f.emissiveTexture,fr)),Promise.all(v).then(function(){const m=new c(h);return f.name&&(m.name=f.name),yn(m,f),i.associations.set(m,{materials:n}),f.extensions&&lr(o,m,f),m})}createUniqueName(n){const i=Nd.sanitizeNodeName(n||"");return i in this.nodeNamesUsed?i+"_"+ ++this.nodeNamesUsed[i]:(this.nodeNamesUsed[i]=0,i)}loadGeometries(n){const i=this,u=this.extensions,o=this.primitiveCache;function f(h){return u[De.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(h,i).then(function(p){return fc(p,h,i)})}const c=[];for(let h=0,p=n.length;h<p;h++){const v=n[h],A=am(v),m=o[A];if(m)c.push(m.promise);else{let B;v.extensions&&v.extensions[De.KHR_DRACO_MESH_COMPRESSION]?B=f(v):B=fc(new Tc,v,i),o[A]={primitive:v,promise:B},c.push(B)}}return Promise.all(c)}loadMesh(n){const i=this,u=this.json,o=this.extensions,f=u.meshes[n],c=f.primitives,h=[];for(let p=0,v=c.length;p<v;p++){const A=c[p].material===void 0?im(this.cache):this.getDependency("material",c[p].material);h.push(A)}return h.push(i.loadGeometries(c)),Promise.all(h).then(function(p){const v=p.slice(0,p.length-1),A=p[p.length-1],m=[];for(let y=0,w=A.length;y<w;y++){const D=A[y],F=c[y];let x;const _=v[y];if(F.mode===Xt.TRIANGLES||F.mode===Xt.TRIANGLE_STRIP||F.mode===Xt.TRIANGLE_FAN||F.mode===void 0)x=f.isSkinnedMesh===!0?new Ud(D,_):new Us(D,_),x.isSkinnedMesh===!0&&x.normalizeSkinWeights(),F.mode===Xt.TRIANGLE_STRIP?x.geometry=oc(x.geometry,Mc):F.mode===Xt.TRIANGLE_FAN&&(x.geometry=oc(x.geometry,Ga));else if(F.mode===Xt.LINES)x=new jd(D,_);else if(F.mode===Xt.LINE_STRIP)x=new Jd(D,_);else if(F.mode===Xt.LINE_LOOP)x=new bd(D,_);else if(F.mode===Xt.POINTS)x=new Kd(D,_);else throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+F.mode);Object.keys(x.geometry.morphAttributes).length>0&&om(x,f),x.name=i.createUniqueName(f.name||"mesh_"+n),yn(x,f),F.extensions&&lr(o,x,F),i.assignFinalMaterial(x),m.push(x)}for(let y=0,w=m.length;y<w;y++)i.associations.set(m[y],{meshes:n,primitives:y});if(m.length===1)return f.extensions&&lr(o,m[0],f),m[0];const B=new ga;f.extensions&&lr(o,B,f),i.associations.set(B,{meshes:n});for(let y=0,w=m.length;y<w;y++)B.add(m[y]);return B})}loadCamera(n){let i;const u=this.json.cameras[n],o=u[u.type];if(!o){console.warn("THREE.GLTFLoader: Missing camera parameters.");return}return u.type==="perspective"?i=new wc(zd.radToDeg(o.yfov),o.aspectRatio||1,o.znear||1,o.zfar||2e6):u.type==="orthographic"&&(i=new za(-o.xmag,o.xmag,o.ymag,-o.ymag,o.znear,o.zfar)),u.name&&(i.name=this.createUniqueName(u.name)),yn(i,u),Promise.resolve(i)}loadSkin(n){const i=this.json.skins[n],u=[];for(let o=0,f=i.joints.length;o<f;o++)u.push(this._loadNodeShallow(i.joints[o]));return i.inverseBindMatrices!==void 0?u.push(this.getDependency("accessor",i.inverseBindMatrices)):u.push(null),Promise.all(u).then(function(o){const f=o.pop(),c=o,h=[],p=[];for(let v=0,A=c.length;v<A;v++){const m=c[v];if(m){h.push(m);const B=new Hs;f!==null&&B.fromArray(f.array,v*16),p.push(B)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',i.joints[v])}return new Qd(h,p)})}loadAnimation(n){const i=this.json,u=this,o=i.animations[n],f=o.name?o.name:"animation_"+n,c=[],h=[],p=[],v=[],A=[];for(let m=0,B=o.channels.length;m<B;m++){const y=o.channels[m],w=o.samplers[y.sampler],D=y.target,F=D.node,x=o.parameters!==void 0?o.parameters[w.input]:w.input,_=o.parameters!==void 0?o.parameters[w.output]:w.output;D.node!==void 0&&(c.push(this.getDependency("node",F)),h.push(this.getDependency("accessor",x)),p.push(this.getDependency("accessor",_)),v.push(w),A.push(D))}return Promise.all([Promise.all(c),Promise.all(h),Promise.all(p),Promise.all(v),Promise.all(A)]).then(function(m){const B=m[0],y=m[1],w=m[2],D=m[3],F=m[4],x=[];for(let _=0,O=B.length;_<O;_++){const Q=B[_],W=y[_],X=w[_],K=D[_],I=F[_];if(Q===void 0)continue;Q.updateMatrix&&Q.updateMatrix();const L=u._createAnimationTracks(Q,W,X,K,I);if(L)for(let G=0;G<L.length;G++)x.push(L[G])}return new Xd(f,void 0,x)})}createNodeMesh(n){const i=this.json,u=this,o=i.nodes[n];return o.mesh===void 0?null:u.getDependency("mesh",o.mesh).then(function(f){const c=u._getNodeRef(u.meshCache,o.mesh,f);return o.weights!==void 0&&c.traverse(function(h){if(h.isMesh)for(let p=0,v=o.weights.length;p<v;p++)h.morphTargetInfluences[p]=o.weights[p]}),c})}loadNode(n){const i=this.json,u=this,o=i.nodes[n],f=u._loadNodeShallow(n),c=[],h=o.children||[];for(let v=0,A=h.length;v<A;v++)c.push(u.getDependency("node",h[v]));const p=o.skin===void 0?Promise.resolve(null):u.getDependency("skin",o.skin);return Promise.all([f,Promise.all(c),p]).then(function(v){const A=v[0],m=v[1],B=v[2];B!==null&&A.traverse(function(y){y.isSkinnedMesh&&y.bind(B,um)});for(let y=0,w=m.length;y<w;y++)A.add(m[y]);return A})}_loadNodeShallow(n){const i=this.json,u=this.extensions,o=this;if(this.nodeCache[n]!==void 0)return this.nodeCache[n];const f=i.nodes[n],c=f.name?o.createUniqueName(f.name):"",h=[],p=o._invokeOne(function(v){return v.createNodeMesh&&v.createNodeMesh(n)});return p&&h.push(p),f.camera!==void 0&&h.push(o.getDependency("camera",f.camera).then(function(v){return o._getNodeRef(o.cameraCache,f.camera,v)})),o._invokeAll(function(v){return v.createNodeAttachment&&v.createNodeAttachment(n)}).forEach(function(v){h.push(v)}),this.nodeCache[n]=Promise.all(h).then(function(v){let A;if(f.isBone===!0?A=new Wd:v.length>1?A=new ga:v.length===1?A=v[0]:A=new Rc,A!==v[0])for(let m=0,B=v.length;m<B;m++)A.add(v[m]);if(f.name&&(A.userData.name=f.name,A.name=c),yn(A,f),f.extensions&&lr(u,A,f),f.matrix!==void 0){const m=new Hs;m.fromArray(f.matrix),A.applyMatrix4(m)}else f.translation!==void 0&&A.position.fromArray(f.translation),f.rotation!==void 0&&A.quaternion.fromArray(f.rotation),f.scale!==void 0&&A.scale.fromArray(f.scale);return o.associations.has(A)||o.associations.set(A,{}),o.associations.get(A).nodes=n,A}),this.nodeCache[n]}loadScene(n){const i=this.extensions,u=this.json.scenes[n],o=this,f=new ga;u.name&&(f.name=o.createUniqueName(u.name)),yn(f,u),u.extensions&&lr(i,f,u);const c=u.nodes||[],h=[];for(let p=0,v=c.length;p<v;p++)h.push(o.getDependency("node",c[p]));return Promise.all(h).then(function(p){for(let A=0,m=p.length;A<m;A++)f.add(p[A]);const v=A=>{const m=new Map;for(const[B,y]of o.associations)(B instanceof Aa||B instanceof Jn)&&m.set(B,y);return A.traverse(B=>{const y=o.associations.get(B);y!=null&&m.set(B,y)}),m};return o.associations=v(f),f})}_createAnimationTracks(n,i,u,o,f){const c=[],h=n.name?n.name:n.uuid,p=[];Hn[f.path]===Hn.weights?n.traverse(function(B){B.morphTargetInfluences&&p.push(B.name?B.name:B.uuid)}):p.push(h);let v;switch(Hn[f.path]){case Hn.weights:v=Uu;break;case Hn.rotation:v=ju;break;case Hn.position:case Hn.scale:v=Nu;break;default:switch(u.itemSize){case 1:v=Uu;break;case 2:case 3:default:v=Nu;break}break}const A=o.interpolation!==void 0?rm[o.interpolation]:_c,m=this._getArrayFromAccessor(u);for(let B=0,y=p.length;B<y;B++){const w=new v(p[B]+"."+Hn[f.path],i.array,m,A);o.interpolation==="CUBICSPLINE"&&this._createCubicSplineTrackInterpolant(w),c.push(w)}return c}_getArrayFromAccessor(n){let i=n.array;if(n.normalized){const u=Ka(i.constructor),o=new Float32Array(i.length);for(let f=0,c=i.length;f<c;f++)o[f]=i[f]*u;i=o}return i}_createCubicSplineTrackInterpolant(n){n.createInterpolant=function(u){const o=this instanceof ju?nm:hf;return new o(this.times,this.values,this.getValueSize()/3,u)},n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function fm(a,n,i){const u=n.attributes,o=new $d;if(u.POSITION!==void 0){const h=i.json.accessors[u.POSITION],p=h.min,v=h.max;if(p!==void 0&&v!==void 0){if(o.set(new Ze(p[0],p[1],p[2]),new Ze(v[0],v[1],v[2])),h.normalized){const A=Ka(Or[h.componentType]);o.min.multiplyScalar(A),o.max.multiplyScalar(A)}}else{console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");return}}else return;const f=n.targets;if(f!==void 0){const h=new Ze,p=new Ze;for(let v=0,A=f.length;v<A;v++){const m=f[v];if(m.POSITION!==void 0){const B=i.json.accessors[m.POSITION],y=B.min,w=B.max;if(y!==void 0&&w!==void 0){if(p.setX(Math.max(Math.abs(y[0]),Math.abs(w[0]))),p.setY(Math.max(Math.abs(y[1]),Math.abs(w[1]))),p.setZ(Math.max(Math.abs(y[2]),Math.abs(w[2]))),B.normalized){const D=Ka(Or[B.componentType]);p.multiplyScalar(D)}h.max(p)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}o.expandByVector(h)}a.boundingBox=o;const c=new ep;o.getCenter(c.center),c.radius=o.min.distanceTo(o.max)/2,a.boundingSphere=c}function fc(a,n,i){const u=n.attributes,o=[];function f(c,h){return i.getDependency("accessor",c).then(function(p){a.setAttribute(h,p)})}for(const c in u){const h=ba[c]||c.toLowerCase();h in a.attributes||o.push(f(u[c],h))}if(n.indices!==void 0&&!a.index){const c=i.getDependency("accessor",n.indices).then(function(h){a.setIndex(h)});o.push(c)}return yn(a,n),fm(a,n,i),Promise.all(o).then(function(){return n.targets!==void 0?sm(a,n.targets,i):a})}class dm extends Dc{constructor(n){super(n),this.type=Yt}parse(n){const c=function(I,L){switch(I){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(L||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(L||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(L||""));default:case 4:throw new Error("THREE.RGBELoader: Memory Error: "+(L||""))}},A=`
`,m=function(I,L,G){L=L||1024;let z=I.pos,V=-1,oe=0,xe="",ve=String.fromCharCode.apply(null,new Uint16Array(I.subarray(z,z+128)));for(;0>(V=ve.indexOf(A))&&oe<L&&z<I.byteLength;)xe+=ve,oe+=ve.length,z+=128,ve+=String.fromCharCode.apply(null,new Uint16Array(I.subarray(z,z+128)));return-1<V?(I.pos+=oe+V+1,xe+ve.slice(0,V)):!1},B=function(I){const L=/^#\?(\S+)/,G=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,H=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,z=/^\s*FORMAT=(\S+)\s*$/,V=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,oe={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let xe,ve;for((I.pos>=I.byteLength||!(xe=m(I)))&&c(1,"no header found"),(ve=xe.match(L))||c(3,"bad initial token"),oe.valid|=1,oe.programtype=ve[1],oe.string+=xe+`
`;xe=m(I),xe!==!1;){if(oe.string+=xe+`
`,xe.charAt(0)==="#"){oe.comments+=xe+`
`;continue}if((ve=xe.match(G))&&(oe.gamma=parseFloat(ve[1])),(ve=xe.match(H))&&(oe.exposure=parseFloat(ve[1])),(ve=xe.match(z))&&(oe.valid|=2,oe.format=ve[1]),(ve=xe.match(V))&&(oe.valid|=4,oe.height=parseInt(ve[1],10),oe.width=parseInt(ve[2],10)),oe.valid&2&&oe.valid&4)break}return oe.valid&2||c(3,"missing format specifier"),oe.valid&4||c(3,"missing image size specifier"),oe},y=function(I,L,G){const H=L;if(H<8||H>32767||I[0]!==2||I[1]!==2||I[2]&128)return new Uint8Array(I);H!==(I[2]<<8|I[3])&&c(3,"wrong scanline width");const z=new Uint8Array(4*L*G);z.length||c(4,"unable to allocate buffer space");let V=0,oe=0;const xe=4*H,ve=new Uint8Array(4),tt=new Uint8Array(xe);let te=G;for(;te>0&&oe<I.byteLength;){oe+4>I.byteLength&&c(1),ve[0]=I[oe++],ve[1]=I[oe++],ve[2]=I[oe++],ve[3]=I[oe++],(ve[0]!=2||ve[1]!=2||(ve[2]<<8|ve[3])!=H)&&c(3,"bad rgbe scanline format");let ce=0,$;for(;ce<xe&&oe<I.byteLength;){$=I[oe++];const Ae=$>128;if(Ae&&($-=128),($===0||ce+$>xe)&&c(3,"bad scanline data"),Ae){const Be=I[oe++];for(let We=0;We<$;We++)tt[ce++]=Be}else tt.set(I.subarray(oe,oe+$),ce),ce+=$,oe+=$}const me=H;for(let Ae=0;Ae<me;Ae++){let Be=0;z[V]=tt[Ae+Be],Be+=H,z[V+1]=tt[Ae+Be],Be+=H,z[V+2]=tt[Ae+Be],Be+=H,z[V+3]=tt[Ae+Be],V+=4}te--}return z},w=function(I,L,G,H){const z=I[L+3],V=Math.pow(2,z-128)/255;G[H+0]=I[L+0]*V,G[H+1]=I[L+1]*V,G[H+2]=I[L+2]*V,G[H+3]=1},D=function(I,L,G,H){const z=I[L+3],V=Math.pow(2,z-128)/255;G[H+0]=Pr.toHalfFloat(Math.min(I[L+0]*V,65504)),G[H+1]=Pr.toHalfFloat(Math.min(I[L+1]*V,65504)),G[H+2]=Pr.toHalfFloat(Math.min(I[L+2]*V,65504)),G[H+3]=Pr.toHalfFloat(1)},F=new Uint8Array(n);F.pos=0;const x=B(F),_=x.width,O=x.height,Q=y(F.subarray(F.pos),_,O);let W,X,K;switch(this.type){case wn:K=Q.length/4;const I=new Float32Array(K*4);for(let G=0;G<K;G++)w(Q,G*4,I,G*4);W=I,X=wn;break;case Yt:K=Q.length/4;const L=new Uint16Array(K*4);for(let G=0;G<K;G++)D(Q,G*4,L,G*4);W=L,X=Yt;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:_,height:O,data:W,header:x.string,gamma:x.gamma,exposure:x.exposure,type:X}}setDataType(n){return this.type=n,this}load(n,i,u,o){function f(c,h){switch(c.type){case wn:case Yt:"colorSpace"in c?c.colorSpace="srgb-linear":c.encoding=3e3,c.minFilter=Zt,c.magFilter=Zt,c.generateMipmaps=!1,c.flipY=!0;break}i&&i(c,h)}return super.load(n,f,u,o)}}const hi=$a>=152;class pm extends Dc{constructor(n){super(n),this.type=Yt}parse(n){const L=Math.pow(2.7182818,2.2);function G(g,C){for(var M=0,k=0;k<65536;++k)(k==0||g[k>>3]&1<<(k&7))&&(C[M++]=k);for(var j=M-1;M<65536;)C[M++]=0;return j}function H(g){for(var C=0;C<16384;C++)g[C]={},g[C].len=0,g[C].lit=0,g[C].p=null}const z={l:0,c:0,lc:0};function V(g,C,M,k,j){for(;M<g;)C=C<<8|Ii(k,j),M+=8;M-=g,z.l=C>>M&(1<<g)-1,z.c=C,z.lc=M}const oe=new Array(59);function xe(g){for(var C=0;C<=58;++C)oe[C]=0;for(var C=0;C<65537;++C)oe[g[C]]+=1;for(var M=0,C=58;C>0;--C){var k=M+oe[C]>>1;oe[C]=M,M=k}for(var C=0;C<65537;++C){var j=g[C];j>0&&(g[C]=j|oe[j]++<<6)}}function ve(g,C,M,k,j,J,Y){for(var Z=M,re=0,ne=0;j<=J;j++){if(Z.value-M.value>k)return!1;V(6,re,ne,g,Z);var ie=z.l;if(re=z.c,ne=z.lc,Y[j]=ie,ie==63){if(Z.value-M.value>k)throw"Something wrong with hufUnpackEncTable";V(8,re,ne,g,Z);var ee=z.l+6;if(re=z.c,ne=z.lc,j+ee>J+1)throw"Something wrong with hufUnpackEncTable";for(;ee--;)Y[j++]=0;j--}else if(ie>=59){var ee=ie-59+2;if(j+ee>J+1)throw"Something wrong with hufUnpackEncTable";for(;ee--;)Y[j++]=0;j--}}xe(Y)}function tt(g){return g&63}function te(g){return g>>6}function ce(g,C,M,k){for(;C<=M;C++){var j=te(g[C]),J=tt(g[C]);if(j>>J)throw"Invalid table entry";if(J>14){var Y=k[j>>J-14];if(Y.len)throw"Invalid table entry";if(Y.lit++,Y.p){var Z=Y.p;Y.p=new Array(Y.lit);for(var re=0;re<Y.lit-1;++re)Y.p[re]=Z[re]}else Y.p=new Array(1);Y.p[Y.lit-1]=C}else if(J)for(var ne=0,re=1<<14-J;re>0;re--){var Y=k[(j<<14-J)+ne];if(Y.len||Y.p)throw"Invalid table entry";Y.len=J,Y.lit=C,ne++}}return!0}const $={c:0,lc:0};function me(g,C,M,k){g=g<<8|Ii(M,k),C+=8,$.c=g,$.lc=C}const Ae={c:0,lc:0};function Be(g,C,M,k,j,J,Y,Z,re,ne){if(g==C){k<8&&(me(M,k,j,Y),M=$.c,k=$.lc),k-=8;var ie=M>>k,ie=new Uint8Array([ie])[0];if(re.value+ie>ne)return!1;for(var ee=Z[re.value-1];ie-- >0;)Z[re.value++]=ee}else if(re.value<ne)Z[re.value++]=g;else return!1;Ae.c=M,Ae.lc=k}function We(g){return g&65535}function ct(g){var C=We(g);return C>32767?C-65536:C}const Te={a:0,b:0};function mt(g,C){var M=ct(g),k=ct(C),j=k,J=M+(j&1)+(j>>1),Y=J,Z=J-j;Te.a=Y,Te.b=Z}function Vt(g,C){var M=We(g),k=We(C),j=M-(k>>1)&65535,J=k+j-32768&65535;Te.a=J,Te.b=j}function br(g,C,M,k,j,J,Y){for(var Z=Y<16384,re=M>j?j:M,ne=1,ie;ne<=re;)ne<<=1;for(ne>>=1,ie=ne,ne>>=1;ne>=1;){for(var ee=0,Je=ee+J*(j-ie),fe=J*ne,pe=J*ie,ye=k*ne,Se=k*ie,Pe,Ge,Ce,Me;ee<=Je;ee+=pe){for(var Le=ee,Ke=ee+k*(M-ie);Le<=Ke;Le+=Se){var Ie=Le+ye,Qe=Le+fe,Ct=Qe+ye;Z?(mt(g[Le+C],g[Qe+C]),Pe=Te.a,Ce=Te.b,mt(g[Ie+C],g[Ct+C]),Ge=Te.a,Me=Te.b,mt(Pe,Ge),g[Le+C]=Te.a,g[Ie+C]=Te.b,mt(Ce,Me),g[Qe+C]=Te.a,g[Ct+C]=Te.b):(Vt(g[Le+C],g[Qe+C]),Pe=Te.a,Ce=Te.b,Vt(g[Ie+C],g[Ct+C]),Ge=Te.a,Me=Te.b,Vt(Pe,Ge),g[Le+C]=Te.a,g[Ie+C]=Te.b,Vt(Ce,Me),g[Qe+C]=Te.a,g[Ct+C]=Te.b)}if(M&ne){var Qe=Le+fe;Z?mt(g[Le+C],g[Qe+C]):Vt(g[Le+C],g[Qe+C]),Pe=Te.a,g[Qe+C]=Te.b,g[Le+C]=Pe}}if(j&ne)for(var Le=ee,Ke=ee+k*(M-ie);Le<=Ke;Le+=Se){var Ie=Le+ye;Z?mt(g[Le+C],g[Ie+C]):Vt(g[Le+C],g[Ie+C]),Pe=Te.a,g[Ie+C]=Te.b,g[Le+C]=Pe}ie=ne,ne>>=1}return ee}function hr(g,C,M,k,j,J,Y,Z,re,ne){for(var ie=0,ee=0,Je=Z,fe=Math.trunc(j.value+(J+7)/8);j.value<fe;)for(me(ie,ee,M,j),ie=$.c,ee=$.lc;ee>=14;){var pe=ie>>ee-14&16383,ye=C[pe];if(ye.len)ee-=ye.len,Be(ye.lit,Y,ie,ee,M,k,j,re,ne,Je),ie=Ae.c,ee=Ae.lc;else{if(!ye.p)throw"hufDecode issues";var Se;for(Se=0;Se<ye.lit;Se++){for(var Pe=tt(g[ye.p[Se]]);ee<Pe&&j.value<fe;)me(ie,ee,M,j),ie=$.c,ee=$.lc;if(ee>=Pe&&te(g[ye.p[Se]])==(ie>>ee-Pe&(1<<Pe)-1)){ee-=Pe,Be(ye.p[Se],Y,ie,ee,M,k,j,re,ne,Je),ie=Ae.c,ee=Ae.lc;break}}if(Se==ye.lit)throw"hufDecode issues"}}var Ge=8-J&7;for(ie>>=Ge,ee-=Ge;ee>0;){var ye=C[ie<<14-ee&16383];if(ye.len)ee-=ye.len,Be(ye.lit,Y,ie,ee,M,k,j,re,ne,Je),ie=Ae.c,ee=Ae.lc;else throw"hufDecode issues"}return!0}function _t(g,C,M,k,j,J){var Y={value:0},Z=M.value,re=Bt(C,M),ne=Bt(C,M);M.value+=4;var ie=Bt(C,M);if(M.value+=4,re<0||re>=65537||ne<0||ne>=65537)throw"Something wrong with HUF_ENCSIZE";var ee=new Array(65537),Je=new Array(16384);H(Je);var fe=k-(M.value-Z);if(ve(g,C,M,fe,re,ne,ee),ie>8*(k-(M.value-Z)))throw"Something wrong with hufUncompress";ce(ee,re,ne,Je),hr(ee,Je,g,C,M,ie,ne,J,j,Y)}function mr(g,C,M){for(var k=0;k<M;++k)C[k]=g[C[k]]}function vt(g){for(var C=1;C<g.length;C++){var M=g[C-1]+g[C]-128;g[C]=M}}function wi(g,C){for(var M=0,k=Math.floor((g.length+1)/2),j=0,J=g.length-1;!(j>J||(C[j++]=g[M++],j>J));)C[j++]=g[k++]}function Si(g){for(var C=g.byteLength,M=new Array,k=0,j=new DataView(g);C>0;){var J=j.getInt8(k++);if(J<0){var Y=-J;C-=Y+1;for(var Z=0;Z<Y;Z++)M.push(j.getUint8(k++))}else{var Y=J;C-=2;for(var re=j.getUint8(k++),Z=0;Z<Y+1;Z++)M.push(re)}}return M}function Ks(g,C,M,k,j,J){var Ie=new DataView(J.buffer),Y=M[g.idx[0]].width,Z=M[g.idx[0]].height,re=3,ne=Math.floor(Y/8),ie=Math.ceil(Y/8),ee=Math.ceil(Z/8),Je=Y-(ie-1)*8,fe=Z-(ee-1)*8,pe={value:0},ye=new Array(re),Se=new Array(re),Pe=new Array(re),Ge=new Array(re),Ce=new Array(re);for(let Ue=0;Ue<re;++Ue)Ce[Ue]=C[g.idx[Ue]],ye[Ue]=Ue<1?0:ye[Ue-1]+ie*ee,Se[Ue]=new Float32Array(64),Pe[Ue]=new Uint16Array(64),Ge[Ue]=new Uint16Array(ie*64);for(let Ue=0;Ue<ee;++Ue){var Me=8;Ue==ee-1&&(Me=fe);var Le=8;for(let be=0;be<ie;++be){be==ie-1&&(Le=Je);for(let He=0;He<re;++He)Pe[He].fill(0),Pe[He][0]=j[ye[He]++],zs(pe,k,Pe[He]),Qs(Pe[He],Se[He]),Xs(Se[He]);Xn(Se);for(let He=0;He<re;++He)Ws(Se[He],Ge[He],be*64)}let lt=0;for(let be=0;be<re;++be){const He=M[g.idx[be]].type;for(let Ve=8*Ue;Ve<8*Ue+Me;++Ve){lt=Ce[be][Ve];for(let pn=0;pn<ne;++pn){const xt=pn*64+(Ve&7)*8;Ie.setUint16(lt+0*2*He,Ge[be][xt+0],!0),Ie.setUint16(lt+1*2*He,Ge[be][xt+1],!0),Ie.setUint16(lt+2*2*He,Ge[be][xt+2],!0),Ie.setUint16(lt+3*2*He,Ge[be][xt+3],!0),Ie.setUint16(lt+4*2*He,Ge[be][xt+4],!0),Ie.setUint16(lt+5*2*He,Ge[be][xt+5],!0),Ie.setUint16(lt+6*2*He,Ge[be][xt+6],!0),Ie.setUint16(lt+7*2*He,Ge[be][xt+7],!0),lt+=8*2*He}}if(ne!=ie)for(let Ve=8*Ue;Ve<8*Ue+Me;++Ve){const pn=Ce[be][Ve]+8*ne*2*He,xt=ne*64+(Ve&7)*8;for(let nn=0;nn<Le;++nn)Ie.setUint16(pn+nn*2*He,Ge[be][xt+nn],!0)}}}for(var Ke=new Uint16Array(Y),Ie=new DataView(J.buffer),Qe=0;Qe<re;++Qe){M[g.idx[Qe]].decoded=!0;var Ct=M[g.idx[Qe]].type;if(M[Qe].type==2)for(var it=0;it<Z;++it){const Ue=Ce[Qe][it];for(var At=0;At<Y;++At)Ke[At]=Ie.getUint16(Ue+At*2*Ct,!0);for(var At=0;At<Y;++At)Ie.setFloat32(Ue+At*2*Ct,le(Ke[At]),!0)}}}function zs(g,C,M){for(var k,j=1;j<64;)k=C[g.value],k==65280?j=64:k>>8==255?j+=k&255:(M[j]=k,j++),g.value++}function Qs(g,C){C[0]=le(g[0]),C[1]=le(g[1]),C[2]=le(g[5]),C[3]=le(g[6]),C[4]=le(g[14]),C[5]=le(g[15]),C[6]=le(g[27]),C[7]=le(g[28]),C[8]=le(g[2]),C[9]=le(g[4]),C[10]=le(g[7]),C[11]=le(g[13]),C[12]=le(g[16]),C[13]=le(g[26]),C[14]=le(g[29]),C[15]=le(g[42]),C[16]=le(g[3]),C[17]=le(g[8]),C[18]=le(g[12]),C[19]=le(g[17]),C[20]=le(g[25]),C[21]=le(g[30]),C[22]=le(g[41]),C[23]=le(g[43]),C[24]=le(g[9]),C[25]=le(g[11]),C[26]=le(g[18]),C[27]=le(g[24]),C[28]=le(g[31]),C[29]=le(g[40]),C[30]=le(g[44]),C[31]=le(g[53]),C[32]=le(g[10]),C[33]=le(g[19]),C[34]=le(g[23]),C[35]=le(g[32]),C[36]=le(g[39]),C[37]=le(g[45]),C[38]=le(g[52]),C[39]=le(g[54]),C[40]=le(g[20]),C[41]=le(g[22]),C[42]=le(g[33]),C[43]=le(g[38]),C[44]=le(g[46]),C[45]=le(g[51]),C[46]=le(g[55]),C[47]=le(g[60]),C[48]=le(g[21]),C[49]=le(g[34]),C[50]=le(g[37]),C[51]=le(g[47]),C[52]=le(g[50]),C[53]=le(g[56]),C[54]=le(g[59]),C[55]=le(g[61]),C[56]=le(g[35]),C[57]=le(g[36]),C[58]=le(g[48]),C[59]=le(g[49]),C[60]=le(g[57]),C[61]=le(g[58]),C[62]=le(g[62]),C[63]=le(g[63])}function Xs(g){const C=.5*Math.cos(.7853975),M=.5*Math.cos(3.14159/16),k=.5*Math.cos(3.14159/8),j=.5*Math.cos(3*3.14159/16),J=.5*Math.cos(5*3.14159/16),Y=.5*Math.cos(3*3.14159/8),Z=.5*Math.cos(7*3.14159/16);for(var re=new Array(4),ne=new Array(4),ie=new Array(4),ee=new Array(4),Je=0;Je<8;++Je){var fe=Je*8;re[0]=k*g[fe+2],re[1]=Y*g[fe+2],re[2]=k*g[fe+6],re[3]=Y*g[fe+6],ne[0]=M*g[fe+1]+j*g[fe+3]+J*g[fe+5]+Z*g[fe+7],ne[1]=j*g[fe+1]-Z*g[fe+3]-M*g[fe+5]-J*g[fe+7],ne[2]=J*g[fe+1]-M*g[fe+3]+Z*g[fe+5]+j*g[fe+7],ne[3]=Z*g[fe+1]-J*g[fe+3]+j*g[fe+5]-M*g[fe+7],ie[0]=C*(g[fe+0]+g[fe+4]),ie[3]=C*(g[fe+0]-g[fe+4]),ie[1]=re[0]+re[3],ie[2]=re[1]-re[2],ee[0]=ie[0]+ie[1],ee[1]=ie[3]+ie[2],ee[2]=ie[3]-ie[2],ee[3]=ie[0]-ie[1],g[fe+0]=ee[0]+ne[0],g[fe+1]=ee[1]+ne[1],g[fe+2]=ee[2]+ne[2],g[fe+3]=ee[3]+ne[3],g[fe+4]=ee[3]-ne[3],g[fe+5]=ee[2]-ne[2],g[fe+6]=ee[1]-ne[1],g[fe+7]=ee[0]-ne[0]}for(var pe=0;pe<8;++pe)re[0]=k*g[16+pe],re[1]=Y*g[16+pe],re[2]=k*g[48+pe],re[3]=Y*g[48+pe],ne[0]=M*g[8+pe]+j*g[24+pe]+J*g[40+pe]+Z*g[56+pe],ne[1]=j*g[8+pe]-Z*g[24+pe]-M*g[40+pe]-J*g[56+pe],ne[2]=J*g[8+pe]-M*g[24+pe]+Z*g[40+pe]+j*g[56+pe],ne[3]=Z*g[8+pe]-J*g[24+pe]+j*g[40+pe]-M*g[56+pe],ie[0]=C*(g[pe]+g[32+pe]),ie[3]=C*(g[pe]-g[32+pe]),ie[1]=re[0]+re[3],ie[2]=re[1]-re[2],ee[0]=ie[0]+ie[1],ee[1]=ie[3]+ie[2],ee[2]=ie[3]-ie[2],ee[3]=ie[0]-ie[1],g[0+pe]=ee[0]+ne[0],g[8+pe]=ee[1]+ne[1],g[16+pe]=ee[2]+ne[2],g[24+pe]=ee[3]+ne[3],g[32+pe]=ee[3]-ne[3],g[40+pe]=ee[2]-ne[2],g[48+pe]=ee[1]-ne[1],g[56+pe]=ee[0]-ne[0]}function Xn(g){for(var C=0;C<64;++C){var M=g[0][C],k=g[1][C],j=g[2][C];g[0][C]=M+1.5747*j,g[1][C]=M-.1873*k-.4682*j,g[2][C]=M+1.8556*k}}function Ws(g,C,M){for(var k=0;k<64;++k)C[M+k]=Pr.toHalfFloat(Zs(g[k]))}function Zs(g){return g<=1?Math.sign(g)*Math.pow(Math.abs(g),2.2):Math.sign(g)*Math.pow(L,Math.abs(g)-1)}function Mi(g){return new DataView(g.array.buffer,g.offset.value,g.size)}function Wn(g){var C=g.viewer.buffer.slice(g.offset.value,g.offset.value+g.size),M=new Uint8Array(Si(C)),k=new Uint8Array(M.length);return vt(M),wi(M,k),new DataView(k.buffer)}function Kr(g){var C=g.array.slice(g.offset.value,g.offset.value+g.size),M=Rs(C),k=new Uint8Array(M.length);return vt(M),wi(M,k),new DataView(k.buffer)}function Ys(g){for(var C=g.viewer,M={value:g.offset.value},k=new Uint16Array(g.width*g.scanlineBlockSize*(g.channels*g.type)),j=new Uint8Array(8192),J=0,Y=new Array(g.channels),Z=0;Z<g.channels;Z++)Y[Z]={},Y[Z].start=J,Y[Z].end=Y[Z].start,Y[Z].nx=g.width,Y[Z].ny=g.lines,Y[Z].size=g.type,J+=Y[Z].nx*Y[Z].ny*Y[Z].size;var re=Yn(C,M),ne=Yn(C,M);if(ne>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(re<=ne)for(var Z=0;Z<ne-re+1;Z++)j[Z+re]=xn(C,M);var ie=new Uint16Array(65536),ee=G(j,ie),Je=Bt(C,M);_t(g.array,C,M,Je,k,J);for(var Z=0;Z<g.channels;++Z)for(var fe=Y[Z],pe=0;pe<Y[Z].size;++pe)br(k,fe.start+pe,fe.nx,fe.size,fe.ny,fe.nx*fe.size,ee);mr(ie,k,J);for(var ye=0,Se=new Uint8Array(k.buffer.byteLength),Pe=0;Pe<g.lines;Pe++)for(var Ge=0;Ge<g.channels;Ge++){var fe=Y[Ge],Ce=fe.nx*fe.size,Me=new Uint8Array(k.buffer,fe.end*2,Ce*2);Se.set(Me,ye),ye+=Ce*2,fe.end+=Ce}return new DataView(Se.buffer)}function Vs(g){var C=g.array.slice(g.offset.value,g.offset.value+g.size),M=Rs(C);const k=g.lines*g.channels*g.width,j=g.type==1?new Uint16Array(k):new Uint32Array(k);let J=0,Y=0;const Z=new Array(4);for(let re=0;re<g.lines;re++)for(let ne=0;ne<g.channels;ne++){let ie=0;switch(g.type){case 1:Z[0]=J,Z[1]=Z[0]+g.width,J=Z[1]+g.width;for(let ee=0;ee<g.width;++ee){const Je=M[Z[0]++]<<8|M[Z[1]++];ie+=Je,j[Y]=ie,Y++}break;case 2:Z[0]=J,Z[1]=Z[0]+g.width,Z[2]=Z[1]+g.width,J=Z[2]+g.width;for(let ee=0;ee<g.width;++ee){const Je=M[Z[0]++]<<24|M[Z[1]++]<<16|M[Z[2]++]<<8;ie+=Je,j[Y]=ie,Y++}break}}return new DataView(j.buffer)}function xi(g){var C=g.viewer,M={value:g.offset.value},k=new Uint8Array(g.width*g.lines*(g.channels*g.type*2)),j={version:Mt(C,M),unknownUncompressedSize:Mt(C,M),unknownCompressedSize:Mt(C,M),acCompressedSize:Mt(C,M),dcCompressedSize:Mt(C,M),rleCompressedSize:Mt(C,M),rleUncompressedSize:Mt(C,M),rleRawSize:Mt(C,M),totalAcUncompressedCount:Mt(C,M),totalDcUncompressedCount:Mt(C,M),acCompression:Mt(C,M)};if(j.version<2)throw"EXRLoader.parse: "+qt.compression+" version "+j.version+" is unsupported";for(var J=new Array,Y=Yn(C,M)-2;Y>0;){var Z=Ar(C.buffer,M),re=xn(C,M),ne=re>>2&3,ie=(re>>4)-1,ee=new Int8Array([ie])[0],Je=xn(C,M);J.push({name:Z,index:ee,type:Je,compression:ne}),Y-=Z.length+3}for(var fe=qt.channels,pe=new Array(g.channels),ye=0;ye<g.channels;++ye){var Se=pe[ye]={},Pe=fe[ye];Se.name=Pe.name,Se.compression=0,Se.decoded=!1,Se.type=Pe.pixelType,Se.pLinear=Pe.pLinear,Se.width=g.width,Se.height=g.lines}for(var Ge={idx:new Array(3)},Ce=0;Ce<g.channels;++Ce)for(var Se=pe[Ce],ye=0;ye<J.length;++ye){var Me=J[ye];Se.name==Me.name&&(Se.compression=Me.compression,Me.index>=0&&(Ge.idx[Me.index]=Ce),Se.offset=Ce)}if(j.acCompressedSize>0)switch(j.acCompression){case 0:var Ie=new Uint16Array(j.totalAcUncompressedCount);_t(g.array,C,M,j.acCompressedSize,Ie,j.totalAcUncompressedCount);break;case 1:var Le=g.array.slice(M.value,M.value+j.totalAcUncompressedCount),Ke=Rs(Le),Ie=new Uint16Array(Ke.buffer);M.value+=j.totalAcUncompressedCount;break}if(j.dcCompressedSize>0){var Qe={array:g.array,offset:M,size:j.dcCompressedSize},Ct=new Uint16Array(Kr(Qe).buffer);M.value+=j.dcCompressedSize}if(j.rleRawSize>0){var Le=g.array.slice(M.value,M.value+j.rleCompressedSize),Ke=Rs(Le),it=Si(Ke.buffer);M.value+=j.rleCompressedSize}for(var At=0,Ue=new Array(pe.length),ye=0;ye<Ue.length;++ye)Ue[ye]=new Array;for(var lt=0;lt<g.lines;++lt)for(var be=0;be<pe.length;++be)Ue[be].push(At),At+=pe[be].width*g.type*2;Ks(Ge,Ue,pe,Ie,Ct,k);for(var ye=0;ye<pe.length;++ye){var Se=pe[ye];if(!Se.decoded)switch(Se.compression){case 2:for(var He=0,Ve=0,lt=0;lt<g.lines;++lt){for(var pn=Ue[ye][He],xt=0;xt<Se.width;++xt){for(var nn=0;nn<2*Se.type;++nn)k[pn++]=it[Ve+nn*Se.width*Se.height];Ve++}He++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(k.buffer)}function Ar(g,C){for(var M=new Uint8Array(g),k=0;M[C.value+k]!=0;)k+=1;var j=new TextDecoder().decode(M.slice(C.value,C.value+k));return C.value=C.value+k+1,j}function qs(g,C,M){var k=new TextDecoder().decode(new Uint8Array(g).slice(C.value,C.value+M));return C.value=C.value+M,k}function $s(g,C){var M=Zn(g,C),k=Bt(g,C);return[M,k]}function eo(g,C){var M=Bt(g,C),k=Bt(g,C);return[M,k]}function Zn(g,C){var M=g.getInt32(C.value,!0);return C.value=C.value+4,M}function Bt(g,C){var M=g.getUint32(C.value,!0);return C.value=C.value+4,M}function Ii(g,C){var M=g[C.value];return C.value=C.value+1,M}function xn(g,C){var M=g.getUint8(C.value);return C.value=C.value+1,M}const Mt=function(g,C){let M;return"getBigInt64"in DataView.prototype?M=Number(g.getBigInt64(C.value,!0)):M=g.getUint32(C.value+4,!0)+Number(g.getUint32(C.value,!0)<<32),C.value+=8,M};function ft(g,C){var M=g.getFloat32(C.value,!0);return C.value+=4,M}function to(g,C){return Pr.toHalfFloat(ft(g,C))}function le(g){var C=(g&31744)>>10,M=g&1023;return(g>>15?-1:1)*(C?C===31?M?NaN:1/0:Math.pow(2,C-15)*(1+M/1024):6103515625e-14*(M/1024))}function Yn(g,C){var M=g.getUint16(C.value,!0);return C.value+=2,M}function no(g,C){return le(Yn(g,C))}function ro(g,C,M,k){for(var j=M.value,J=[];M.value<j+k-1;){var Y=Ar(C,M),Z=Zn(g,M),re=xn(g,M);M.value+=3;var ne=Zn(g,M),ie=Zn(g,M);J.push({name:Y,pixelType:Z,pLinear:re,xSampling:ne,ySampling:ie})}return M.value+=1,J}function Ri(g,C){var M=ft(g,C),k=ft(g,C),j=ft(g,C),J=ft(g,C),Y=ft(g,C),Z=ft(g,C),re=ft(g,C),ne=ft(g,C);return{redX:M,redY:k,greenX:j,greenY:J,blueX:Y,blueY:Z,whiteX:re,whiteY:ne}}function Fi(g,C){var M=["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"],k=xn(g,C);return M[k]}function io(g,C){var M=Bt(g,C),k=Bt(g,C),j=Bt(g,C),J=Bt(g,C);return{xMin:M,yMin:k,xMax:j,yMax:J}}function Ti(g,C){var M=["INCREASING_Y"],k=xn(g,C);return M[k]}function _i(g,C){var M=ft(g,C),k=ft(g,C);return[M,k]}function Di(g,C){var M=ft(g,C),k=ft(g,C),j=ft(g,C);return[M,k,j]}function so(g,C,M,k,j){if(k==="string"||k==="stringvector"||k==="iccProfile")return qs(C,M,j);if(k==="chlist")return ro(g,C,M,j);if(k==="chromaticities")return Ri(g,M);if(k==="compression")return Fi(g,M);if(k==="box2i")return io(g,M);if(k==="lineOrder")return Ti(g,M);if(k==="float")return ft(g,M);if(k==="v2f")return _i(g,M);if(k==="v3f")return Di(g,M);if(k==="int")return Zn(g,M);if(k==="rational")return $s(g,M);if(k==="timecode")return eo(g,M);if(k==="preview")return M.value+=j,"skipped";M.value+=j}function oo(g,C,M){const k={};if(g.getUint32(0,!0)!=20000630)throw"THREE.EXRLoader: provided file doesn't appear to be in OpenEXR format.";k.version=g.getUint8(4);const j=g.getUint8(5);k.spec={singleTile:!!(j&2),longName:!!(j&4),deepFormat:!!(j&8),multiPart:!!(j&16)},M.value=8;for(var J=!0;J;){var Y=Ar(C,M);if(Y==0)J=!1;else{var Z=Ar(C,M),re=Bt(g,M),ne=so(g,C,M,Z,re);ne===void 0?console.warn(`EXRLoader.parse: skipped unknown header attribute type '${Z}'.`):k[Y]=ne}}if(j&-5)throw console.error("EXRHeader:",k),"THREE.EXRLoader: provided file is currently unsupported.";return k}function ao(g,C,M,k,j){const J={size:0,viewer:C,array:M,offset:k,width:g.dataWindow.xMax-g.dataWindow.xMin+1,height:g.dataWindow.yMax-g.dataWindow.yMin+1,channels:g.channels.length,bytesPerLine:null,lines:null,inputSize:null,type:g.channels[0].pixelType,uncompress:null,getter:null,format:null,[hi?"colorSpace":"encoding"]:null};switch(g.compression){case"NO_COMPRESSION":J.lines=1,J.uncompress=Mi;break;case"RLE_COMPRESSION":J.lines=1,J.uncompress=Wn;break;case"ZIPS_COMPRESSION":J.lines=1,J.uncompress=Kr;break;case"ZIP_COMPRESSION":J.lines=16,J.uncompress=Kr;break;case"PIZ_COMPRESSION":J.lines=32,J.uncompress=Ys;break;case"PXR24_COMPRESSION":J.lines=16,J.uncompress=Vs;break;case"DWAA_COMPRESSION":J.lines=32,J.uncompress=xi;break;case"DWAB_COMPRESSION":J.lines=256,J.uncompress=xi;break;default:throw"EXRLoader.parse: "+g.compression+" is unsupported"}if(J.scanlineBlockSize=J.lines,J.type==1)switch(j){case wn:J.getter=no,J.inputSize=2;break;case Yt:J.getter=Yn,J.inputSize=2;break}else if(J.type==2)switch(j){case wn:J.getter=ft,J.inputSize=4;break;case Yt:J.getter=to,J.inputSize=4}else throw"EXRLoader.parse: unsupported pixelType "+J.type+" for "+g.compression+".";J.blockCount=(g.dataWindow.yMax+1)/J.scanlineBlockSize;for(var Y=0;Y<J.blockCount;Y++)Mt(C,k);J.outputChannels=J.channels==3?4:J.channels;const Z=J.width*J.height*J.outputChannels;switch(j){case wn:J.byteArray=new Float32Array(Z),J.channels<J.outputChannels&&J.byteArray.fill(1,0,Z);break;case Yt:J.byteArray=new Uint16Array(Z),J.channels<J.outputChannels&&J.byteArray.fill(15360,0,Z);break;default:console.error("THREE.EXRLoader: unsupported type: ",j);break}return J.bytesPerLine=J.width*J.inputSize*J.channels,J.outputChannels==4?J.format=Ur:J.format=tp,hi?J.colorSpace="srgb-linear":J.encoding=3e3,J}const Vn=new DataView(n),zr=new Uint8Array(n),qn={value:0},qt=oo(Vn,n,qn),_e=ao(qt,Vn,zr,qn,this.type),Gi={value:0},lo={R:0,G:1,B:2,A:3,Y:0};for(let g=0;g<_e.height/_e.scanlineBlockSize;g++){const C=Bt(Vn,qn);_e.size=Bt(Vn,qn),_e.lines=C+_e.scanlineBlockSize>_e.height?_e.height-C:_e.scanlineBlockSize;const k=_e.size<_e.lines*_e.bytesPerLine?_e.uncompress(_e):Mi(_e);qn.value+=_e.size;for(let j=0;j<_e.scanlineBlockSize;j++){const J=j+g*_e.scanlineBlockSize;if(J>=_e.height)break;for(let Y=0;Y<_e.channels;Y++){const Z=lo[qt.channels[Y].name];for(let re=0;re<_e.width;re++){Gi.value=(j*(_e.channels*_e.width)+Y*_e.width+re)*_e.inputSize;const ne=(_e.height-1-J)*(_e.width*_e.outputChannels)+re*_e.outputChannels+Z;_e.byteArray[ne]=_e.getter(k,Gi)}}}}return{header:qt,width:_e.width,height:_e.height,data:_e.byteArray,format:_e.format,[hi?"colorSpace":"encoding"]:_e[hi?"colorSpace":"encoding"],type:this.type}}setDataType(n){return this.type=n,this}load(n,i,u,o){function f(c,h){hi?c.colorSpace=h.colorSpace:c.encoding=h.encoding,c.minFilter=Zt,c.magFilter=Zt,c.generateMipmaps=!1,c.flipY=!1,i&&i(c,h)}return super.load(n,f,u,o)}}const _a=new WeakMap;class hm extends Wa{constructor(n){super(n),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(n){return this.decoderPath=n,this}setDecoderConfig(n){return this.decoderConfig=n,this}setWorkerLimit(n){return this.workerLimit=n,this}load(n,i,u,o){const f=new zn(this.manager);f.setPath(this.path),f.setResponseType("arraybuffer"),f.setRequestHeader(this.requestHeader),f.setWithCredentials(this.withCredentials),f.load(n,c=>{const h={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(c,h).then(i).catch(o)},u,o)}decodeDracoFile(n,i,u,o){const f={attributeIDs:u||this.defaultAttributeIDs,attributeTypes:o||this.defaultAttributeTypes,useUniqueIDs:!!u};this.decodeGeometry(n,f).then(i)}decodeGeometry(n,i){for(const p in i.attributeTypes){const v=i.attributeTypes[p];v.BYTES_PER_ELEMENT!==void 0&&(i.attributeTypes[p]=v.name)}const u=JSON.stringify(i);if(_a.has(n)){const p=_a.get(n);if(p.key===u)return p.promise;if(n.byteLength===0)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let o;const f=this.workerNextTaskID++,c=n.byteLength,h=this._getWorker(f,c).then(p=>(o=p,new Promise((v,A)=>{o._callbacks[f]={resolve:v,reject:A},o.postMessage({type:"decode",id:f,taskConfig:i,buffer:n},[n])}))).then(p=>this._createGeometry(p.geometry));return h.catch(()=>!0).then(()=>{o&&f&&this._releaseTask(o,f)}),_a.set(n,{key:u,promise:h}),h}_createGeometry(n){const i=new Tc;n.index&&i.setIndex(new gi(n.index.array,1));for(let u=0;u<n.attributes.length;u++){const o=n.attributes[u],f=o.name,c=o.array,h=o.itemSize;i.setAttribute(f,new gi(c,h))}return i}_loadLibrary(n,i){const u=new zn(this.manager);return u.setPath(this.decoderPath),u.setResponseType(i),u.setWithCredentials(this.withCredentials),new Promise((o,f)=>{u.load(n,o,void 0,f)})}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const n=typeof WebAssembly!="object"||this.decoderConfig.type==="js",i=[];return n?i.push(this._loadLibrary("draco_decoder.js","text")):(i.push(this._loadLibrary("draco_wasm_wrapper.js","text")),i.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(i).then(u=>{const o=u[0];n||(this.decoderConfig.wasmBinary=u[1]);const f=mm.toString(),c=["/* draco decoder */",o,"","/* worker */",f.substring(f.indexOf("{")+1,f.lastIndexOf("}"))].join(`
`);this.workerSourceURL=URL.createObjectURL(new Blob([c]))}),this.decoderPending}_getWorker(n,i){return this._initDecoder().then(()=>{if(this.workerPool.length<this.workerLimit){const o=new Worker(this.workerSourceURL);o._callbacks={},o._taskCosts={},o._taskLoad=0,o.postMessage({type:"init",decoderConfig:this.decoderConfig}),o.onmessage=function(f){const c=f.data;switch(c.type){case"decode":o._callbacks[c.id].resolve(c);break;case"error":o._callbacks[c.id].reject(c);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+c.type+'"')}},this.workerPool.push(o)}else this.workerPool.sort(function(o,f){return o._taskLoad>f._taskLoad?-1:1});const u=this.workerPool[this.workerPool.length-1];return u._taskCosts[n]=i,u._taskLoad+=i,u})}_releaseTask(n,i){n._taskLoad-=n._taskCosts[i],delete n._callbacks[i],delete n._taskCosts[i]}debug(){console.log("Task load: ",this.workerPool.map(n=>n._taskLoad))}dispose(){for(let n=0;n<this.workerPool.length;++n)this.workerPool[n].terminate();return this.workerPool.length=0,this}}function mm(){let a,n;onmessage=function(c){const h=c.data;switch(h.type){case"init":a=h.decoderConfig,n=new Promise(function(A){a.onModuleLoaded=function(m){A({draco:m})},DracoDecoderModule(a)});break;case"decode":const p=h.buffer,v=h.taskConfig;n.then(A=>{const m=A.draco,B=new m.Decoder,y=new m.DecoderBuffer;y.Init(new Int8Array(p),p.byteLength);try{const w=i(m,B,y,v),D=w.attributes.map(F=>F.array.buffer);w.index&&D.push(w.index.array.buffer),self.postMessage({type:"decode",id:h.id,geometry:w},D)}catch(w){console.error(w),self.postMessage({type:"error",id:h.id,error:w.message})}finally{m.destroy(y),m.destroy(B)}});break}};function i(c,h,p,v){const A=v.attributeIDs,m=v.attributeTypes;let B,y;const w=h.GetEncodedGeometryType(p);if(w===c.TRIANGULAR_MESH)B=new c.Mesh,y=h.DecodeBufferToMesh(p,B);else if(w===c.POINT_CLOUD)B=new c.PointCloud,y=h.DecodeBufferToPointCloud(p,B);else throw new Error("THREE.DRACOLoader: Unexpected geometry type.");if(!y.ok()||B.ptr===0)throw new Error("THREE.DRACOLoader: Decoding failed: "+y.error_msg());const D={index:null,attributes:[]};for(const F in A){const x=self[m[F]];let _,O;if(v.useUniqueIDs)O=A[F],_=h.GetAttributeByUniqueId(B,O);else{if(O=h.GetAttributeId(B,c[A[F]]),O===-1)continue;_=h.GetAttribute(B,O)}D.attributes.push(o(c,h,B,F,x,_))}return w===c.TRIANGULAR_MESH&&(D.index=u(c,h,B)),c.destroy(B),D}function u(c,h,p){const A=p.num_faces()*3,m=A*4,B=c._malloc(m);h.GetTrianglesUInt32Array(p,m,B);const y=new Uint32Array(c.HEAPF32.buffer,B,A).slice();return c._free(B),{array:y,itemSize:1}}function o(c,h,p,v,A,m){const B=m.num_components(),w=p.num_points()*B,D=w*A.BYTES_PER_ELEMENT,F=f(c,A),x=c._malloc(D);h.GetAttributeDataArrayForAllPoints(p,m,F,D,x);const _=new A(c.HEAPF32.buffer,x,w).slice();return c._free(x),{name:v,array:_,itemSize:B}}function f(c,h){switch(h){case Float32Array:return c.DT_FLOAT32;case Int8Array:return c.DT_INT8;case Int16Array:return c.DT_INT16;case Int32Array:return c.DT_INT32;case Uint8Array:return c.DT_UINT8;case Uint16Array:return c.DT_UINT16;case Uint32Array:return c.DT_UINT32}}}let Fs;const Da=()=>{if(Fs)return Fs;const a="B9h9z9tFBBBF8fL9gBB9gLaaaaaFa9gEaaaB9gFaFa9gEaaaFaEMcBFFFGGGEIIILF9wFFFLEFBFKNFaFCx/IFMO/LFVK9tv9t9vq95GBt9f9f939h9z9t9f9j9h9s9s9f9jW9vq9zBBp9tv9z9o9v9wW9f9kv9j9v9kv9WvqWv94h919m9mvqBF8Z9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv94h919m9mvqBGy9tv9z9o9v9wW9f9kv9j9v9kv9J9u9kv949TvZ91v9u9jvBEn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9P9jWBIi9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9R919hWBLn9tv9z9o9v9wW9f9kv9j9v9kv69p9sWvq9F949wBKI9z9iqlBOc+x8ycGBM/qQFTa8jUUUUBCU/EBlHL8kUUUUBC9+RKGXAGCFJAI9LQBCaRKAE2BBC+gF9HQBALAEAIJHOAGlAGTkUUUBRNCUoBAG9uC/wgBZHKCUGAKCUG9JyRVAECFJRICBRcGXEXAcAF9PQFAVAFAclAcAVJAF9JyRMGXGXAG9FQBAMCbJHKC9wZRSAKCIrCEJCGrRQANCUGJRfCBRbAIRTEXGXAOATlAQ9PQBCBRISEMATAQJRIGXAS9FQBCBRtCBREEXGXAOAIlCi9PQBCBRISLMANCU/CBJAEJRKGXGXGXGXGXATAECKrJ2BBAtCKZrCEZfIBFGEBMAKhB83EBAKCNJhB83EBSEMAKAI2BIAI2BBHmCKrHYAYCE6HYy86BBAKCFJAICIJAYJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCGJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCEJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCIJAYAmJHY2BBAI2BFHmCKrHPAPCE6HPy86BBAKCLJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCKJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCOJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCNJAYAmJHY2BBAI2BGHmCKrHPAPCE6HPy86BBAKCVJAYAPJHY2BBAmCIrCEZHPAPCE6HPy86BBAKCcJAYAPJHY2BBAmCGrCEZHPAPCE6HPy86BBAKCMJAYAPJHY2BBAmCEZHmAmCE6Hmy86BBAKCSJAYAmJHm2BBAI2BEHICKrHYAYCE6HYy86BBAKCQJAmAYJHm2BBAICIrCEZHYAYCE6HYy86BBAKCfJAmAYJHm2BBAICGrCEZHYAYCE6HYy86BBAKCbJAmAYJHK2BBAICEZHIAICE6HIy86BBAKAIJRISGMAKAI2BNAI2BBHmCIrHYAYCb6HYy86BBAKCFJAICNJAYJHY2BBAmCbZHmAmCb6Hmy86BBAKCGJAYAmJHm2BBAI2BFHYCIrHPAPCb6HPy86BBAKCEJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCIJAmAYJHm2BBAI2BGHYCIrHPAPCb6HPy86BBAKCLJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCKJAmAYJHm2BBAI2BEHYCIrHPAPCb6HPy86BBAKCOJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCNJAmAYJHm2BBAI2BIHYCIrHPAPCb6HPy86BBAKCVJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCcJAmAYJHm2BBAI2BLHYCIrHPAPCb6HPy86BBAKCMJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCSJAmAYJHm2BBAI2BKHYCIrHPAPCb6HPy86BBAKCQJAmAPJHm2BBAYCbZHYAYCb6HYy86BBAKCfJAmAYJHm2BBAI2BOHICIrHYAYCb6HYy86BBAKCbJAmAYJHK2BBAICbZHIAICb6HIy86BBAKAIJRISFMAKAI8pBB83BBAKCNJAICNJ8pBB83BBAICTJRIMAtCGJRtAECTJHEAS9JQBMMGXAIQBCBRISEMGXAM9FQBANAbJ2BBRtCBRKAfREEXAEANCU/CBJAKJ2BBHTCFrCBATCFZl9zAtJHt86BBAEAGJREAKCFJHKAM9HQBMMAfCFJRfAIRTAbCFJHbAG9HQBMMABAcAG9sJANCUGJAMAG9sTkUUUBpANANCUGJAMCaJAG9sJAGTkUUUBpMAMCBAIyAcJRcAIQBMC9+RKSFMCBC99AOAIlAGCAAGCA9Ly6yRKMALCU/EBJ8kUUUUBAKM+OmFTa8jUUUUBCoFlHL8kUUUUBC9+RKGXAFCE9uHOCtJAI9LQBCaRKAE2BBHNC/wFZC/gF9HQBANCbZHVCF9LQBALCoBJCgFCUFT+JUUUBpALC84Jha83EBALC8wJha83EBALC8oJha83EBALCAJha83EBALCiJha83EBALCTJha83EBALha83ENALha83EBAEAIJC9wJRcAECFJHNAOJRMGXAF9FQBCQCbAVCF6yRSABRECBRVCBRQCBRfCBRICBRKEXGXAMAcuQBC9+RKSEMGXGXAN2BBHOC/vF9LQBALCoBJAOCIrCa9zAKJCbZCEWJHb8oGIRTAb8oGBRtGXAOCbZHbAS9PQBALAOCa9zAIJCbZCGWJ8oGBAVAbyROAb9FRbGXGXAGCG9HQBABAt87FBABCIJAO87FBABCGJAT87FBSFMAEAtjGBAECNJAOjGBAECIJATjGBMAVAbJRVALCoBJAKCEWJHmAOjGBAmATjGIALAICGWJAOjGBALCoBJAKCFJCbZHKCEWJHTAtjGBATAOjGIAIAbJRIAKCFJRKSGMGXGXAbCb6QBAQAbJAbC989zJCFJRQSFMAM1BBHbCgFZROGXGXAbCa9MQBAMCFJRMSFMAM1BFHbCgBZCOWAOCgBZqROGXAbCa9MQBAMCGJRMSFMAM1BGHbCgBZCfWAOqROGXAbCa9MQBAMCEJRMSFMAM1BEHbCgBZCdWAOqROGXAbCa9MQBAMCIJRMSFMAM2BIC8cWAOqROAMCLJRMMAOCFrCBAOCFZl9zAQJRQMGXGXAGCG9HQBABAt87FBABCIJAQ87FBABCGJAT87FBSFMAEAtjGBAECNJAQjGBAECIJATjGBMALCoBJAKCEWJHOAQjGBAOATjGIALAICGWJAQjGBALCoBJAKCFJCbZHKCEWJHOAtjGBAOAQjGIAICFJRIAKCFJRKSFMGXAOCDF9LQBALAIAcAOCbZJ2BBHbCIrHTlCbZCGWJ8oGBAVCFJHtATyROALAIAblCbZCGWJ8oGBAtAT9FHmJHtAbCbZHTyRbAT9FRTGXGXAGCG9HQBABAV87FBABCIJAb87FBABCGJAO87FBSFMAEAVjGBAECNJAbjGBAECIJAOjGBMALAICGWJAVjGBALCoBJAKCEWJHYAOjGBAYAVjGIALAICFJHICbZCGWJAOjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAIAmJCbZHICGWJAbjGBALCoBJAKCGJCbZHKCEWJHOAVjGBAOAbjGIAKCFJRKAIATJRIAtATJRVSFMAVCBAM2BBHYyHTAOC/+F6HPJROAYCbZRtGXGXAYCIrHmQBAOCFJRbSFMAORbALAIAmlCbZCGWJ8oGBROMGXGXAtQBAbCFJRVSFMAbRVALAIAYlCbZCGWJ8oGBRbMGXGXAP9FQBAMCFJRYSFMAM1BFHYCgFZRTGXGXAYCa9MQBAMCGJRYSFMAM1BGHYCgBZCOWATCgBZqRTGXAYCa9MQBAMCEJRYSFMAM1BEHYCgBZCfWATqRTGXAYCa9MQBAMCIJRYSFMAM1BIHYCgBZCdWATqRTGXAYCa9MQBAMCLJRYSFMAMCKJRYAM2BLC8cWATqRTMATCFrCBATCFZl9zAQJHQRTMGXGXAmCb6QBAYRPSFMAY1BBHMCgFZROGXGXAMCa9MQBAYCFJRPSFMAY1BFHMCgBZCOWAOCgBZqROGXAMCa9MQBAYCGJRPSFMAY1BGHMCgBZCfWAOqROGXAMCa9MQBAYCEJRPSFMAY1BEHMCgBZCdWAOqROGXAMCa9MQBAYCIJRPSFMAYCLJRPAY2BIC8cWAOqROMAOCFrCBAOCFZl9zAQJHQROMGXGXAtCb6QBAPRMSFMAP1BBHMCgFZRbGXGXAMCa9MQBAPCFJRMSFMAP1BFHMCgBZCOWAbCgBZqRbGXAMCa9MQBAPCGJRMSFMAP1BGHMCgBZCfWAbqRbGXAMCa9MQBAPCEJRMSFMAP1BEHMCgBZCdWAbqRbGXAMCa9MQBAPCIJRMSFMAPCLJRMAP2BIC8cWAbqRbMAbCFrCBAbCFZl9zAQJHQRbMGXGXAGCG9HQBABAT87FBABCIJAb87FBABCGJAO87FBSFMAEATjGBAECNJAbjGBAECIJAOjGBMALCoBJAKCEWJHYAOjGBAYATjGIALAICGWJATjGBALCoBJAKCFJCbZCEWJHYAbjGBAYAOjGIALAICFJHICbZCGWJAOjGBALCoBJAKCGJCbZCEWJHOATjGBAOAbjGIALAIAm9FAmCb6qJHICbZCGWJAbjGBAIAt9FAtCb6qJRIAKCEJRKMANCFJRNABCKJRBAECSJREAKCbZRKAICbZRIAfCEJHfAF9JQBMMCBC99AMAc6yRKMALCoFJ8kUUUUBAKM/tIFGa8jUUUUBCTlRLC9+RKGXAFCLJAI9LQBCaRKAE2BBC/+FZC/QF9HQBALhB83ENAECFJRKAEAIJC98JREGXAF9FQBGXAGCG6QBEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMALCNJAICFZCGWqHGAICGrCBAICFrCFZl9zAG8oGBJHIjGBABAIjGBABCIJRBAFCaJHFQBSGMMEXGXAKAE9JQBC9+bMAK1BBHGCgFZRIGXGXAGCa9MQBAKCFJRKSFMAK1BFHGCgBZCOWAICgBZqRIGXAGCa9MQBAKCGJRKSFMAK1BGHGCgBZCfWAIqRIGXAGCa9MQBAKCEJRKSFMAK1BEHGCgBZCdWAIqRIGXAGCa9MQBAKCIJRKSFMAK2BIC8cWAIqRIAKCLJRKMABAICGrCBAICFrCFZl9zALCNJAICFZCGWqHI8oGBJHG87FBAIAGjGBABCGJRBAFCaJHFQBMMCBC99AKAE6yRKMAKM+lLKFaF99GaG99FaG99GXGXAGCI9HQBAF9FQFEXGXGX9DBBB8/9DBBB+/ABCGJHG1BB+yAB1BBHE+yHI+L+TABCFJHL1BBHK+yHO+L+THN9DBBBB9gHVyAN9DBB/+hANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE86BBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG86BBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG86BBABCIJRBAFCaJHFQBSGMMAF9FQBEXGXGX9DBBB8/9DBBB+/ABCIJHG8uFB+yAB8uFBHE+yHI+L+TABCGJHL8uFBHK+yHO+L+THN9DBBBB9gHVyAN9DB/+g6ANAN+U9DBBBBANAVyHcAc+MHMAECa3yAI+SHIAI+UAcAMAKCa3yAO+SHcAc+U+S+S+R+VHO+U+SHN+L9DBBB9P9d9FQBAN+oRESFMCUUUU94REMAGAE87FBGXGX9DBBB8/9DBBB+/Ac9DBBBB9gyAcAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMALAG87FBGXGX9DBBB8/9DBBB+/AI9DBBBB9gyAIAO+U+SHN+L9DBBB9P9d9FQBAN+oRGSFMCUUUU94RGMABAG87FBABCNJRBAFCaJHFQBMMM/SEIEaE99EaF99GXAF9FQBCBREABRIEXGXGX9D/zI818/AICKJ8uFBHLCEq+y+VHKAI8uFB+y+UHO9DB/+g6+U9DBBB8/9DBBB+/AO9DBBBB9gy+SHN+L9DBBB9P9d9FQBAN+oRVSFMCUUUU94RVMAICIJ8uFBRcAICGJ8uFBRMABALCFJCEZAEqCFWJAV87FBGXGXAKAM+y+UHN9DB/+g6+U9DBBB8/9DBBB+/AN9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRMSFMCUUUU94RMMABALCGJCEZAEqCFWJAM87FBGXGXAKAc+y+UHK9DB/+g6+U9DBBB8/9DBBB+/AK9DBBBB9gy+SHS+L9DBBB9P9d9FQBAS+oRcSFMCUUUU94RcMABALCaJCEZAEqCFWJAc87FBGXGX9DBBU8/AOAO+U+TANAN+U+TAKAK+U+THO9DBBBBAO9DBBBB9gy+R9DB/+g6+U9DBBB8/+SHO+L9DBBB9P9d9FQBAO+oRcSFMCUUUU94RcMABALCEZAEqCFWJAc87FBAICNJRIAECIJREAFCaJHFQBMMM9JBGXAGCGrAF9sHF9FQBEXABAB8oGBHGCNWCN91+yAGCi91CnWCUUU/8EJ+++U84GBABCIJRBAFCaJHFQBMMM9TFEaCBCB8oGUkUUBHFABCEJC98ZJHBjGUkUUBGXGXAB8/BCTWHGuQBCaREABAGlCggEJCTrXBCa6QFMAFREMAEM/lFFFaGXGXAFABqCEZ9FQBABRESFMGXGXAGCT9PQBABRESFMABREEXAEAF8oGBjGBAECIJAFCIJ8oGBjGBAECNJAFCNJ8oGBjGBAECSJAFCSJ8oGBjGBAECTJREAFCTJRFAGC9wJHGCb9LQBMMAGCI9JQBEXAEAF8oGBjGBAFCIJRFAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF2BB86BBAECFJREAFCFJRFAGCaJHGQBMMABMoFFGaGXGXABCEZ9FQBABRESFMAFCgFZC+BwsN9sRIGXGXAGCT9PQBABRESFMABREEXAEAIjGBAECSJAIjGBAECNJAIjGBAECIJAIjGBAECTJREAGC9wJHGCb9LQBMMAGCI9JQBEXAEAIjGBAECIJREAGC98JHGCE9LQBMMGXAG9FQBEXAEAF86BBAECFJREAGCaJHGQBMMABMMMFBCUNMIT9kBB",n="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",i=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),u=new Uint8Array([32,0,65,253,3,1,2,34,4,106,6,5,11,8,7,20,13,33,12,16,128,9,116,64,19,113,127,15,10,21,22,14,255,66,24,54,136,107,18,23,192,26,114,118,132,17,77,101,130,144,27,87,131,44,45,74,156,154,70,167]);if(typeof WebAssembly!="object")return{supported:!1};let o=a;WebAssembly.validate(i)&&(o=n);let f;const c=WebAssembly.instantiate(h(o),{}).then(m=>{f=m.instance,f.exports.__wasm_call_ctors()});function h(m){const B=new Uint8Array(m.length);for(let w=0;w<m.length;++w){const D=m.charCodeAt(w);B[w]=D>96?D-71:D>64?D-65:D>47?D+4:D>46?63:62}let y=0;for(let w=0;w<m.length;++w)B[y++]=B[w]<60?u[B[w]]:(B[w]-60)*64+B[++w];return B.buffer.slice(0,y)}function p(m,B,y,w,D,F){const x=f.exports.sbrk,_=y+3&-4,O=x(_*w),Q=x(D.length),W=new Uint8Array(f.exports.memory.buffer);W.set(D,Q);const X=m(O,y,w,Q,D.length);if(X===0&&F&&F(O,_,w),B.set(W.subarray(O,O+y*w)),x(O-x(0)),X!==0)throw new Error(`Malformed buffer data: ${X}`)}const v={0:"",1:"meshopt_decodeFilterOct",2:"meshopt_decodeFilterQuat",3:"meshopt_decodeFilterExp",NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},A={0:"meshopt_decodeVertexBuffer",1:"meshopt_decodeIndexBuffer",2:"meshopt_decodeIndexSequence",ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return Fs={ready:c,supported:!0,decodeVertexBuffer(m,B,y,w,D){p(f.exports.meshopt_decodeVertexBuffer,m,B,y,w,f.exports[v[D]])},decodeIndexBuffer(m,B,y,w){p(f.exports.meshopt_decodeIndexBuffer,m,B,y,w)},decodeIndexSequence(m,B,y,w){p(f.exports.meshopt_decodeIndexSequence,m,B,y,w)},decodeGltfBuffer(m,B,y,w,D,F){p(f.exports[A[D]],m,B,y,w,f.exports[v[F]])}},Fs};let Ts=null,mf="https://www.gstatic.com/draco/versioned/decoders/1.5.5/";function Af(a=!0,n=!0,i){return u=>{i&&i(u),a&&(Ts||(Ts=new hm),Ts.setDecoderPath(typeof a=="string"?a:mf),u.setDRACOLoader(Ts)),n&&u.setMeshoptDecoder(typeof Da=="function"?Da():Da)}}const Jr=(a,n,i,u)=>Mn(el,a,Af(n,i,u));Jr.preload=(a,n,i,u)=>Mn.preload(el,a,Af(n,i,u));Jr.clear=a=>Mn.clear(el,a);Jr.setDecoderPath=a=>{mf=a};const Am=3e3,gm=3001,gf=(a,n,i)=>{let u;switch(a){case Ps:u=new Uint8ClampedArray(n*i*4);break;case Yt:u=new Uint16Array(n*i*4);break;case op:u=new Uint32Array(n*i*4);break;case sp:u=new Int8Array(n*i*4);break;case ip:u=new Int16Array(n*i*4);break;case rp:u=new Int32Array(n*i*4);break;case wn:u=new Float32Array(n*i*4);break;default:throw new Error("Unsupported data type")}return u};let _s;const vm=(a,n,i,u)=>{if(_s!==void 0)return _s;const o=new Gc(1,1,u);n.setRenderTarget(o);const f=new Us(new Tt,new Lr({color:16777215}));n.render(f,i),n.setRenderTarget(null);const c=gf(a,o.width,o.height);return n.readRenderTargetPixels(o,0,0,o.width,o.height,c),o.dispose(),f.geometry.dispose(),f.material.dispose(),_s=c[0]!==0,_s};class tl{constructor(n){var i,u,o,f,c,h,p,v,A,m,B,y,w,D,F,x;this._rendererIsDisposable=!1,this._supportsReadPixels=!0,this.render=()=>{this._renderer.setRenderTarget(this._renderTarget);try{this._renderer.render(this._scene,this._camera)}catch(O){throw this._renderer.setRenderTarget(null),O}this._renderer.setRenderTarget(null)},this._width=n.width,this._height=n.height,this._type=n.type,this._colorSpace=n.colorSpace;const _={format:Ur,depthBuffer:!1,stencilBuffer:!1,type:this._type,colorSpace:this._colorSpace,anisotropy:((i=n.renderTargetOptions)===null||i===void 0?void 0:i.anisotropy)!==void 0?(u=n.renderTargetOptions)===null||u===void 0?void 0:u.anisotropy:1,generateMipmaps:((o=n.renderTargetOptions)===null||o===void 0?void 0:o.generateMipmaps)!==void 0?(f=n.renderTargetOptions)===null||f===void 0?void 0:f.generateMipmaps:!1,magFilter:((c=n.renderTargetOptions)===null||c===void 0?void 0:c.magFilter)!==void 0?(h=n.renderTargetOptions)===null||h===void 0?void 0:h.magFilter:Zt,minFilter:((p=n.renderTargetOptions)===null||p===void 0?void 0:p.minFilter)!==void 0?(v=n.renderTargetOptions)===null||v===void 0?void 0:v.minFilter:Zt,samples:((A=n.renderTargetOptions)===null||A===void 0?void 0:A.samples)!==void 0?(m=n.renderTargetOptions)===null||m===void 0?void 0:m.samples:void 0,wrapS:((B=n.renderTargetOptions)===null||B===void 0?void 0:B.wrapS)!==void 0?(y=n.renderTargetOptions)===null||y===void 0?void 0:y.wrapS:En,wrapT:((w=n.renderTargetOptions)===null||w===void 0?void 0:w.wrapT)!==void 0?(D=n.renderTargetOptions)===null||D===void 0?void 0:D.wrapT:En};if(this._material=n.material,n.renderer?this._renderer=n.renderer:(this._renderer=tl.instantiateRenderer(),this._rendererIsDisposable=!0),this._scene=new Qa,this._camera=new za,this._camera.position.set(0,0,10),this._camera.left=-.5,this._camera.right=.5,this._camera.top=.5,this._camera.bottom=-.5,this._camera.updateProjectionMatrix(),!vm(this._type,this._renderer,this._camera,_)){let O;switch(this._type){case Yt:O=this._renderer.extensions.has("EXT_color_buffer_float")?wn:void 0;break}O!==void 0?(console.warn(`This browser does not support reading pixels from ${this._type} RenderTargets, switching to ${wn}`),this._type=O):(this._supportsReadPixels=!1,console.warn("This browser dos not support toArray or toDataTexture, calls to those methods will result in an error thrown"))}this._quad=new Us(new Tt,this._material),this._quad.geometry.computeBoundingBox(),this._scene.add(this._quad),this._renderTarget=new Gc(this.width,this.height,_),this._renderTarget.texture.mapping=((F=n.renderTargetOptions)===null||F===void 0?void 0:F.mapping)!==void 0?(x=n.renderTargetOptions)===null||x===void 0?void 0:x.mapping:ks}static instantiateRenderer(){const n=new Sc;return n.setSize(128,128),n}toArray(){if(!this._supportsReadPixels)throw new Error("Can't read pixels in this browser");const n=gf(this._type,this._width,this._height);return this._renderer.readRenderTargetPixels(this._renderTarget,0,0,this._width,this._height,n),n}toDataTexture(n){const i=new np(this.toArray(),this.width,this.height,Ur,this._type,(n==null?void 0:n.mapping)||ks,(n==null?void 0:n.wrapS)||En,(n==null?void 0:n.wrapT)||En,(n==null?void 0:n.magFilter)||Zt,(n==null?void 0:n.minFilter)||Zt,(n==null?void 0:n.anisotropy)||1,Pa);return i.generateMipmaps=(n==null?void 0:n.generateMipmaps)!==void 0?n==null?void 0:n.generateMipmaps:!1,i}disposeOnDemandRenderer(){this._renderer.setRenderTarget(null),this._rendererIsDisposable&&(this._renderer.dispose(),this._renderer.forceContextLoss())}dispose(n){this.disposeOnDemandRenderer(),n&&this.renderTarget.dispose(),this.material instanceof Xa&&Object.values(this.material.uniforms).forEach(i=>{i.value instanceof Jn&&i.value.dispose()}),Object.values(this.material).forEach(i=>{i instanceof Jn&&i.dispose()}),this.material.dispose(),this._quad.geometry.dispose()}get width(){return this._width}set width(n){this._width=n,this._renderTarget.setSize(this._width,this._height)}get height(){return this._height}set height(n){this._height=n,this._renderTarget.setSize(this._width,this._height)}get renderer(){return this._renderer}get renderTarget(){return this._renderTarget}set renderTarget(n){this._renderTarget=n,this._width=n.width,this._height=n.height}get material(){return this._material}get type(){return this._type}get colorSpace(){return this._colorSpace}}const Bm=`
varying vec2 vUv;

void main() {
  vUv = uv;
  gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}
`,Cm=`
// min half float value
#define HALF_FLOAT_MIN vec3( -65504, -65504, -65504 )
// max half float value
#define HALF_FLOAT_MAX vec3( 65504, 65504, 65504 )

uniform sampler2D sdr;
uniform sampler2D gainMap;
uniform vec3 gamma;
uniform vec3 offsetHdr;
uniform vec3 offsetSdr;
uniform vec3 gainMapMin;
uniform vec3 gainMapMax;
uniform float weightFactor;

varying vec2 vUv;

void main() {
  vec3 rgb = texture2D( sdr, vUv ).rgb;
  vec3 recovery = texture2D( gainMap, vUv ).rgb;
  vec3 logRecovery = pow( recovery, gamma );
  vec3 logBoost = gainMapMin * ( 1.0 - logRecovery ) + gainMapMax * logRecovery;
  vec3 hdrColor = (rgb + offsetSdr) * exp2( logBoost * weightFactor ) - offsetHdr;
  vec3 clampedHdrColor = max( HALF_FLOAT_MIN, min( HALF_FLOAT_MAX, hdrColor ));
  gl_FragColor = vec4( clampedHdrColor , 1.0 );
}
`;class ym extends Xa{constructor({gamma:n,offsetHdr:i,offsetSdr:u,gainMapMin:o,gainMapMax:f,maxDisplayBoost:c,hdrCapacityMin:h,hdrCapacityMax:p,sdr:v,gainMap:A}){super({name:"GainMapDecoderMaterial",vertexShader:Bm,fragmentShader:Cm,uniforms:{sdr:{value:v},gainMap:{value:A},gamma:{value:new Ze(1/n[0],1/n[1],1/n[2])},offsetHdr:{value:new Ze().fromArray(i)},offsetSdr:{value:new Ze().fromArray(u)},gainMapMin:{value:new Ze().fromArray(o)},gainMapMax:{value:new Ze().fromArray(f)},weightFactor:{value:(Math.log2(c)-h)/(p-h)}},blending:up,depthTest:!1,depthWrite:!1}),this._maxDisplayBoost=c,this._hdrCapacityMin=h,this._hdrCapacityMax=p,this.needsUpdate=!0,this.uniformsNeedUpdate=!0}get sdr(){return this.uniforms.sdr.value}set sdr(n){this.uniforms.sdr.value=n}get gainMap(){return this.uniforms.gainMap.value}set gainMap(n){this.uniforms.gainMap.value=n}get offsetHdr(){return this.uniforms.offsetHdr.value.toArray()}set offsetHdr(n){this.uniforms.offsetHdr.value.fromArray(n)}get offsetSdr(){return this.uniforms.offsetSdr.value.toArray()}set offsetSdr(n){this.uniforms.offsetSdr.value.fromArray(n)}get gainMapMin(){return this.uniforms.gainMapMin.value.toArray()}set gainMapMin(n){this.uniforms.gainMapMin.value.fromArray(n)}get gainMapMax(){return this.uniforms.gainMapMax.value.toArray()}set gainMapMax(n){this.uniforms.gainMapMax.value.fromArray(n)}get gamma(){const n=this.uniforms.gamma.value;return[1/n.x,1/n.y,1/n.z]}set gamma(n){const i=this.uniforms.gamma.value;i.x=1/n[0],i.y=1/n[1],i.z=1/n[2]}get hdrCapacityMin(){return this._hdrCapacityMin}set hdrCapacityMin(n){this._hdrCapacityMin=n,this.calculateWeight()}get hdrCapacityMax(){return this._hdrCapacityMax}set hdrCapacityMax(n){this._hdrCapacityMax=n,this.calculateWeight()}get maxDisplayBoost(){return this._maxDisplayBoost}set maxDisplayBoost(n){this._maxDisplayBoost=Math.max(1,Math.min(65504,n)),this.calculateWeight()}calculateWeight(){const n=(Math.log2(this._maxDisplayBoost)-this._hdrCapacityMin)/(this._hdrCapacityMax-this._hdrCapacityMin);this.uniforms.weightFactor.value=Math.max(0,Math.min(1,n))}}class vf extends Error{}class Bf extends Error{}const mi=(a,n,i)=>{const u=new RegExp(`${n}="([^"]*)"`,"i").exec(a);if(u)return u[1];const o=new RegExp(`<${n}[^>]*>([\\s\\S]*?)</${n}>`,"i").exec(a);if(o){const f=o[1].match(/<rdf:li>([^<]*)<\/rdf:li>/g);return f&&f.length===3?f.map(c=>c.replace(/<\/?rdf:li>/g,"")):o[1].trim()}if(i!==void 0)return i;throw new Error(`Can't find ${n} in gainmap metadata`)},Em=a=>{let n;typeof TextDecoder<"u"?n=new TextDecoder().decode(a):n=a.toString();let i=n.indexOf("<x:xmpmeta");for(;i!==-1;){const u=n.indexOf("x:xmpmeta>",i),o=n.slice(i,u+10);try{const f=mi(o,"hdrgm:GainMapMin","0"),c=mi(o,"hdrgm:GainMapMax"),h=mi(o,"hdrgm:Gamma","1"),p=mi(o,"hdrgm:OffsetSDR","0.015625"),v=mi(o,"hdrgm:OffsetHDR","0.015625"),A=/hdrgm:HDRCapacityMin="([^"]*)"/.exec(o),m=A?A[1]:"0",B=/hdrgm:HDRCapacityMax="([^"]*)"/.exec(o);if(!B)throw new Error("Incomplete gainmap metadata");const y=B[1];return{gainMapMin:Array.isArray(f)?f.map(w=>parseFloat(w)):[parseFloat(f),parseFloat(f),parseFloat(f)],gainMapMax:Array.isArray(c)?c.map(w=>parseFloat(w)):[parseFloat(c),parseFloat(c),parseFloat(c)],gamma:Array.isArray(h)?h.map(w=>parseFloat(w)):[parseFloat(h),parseFloat(h),parseFloat(h)],offsetSdr:Array.isArray(p)?p.map(w=>parseFloat(w)):[parseFloat(p),parseFloat(p),parseFloat(p)],offsetHdr:Array.isArray(v)?v.map(w=>parseFloat(w)):[parseFloat(v),parseFloat(v),parseFloat(v)],hdrCapacityMin:parseFloat(m),hdrCapacityMax:parseFloat(y)}}catch{}i=n.indexOf("<x:xmpmeta",u)}};class wm{constructor(n){this.options={debug:n&&n.debug!==void 0?n.debug:!1,extractFII:n&&n.extractFII!==void 0?n.extractFII:!0,extractNonFII:n&&n.extractNonFII!==void 0?n.extractNonFII:!0}}extract(n){return new Promise((i,u)=>{const o=this.options.debug,f=new DataView(n.buffer);if(f.getUint16(0)!==65496){u(new Error("Not a valid jpeg"));return}const c=f.byteLength;let h=2,p=0,v;for(;h<c;){if(++p>250){u(new Error(`Found no marker after ${p} loops `));return}if(f.getUint8(h)!==255){u(new Error(`Not a valid marker at offset 0x${h.toString(16)}, found: 0x${f.getUint8(h).toString(16)}`));return}if(v=f.getUint8(h+1),o&&console.log(`Marker: ${v.toString(16)}`),v===226){o&&console.log("Found APP2 marker (0xffe2)");const A=h+4;if(f.getUint32(A)===1297106432){const m=A+4;let B;if(f.getUint16(m)===18761)B=!1;else if(f.getUint16(m)===19789)B=!0;else{u(new Error("No valid endianness marker found in TIFF header"));return}if(f.getUint16(m+2,!B)!==42){u(new Error("Not valid TIFF data! (no 0x002A marker)"));return}const y=f.getUint32(m+4,!B);if(y<8){u(new Error("Not valid TIFF data! (First offset less than 8)"));return}const w=m+y,D=f.getUint16(w,!B),F=w+2;let x=0;for(let W=F;W<F+12*D;W+=12)f.getUint16(W,!B)===45057&&(x=f.getUint32(W+8,!B));const O=w+2+D*12+4,Q=[];for(let W=O;W<O+x*16;W+=16){const X={MPType:f.getUint32(W,!B),size:f.getUint32(W+4,!B),dataOffset:f.getUint32(W+8,!B),dependantImages:f.getUint32(W+12,!B),start:-1,end:-1,isFII:!1};X.dataOffset?(X.start=m+X.dataOffset,X.isFII=!1):(X.start=0,X.isFII=!0),X.end=X.start+X.size,Q.push(X)}if(this.options.extractNonFII&&Q.length){const W=new Blob([f]),X=[];for(const K of Q){if(K.isFII&&!this.options.extractFII)continue;const I=W.slice(K.start,K.end+1,"image/jpeg");X.push(I)}i(X)}}}h+=2+f.getUint16(h+2)}})}}const Sm=async a=>{const n=Em(a);if(!n)throw new Bf("Gain map XMP metadata not found");const u=await new wm({extractFII:!0,extractNonFII:!0}).extract(a);if(u.length!==2)throw new vf("Gain map recovery image not found");return{sdr:new Uint8Array(await u[0].arrayBuffer()),gainMap:new Uint8Array(await u[1].arrayBuffer()),metadata:n}},dc=a=>new Promise((n,i)=>{const u=document.createElement("img");u.onload=()=>{n(u)},u.onerror=o=>{i(o)},u.src=URL.createObjectURL(a)});class Cf extends Wa{constructor(n,i){super(i),n&&(this._renderer=n),this._internalLoadingManager=new ap}setRenderer(n){return this._renderer=n,this}setRenderTargetOptions(n){return this._renderTargetOptions=n,this}prepareQuadRenderer(){this._renderer||console.warn("WARNING: An existing WebGL Renderer was not passed to this Loader constructor or in setRenderer, the result of this Loader will need to be converted to a Data Texture with toDataTexture() before you can use it in your renderer.");const n=new ym({gainMapMax:[1,1,1],gainMapMin:[0,0,0],gamma:[1,1,1],offsetHdr:[1,1,1],offsetSdr:[1,1,1],hdrCapacityMax:1,hdrCapacityMin:0,maxDisplayBoost:1,gainMap:new Jn,sdr:new Jn});return new tl({width:16,height:16,type:Yt,colorSpace:Pa,material:n,renderer:this._renderer,renderTargetOptions:this._renderTargetOptions})}async render(n,i,u,o){const f=o?new Blob([o],{type:"image/jpeg"}):void 0,c=new Blob([u],{type:"image/jpeg"});let h,p,v=!1;if(typeof createImageBitmap>"u"){const B=await Promise.all([f?dc(f):Promise.resolve(void 0),dc(c)]);p=B[0],h=B[1],v=!0}else{const B=await Promise.all([f?createImageBitmap(f,{imageOrientation:"flipY"}):Promise.resolve(void 0),createImageBitmap(c,{imageOrientation:"flipY"})]);p=B[0],h=B[1]}const A=new Jn(p||new ImageData(2,2),ks,En,En,Zt,Ju,Ur,Ps,1,Pa);A.flipY=v,A.needsUpdate=!0;const m=new Jn(h,ks,En,En,Zt,Ju,Ur,Ps,1,lp);m.flipY=v,m.needsUpdate=!0,n.width=h.width,n.height=h.height,n.material.gainMap=A,n.material.sdr=m,n.material.gainMapMin=i.gainMapMin,n.material.gainMapMax=i.gainMapMax,n.material.offsetHdr=i.offsetHdr,n.material.offsetSdr=i.offsetSdr,n.material.gamma=i.gamma,n.material.hdrCapacityMin=i.hdrCapacityMin,n.material.hdrCapacityMax=i.hdrCapacityMax,n.material.maxDisplayBoost=Math.pow(2,i.hdrCapacityMax),n.material.needsUpdate=!0,n.render()}}class Mm extends Cf{load([n,i,u],o,f,c){const h=this.prepareQuadRenderer();let p,v,A;const m=async()=>{if(p&&v&&A){try{await this.render(h,A,p,v)}catch(L){this.manager.itemError(n),this.manager.itemError(i),this.manager.itemError(u),typeof c=="function"&&c(L),h.disposeOnDemandRenderer();return}typeof o=="function"&&o(h),this.manager.itemEnd(n),this.manager.itemEnd(i),this.manager.itemEnd(u),h.disposeOnDemandRenderer()}};let B=!0,y=0,w=0,D=!0,F=0,x=0,_=!0,O=0,Q=0;const W=()=>{if(typeof f=="function"){const L=y+F+O,G=w+x+Q,H=B&&D&&_;f(new ProgressEvent("progress",{lengthComputable:H,loaded:G,total:L}))}};this.manager.itemStart(n),this.manager.itemStart(i),this.manager.itemStart(u);const X=new zn(this._internalLoadingManager);X.setResponseType("arraybuffer"),X.setRequestHeader(this.requestHeader),X.setPath(this.path),X.setWithCredentials(this.withCredentials),X.load(n,async L=>{if(typeof L=="string")throw new Error("Invalid sdr buffer");p=L,await m()},L=>{B=L.lengthComputable,w=L.loaded,y=L.total,W()},L=>{this.manager.itemError(n),typeof c=="function"&&c(L)});const K=new zn(this._internalLoadingManager);K.setResponseType("arraybuffer"),K.setRequestHeader(this.requestHeader),K.setPath(this.path),K.setWithCredentials(this.withCredentials),K.load(i,async L=>{if(typeof L=="string")throw new Error("Invalid gainmap buffer");v=L,await m()},L=>{D=L.lengthComputable,x=L.loaded,F=L.total,W()},L=>{this.manager.itemError(i),typeof c=="function"&&c(L)});const I=new zn(this._internalLoadingManager);return I.setRequestHeader(this.requestHeader),I.setPath(this.path),I.setWithCredentials(this.withCredentials),I.load(u,async L=>{if(typeof L!="string")throw new Error("Invalid metadata string");A=JSON.parse(L),await m()},L=>{_=L.lengthComputable,Q=L.loaded,O=L.total,W()},L=>{this.manager.itemError(u),typeof c=="function"&&c(L)}),h}}class xm extends Cf{load(n,i,u,o){const f=this.prepareQuadRenderer(),c=new zn(this._internalLoadingManager);return c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setPath(this.path),c.setWithCredentials(this.withCredentials),this.manager.itemStart(n),c.load(n,async h=>{if(typeof h=="string")throw new Error("Invalid buffer, received [string], was expecting [ArrayBuffer]");const p=new Uint8Array(h);let v,A,m;try{const B=await Sm(p);v=B.sdr,A=B.gainMap,m=B.metadata}catch(B){if(B instanceof Bf||B instanceof vf)console.warn(`Failure to reconstruct an HDR image from ${n}: Gain map metadata not found in the file, HDRJPGLoader will render the SDR jpeg`),m={gainMapMin:[0,0,0],gainMapMax:[1,1,1],gamma:[1,1,1],hdrCapacityMin:0,hdrCapacityMax:1,offsetHdr:[0,0,0],offsetSdr:[0,0,0]},v=p;else throw B}try{await this.render(f,m,v,A)}catch(B){this.manager.itemError(n),typeof o=="function"&&o(B),f.disposeOnDemandRenderer();return}typeof i=="function"&&i(f),this.manager.itemEnd(n),f.disposeOnDemandRenderer()},u,h=>{this.manager.itemError(n),typeof o=="function"&&o(h)}),f}}const Ci={apartment:"lebombo_1k.hdr",city:"potsdamer_platz_1k.hdr",dawn:"kiara_1_dawn_1k.hdr",forest:"forest_slope_1k.hdr",lobby:"st_fagans_interior_1k.hdr",night:"dikhololo_night_1k.hdr",park:"rooitou_park_1k.hdr",studio:"studio_small_03_1k.hdr",sunset:"venice_sunset_1k.hdr",warehouse:"empty_warehouse_01_1k.hdr"},yf="https://raw.githack.com/pmndrs/drei-assets/456060a26bbeb8fdf79326f224b6d99b8bcce736/hdri/",Nr=a=>Array.isArray(a),nl=["/px.png","/nx.png","/py.png","/ny.png","/pz.png","/nz.png"];function bs({files:a=nl,path:n="",preset:i=void 0,encoding:u=void 0,extensions:o}={}){let f=null,c=!1;i&&(rl(i),a=Ci[i],n=yf),c=Nr(a);const{extension:h,isCubemap:p}=il(a);if(f=sl(h),!f)throw new Error("useEnvironment: Unrecognized file extension: "+a);const v=Qn(y=>y.gl);U.useLayoutEffect(()=>{if(h!=="webp"&&h!=="jpg"&&h!=="jpeg")return;function y(){Mn.clear(f,c?[a]:a)}v.domElement.addEventListener("webglcontextlost",y,{once:!0})},[a,v.domElement]);const A=Mn(f,c?[a]:a,y=>{(h==="webp"||h==="jpg"||h==="jpeg")&&y.setRenderer(v),y.setPath==null||y.setPath(n),o&&o(y)});let m=c?A[0]:A;if(h==="jpg"||h==="jpeg"||h==="webp"){var B;m=(B=m.renderTarget)==null?void 0:B.texture}return m.mapping=p?cp:fp,"colorSpace"in m?m.colorSpace=u??p?"srgb":"srgb-linear":m.encoding=u??p?gm:Am,m}const Im={files:nl,path:"",preset:void 0,extensions:void 0};bs.preload=a=>{const n={...Im,...a};let{files:i,path:u=""}=n;const{preset:o,extensions:f}=n;o&&(rl(o),i=Ci[o],u=yf);const{extension:c}=il(i);if(c==="webp"||c==="jpg"||c==="jpeg")throw new Error("useEnvironment: Preloading gainmaps is not supported");const h=sl(c);if(!h)throw new Error("useEnvironment: Unrecognized file extension: "+i);Mn.preload(h,Nr(i)?[i]:i,p=>{p.setPath==null||p.setPath(u),f&&f(p)})};const Rm={files:nl,preset:void 0};bs.clear=a=>{const n={...Rm,...a};let{files:i}=n;const{preset:u}=n;u&&(rl(u),i=Ci[u]);const{extension:o}=il(i),f=sl(o);if(!f)throw new Error("useEnvironment: Unrecognized file extension: "+i);Mn.clear(f,Nr(i)?[i]:i)};function rl(a){if(!(a in Ci))throw new Error("Preset must be one of: "+Object.keys(Ci).join(", "))}function il(a){var n;const i=Nr(a)&&a.length===6,u=Nr(a)&&a.length===3&&a.some(c=>c.endsWith("json")),o=Nr(a)?a[0]:a;return{extension:i?"cube":u?"webp":o.startsWith("data:application/exr")?"exr":o.startsWith("data:application/hdr")?"hdr":o.startsWith("data:image/jpeg")?"jpg":(n=o.split(".").pop())==null||(n=n.split("?"))==null||(n=n.shift())==null?void 0:n.toLowerCase(),isCubemap:i,isGainmap:u}}function sl(a){return a==="cube"?dp:a==="hdr"?dm:a==="exr"?pm:a==="jpg"||a==="jpeg"?xm:a==="webp"?Mm:null}const Fm=a=>a.current&&a.current.isScene,Tm=a=>Fm(a)?a.current:a;function ol(a,n,i,u,o={}){var f,c,h,p;o={backgroundBlurriness:0,backgroundIntensity:1,backgroundRotation:[0,0,0],environmentIntensity:1,environmentRotation:[0,0,0],...o};const v=Tm(n||i),A=v.background,m=v.environment,B={backgroundBlurriness:v.backgroundBlurriness,backgroundIntensity:v.backgroundIntensity,backgroundRotation:(f=(c=v.backgroundRotation)==null||c.clone==null?void 0:c.clone())!==null&&f!==void 0?f:[0,0,0],environmentIntensity:v.environmentIntensity,environmentRotation:(h=(p=v.environmentRotation)==null||p.clone==null?void 0:p.clone())!==null&&h!==void 0?h:[0,0,0]};return a!=="only"&&(v.environment=u),a&&(v.background=u),jn(v,o),()=>{a!=="only"&&(v.environment=m),a&&(v.background=A),jn(v,B)}}function al({scene:a,background:n=!1,map:i,...u}){const o=Qn(f=>f.scene);return U.useLayoutEffect(()=>{if(i)return ol(n,a,o,i,u)}),null}function Ef({background:a=!1,scene:n,blur:i,backgroundBlurriness:u,backgroundIntensity:o,backgroundRotation:f,environmentIntensity:c,environmentRotation:h,...p}){const v=bs(p),A=Qn(m=>m.scene);return U.useLayoutEffect(()=>ol(a,n,A,v,{backgroundBlurriness:i??u,backgroundIntensity:o,backgroundRotation:f,environmentIntensity:c,environmentRotation:h})),U.useEffect(()=>()=>{v.dispose()},[v]),null}function _m({children:a,near:n=.1,far:i=1e3,resolution:u=256,frames:o=1,map:f,background:c=!1,blur:h,backgroundBlurriness:p,backgroundIntensity:v,backgroundRotation:A,environmentIntensity:m,environmentRotation:B,scene:y,files:w,path:D,preset:F=void 0,extensions:x}){const _=Qn(I=>I.gl),O=Qn(I=>I.scene),Q=U.useRef(null),[W]=U.useState(()=>new Qa),X=U.useMemo(()=>{const I=new pp(u);return I.texture.type=Yt,I},[u]);U.useEffect(()=>()=>{X.dispose()},[X]),U.useLayoutEffect(()=>{if(o===1){const I=_.autoClear;_.autoClear=!0,Q.current.update(_,W),_.autoClear=I}return ol(c,y,O,X.texture,{backgroundBlurriness:h??p,backgroundIntensity:v,backgroundRotation:A,environmentIntensity:m,environmentRotation:B})},[a,W,X.texture,y,O,c,o,_]);let K=1;return Js(()=>{if(o===1/0||K<o){const I=_.autoClear;_.autoClear=!0,Q.current.update(_,W),_.autoClear=I,K++}}),U.createElement(U.Fragment,null,Vp(U.createElement(U.Fragment,null,a,U.createElement("cubeCamera",{ref:Q,args:[n,i,X]}),w||F?U.createElement(Ef,{background:!0,files:w,preset:F,path:D,extensions:x}):f?U.createElement(al,{background:!0,map:f,extensions:x}):null),W))}function Dm(a){var n,i,u,o;const f=bs(a),c=a.map||f;U.useMemo(()=>bc({GroundProjectedEnvImpl:Th}),[]),U.useEffect(()=>()=>{f.dispose()},[f]);const h=U.useMemo(()=>[c],[c]),p=(n=a.ground)==null?void 0:n.height,v=(i=a.ground)==null?void 0:i.radius,A=(u=(o=a.ground)==null?void 0:o.scale)!==null&&u!==void 0?u:1e3;return U.createElement(U.Fragment,null,U.createElement(al,Ua({},a,{map:c})),U.createElement("groundProjectedEnvImpl",{args:h,scale:A,height:p,radius:v}))}function Gm(a){return a.ground?U.createElement(Dm,a):a.map?U.createElement(al,a):a.children?U.createElement(_m,a):U.createElement(Ef,a)}const pc=.15,hc=1,kn={minX:-17,maxX:17,minZ:-26,maxZ:-4},Tr={ground:new Tt(100,100),parkingSpace:new Tt(5,7),parkingLine:new Tt(.1,7),driveway:new Tt(8,15),cleanedPatch:new Tt(hc,hc),roadMarking:new Tt(3,.3)},_r={ground:new je({color:"#2c2c2c"}),parking:new je({color:"#404040"}),parkingLine:new je({color:"#ffffff"}),driveway:new je({color:"#505050",roughness:.8,metalness:.2}),cleaned:new je({color:"#ffffff",transparent:!0,opacity:.8,roughness:.1,metalness:.2,emissive:"#ffffff",emissiveIntensity:.2}),dirt:new je({color:"#3a3a3a",transparent:!0,opacity:.3,roughness:.9,metalness:.1})},ur={ground:-.01,road:.02,parking:0,driveway:.02,sidewalk:.04};function Lm({onStatsUpdate:a,movement:n}){const i=U.useRef(),[u,o]=U.useState(new Set),[f,c]=U.useState(new Set),[h,p]=U.useState(0),[v,A]=U.useState(0),[m,B]=U.useState(null),[y,w]=U.useState(!1),{camera:D,controls:F,gl:x}=Qn(),[_,O]=U.useState(!1),{scene:Q}=Jr("./lavobot.glb",!0),W=U.useMemo(()=>({ground:S.jsxs("mesh",{"rotation-x":-Math.PI/2,position:[0,ur.ground,0],receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.ground}),S.jsx("primitive",{object:_r.ground})]}),lighting:S.jsxs(S.Fragment,{children:[S.jsx("ambientLight",{intensity:.4}),S.jsx("directionalLight",{position:[10,20,10],intensity:.8,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-near":1}),S.jsx("pointLight",{position:[0,10,0],intensity:.5,distance:30,decay:2})]})}),[]),X=Kn.memo(({cells:G})=>Array.from(G).map(H=>{const[z,V,oe]=H.split(","),xe=ur[oe]+.005;return S.jsxs("mesh",{position:[Number(z),xe,Number(V)],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.cleanedPatch}),S.jsx("primitive",{object:_r.cleaned})]},`clean-${H}`)})),K=Kn.memo(({cells:G})=>Array.from(G).map(H=>{const[z,V,oe]=H.split(","),xe=ur[oe]+.0025;return S.jsxs("mesh",{position:[Number(z),xe,Number(V)],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.cleanedPatch}),S.jsx("primitive",{object:_r.dirt})]},`dirt-${H}`)})),I=Kn.memo(()=>{const G=[];for(let H=0;H<3;H++)for(let z=0;z<6;z++){const V=(z-2.5)*6,oe=(H-1)*8-15;G.push(S.jsxs("group",{children:[S.jsxs("mesh",{position:[V,0,oe],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.parkingSpace}),S.jsx("primitive",{object:_r.parking})]}),S.jsxs("mesh",{position:[V-2.4,.01,oe],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.parkingLine}),S.jsx("primitive",{object:_r.parkingLine})]}),S.jsxs("mesh",{position:[V+2.4,.01,oe],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Tr.parkingLine}),S.jsx("primitive",{object:_r.parkingLine})]})]},`parking-${H}-${z}`))}return S.jsx(S.Fragment,{children:G})});U.useEffect(()=>{const G=H=>{H.key==="v"&&w(z=>!z)};return window.addEventListener("keydown",G),()=>window.removeEventListener("keydown",G)},[]);const L=(G,H)=>{const z=H>=-26&&H<=-10;return Math.abs(G)<=17&&z?{cleanable:!0,type:"parking",height:ur.parking}:H>=-10&&H<=-2&&Math.abs(G)<=17?{cleanable:!0,type:"driveway",height:ur.driveway}:H>=-2&&H<=0&&Math.abs(G)<=17?{cleanable:!0,type:"road",height:ur.road}:{cleanable:!1,type:null,height:ur.ground}};return U.useEffect(()=>{const G=new Set;let H=0;for(let z=kn.minX;z<=kn.maxX;z++)for(let V=kn.minZ;V<=kn.maxZ;V++){const oe=L(z,V);oe.cleanable&&(G.add(`${Math.round(z)},${Math.round(V)},${oe.type}`),H++)}o(G),p(H)},[]),U.useEffect(()=>{const G=()=>{O(window.innerWidth<=768)};return G(),window.addEventListener("resize",G),()=>window.removeEventListener("resize",G)},[]),Js(()=>{if(!i.current)return;const G=i.current.position.clone();G.x+=n.x*pc,G.z+=n.z*pc,G.x=Math.max(kn.minX,Math.min(kn.maxX,G.x)),G.z=Math.max(kn.minZ,Math.min(kn.maxZ,G.z));const H=L(Math.round(G.x),Math.round(G.z));if(H.cleanable&&(G.y=H.height+.069),i.current.position.copy(G),D){if(y){const V=new Ze(0,.5,.75),oe=new Ze(0,.5,-3);D.position.copy(G).add(V),D.lookAt(G.clone().add(oe))}else{const V=new Ze(0,2,3);D.position.copy(G).add(V),D.lookAt(G)}F&&(F.target.copy(G),F.update())}const z=`${Math.round(G.x)},${Math.round(G.z)},${H.type}`;H.cleanable&&u.has(z)&&(o(V=>{const oe=new Set(V);return oe.delete(z),oe}),c(V=>new Set(V).add(z))),B(G.clone())}),U.useEffect(()=>{if(h>0){const G=(f.size/h*100).toFixed(1);A(G),a({progress:Number(G),cleanedTiles:f.size,totalTiles:h,remainingTiles:h-f.size})}},[f,h,a]),S.jsx(S.Fragment,{children:S.jsxs("group",{children:[W.ground,W.lighting,S.jsx(K,{cells:u}),S.jsx(X,{cells:f}),S.jsx(I,{}),S.jsx("primitive",{ref:i,object:Q.clone(),position:m||[0,.069,0],scale:[.5,.5,.5],rotation:[-Math.PI/2,0,Math.PI/2],castShadow:!0})]})})}const mc=.15,Ac=1,On={minX:-12,maxX:12,minZ:-12,maxZ:12},Ds={minX:-6,maxX:6,minZ:-4,maxZ:4},gc=[[-10,-10],[10,-10],[-10,10],[10,10]],vc=1.5,Cn={ground:new Tt(50,50),cleanedPatch:new Tt(Ac,Ac),poolEdge:new Ap(6.1,6.5,32),poolWater:new Tt(12,8),loungeChair:new Ft(2,.1,4),chairBase:new Ft(2,.2,1),planter:new Ft(3,1,3),plant:new mp(.4,8,8),palmTrunk:new Gs(.3,.4,4),palmLeaf:new hp(.5,2,4)},fn={ground:new je({color:"#4a4a4a"}),poolDeck:new je({color:"#e0e0e0",roughness:.8,metalness:.2}),poolWater:new je({color:"#4fc3f7",transparent:!0,opacity:.8}),poolEdge:new je({color:"#e0e0e0"}),furniture:new je({color:"#ffffff"}),planter:new je({color:"#8d6e63"}),plant:new je({color:"#2e7d32"}),cleaned:new je({color:"#ffffff",transparent:!0,opacity:.8,roughness:.1,metalness:.2,emissive:"#ffffff",emissiveIntensity:.2}),dirt:new je({color:"#3a3a3a",transparent:!0,opacity:.3,roughness:.9,metalness:.1})},Nn={ground:-.01,poolDeck:.02,poolWater:.1,poolEdge:.15};function Pm({onStatsUpdate:a,movement:n}){const i=U.useRef(),[u,o]=U.useState(new Set),[f,c]=U.useState(new Set),[h,p]=U.useState(0),[v,A]=U.useState(0),[m,B]=U.useState(null),[y,w]=U.useState(!1),{camera:D,controls:F}=Qn(),[x,_]=U.useState(!1),{scene:O}=Jr("./lavobot.glb",!0),Q=(I,L)=>I>=Ds.minX&&I<=Ds.maxX&&L>=Ds.minZ&&L<=Ds.maxZ?!0:gc.some(([G,H])=>Math.abs(I-G)<vc&&Math.abs(L-H)<vc),W=U.useMemo(()=>({ground:S.jsxs("mesh",{"rotation-x":-Math.PI/2,position:[0,Nn.ground,0],receiveShadow:!0,children:[S.jsx("primitive",{object:Cn.ground}),S.jsx("primitive",{object:fn.ground})]}),pool:S.jsxs("group",{position:[0,0,0],children:[S.jsxs("mesh",{position:[0,Nn.poolWater,0],"rotation-x":-Math.PI/2,children:[S.jsx("primitive",{object:Cn.poolWater}),S.jsx("primitive",{object:fn.poolWater})]}),S.jsxs("mesh",{position:[0,Nn.poolEdge,0],"rotation-x":-Math.PI/2,children:[S.jsx("primitive",{object:Cn.poolEdge}),S.jsx("primitive",{object:fn.poolEdge})]})]}),poolDeck:S.jsxs("mesh",{position:[0,Nn.poolDeck,0],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("planeGeometry",{args:[24,24]}),S.jsx("primitive",{object:fn.poolDeck})]}),lighting:S.jsxs(S.Fragment,{children:[S.jsx("ambientLight",{intensity:.4}),S.jsx("directionalLight",{position:[10,20,10],intensity:.8,castShadow:!0,"shadow-mapSize-width":1024,"shadow-mapSize-height":1024,"shadow-camera-far":50,"shadow-camera-near":1}),S.jsx("pointLight",{position:[0,.5,0],intensity:.3,color:"#4fc3f7"}),[[-10,-10],[10,-10],[-10,10],[10,10]].map(([I,L],G)=>S.jsx("pointLight",{position:[I,.5,L],intensity:.2,distance:5,decay:2,color:"#ffd700"},G))]})}),[]),X=Kn.memo(({cells:I})=>Array.from(I).map(L=>{const[G,H]=L.split(",").map(Number);return S.jsxs("mesh",{position:[G,Nn.poolDeck+.005,H],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Cn.cleanedPatch}),S.jsx("primitive",{object:fn.cleaned})]},`clean-${L}`)})),K=Kn.memo(({cells:I})=>Array.from(I).map(L=>{const[G,H]=L.split(",").map(Number);return S.jsxs("mesh",{position:[G,Nn.poolDeck+.002,H],"rotation-x":-Math.PI/2,receiveShadow:!0,children:[S.jsx("primitive",{object:Cn.cleanedPatch}),S.jsx("primitive",{object:fn.dirt})]},`dirt-${L}`)}));return U.useEffect(()=>{const I=new Set;let L=0;for(let G=On.minX;G<=On.maxX;G++)for(let H=On.minZ;H<=On.maxZ;H++)Q(G,H)||(I.add(`${Math.round(G)},${Math.round(H)}`),L++);o(I),p(L)},[]),U.useEffect(()=>{const I=L=>{L.key==="v"&&w(G=>!G)};return window.addEventListener("keydown",I),()=>window.removeEventListener("keydown",I)},[]),U.useEffect(()=>{const I=()=>{_(window.innerWidth<=768)};return I(),window.addEventListener("resize",I),()=>window.removeEventListener("resize",I)},[]),Js(()=>{if(!i.current)return;const I=i.current.position.clone(),L=I.x+n.x*mc,G=I.z+n.z*mc;if(Q(L,G)||(I.x=Math.max(On.minX,Math.min(On.maxX,L)),I.z=Math.max(On.minZ,Math.min(On.maxZ,G)),I.y=Nn.poolDeck+.069),i.current.position.copy(I),D){if(y){const z=new Ze(0,.5,.75),V=new Ze(0,.5,-3);D.position.copy(I).add(z),D.lookAt(I.clone().add(V))}else{const z=new Ze(0,2,3);D.position.copy(I).add(z),D.lookAt(I)}F&&(F.target.copy(I),F.update())}const H=`${Math.round(I.x)},${Math.round(I.z)}`;u.has(H)&&(o(z=>{const V=new Set(z);return V.delete(H),V}),c(z=>new Set(z).add(H))),B(I.clone())}),U.useEffect(()=>{if(h>0){const I=(f.size/h*100).toFixed(1);A(I),a({progress:Number(I),cleanedTiles:f.size,totalTiles:h,remainingTiles:h-f.size})}},[f,h,a]),S.jsx(S.Fragment,{children:S.jsxs("group",{children:[W.ground,W.lighting,W.poolDeck,W.pool,S.jsx(K,{cells:u}),S.jsx(X,{cells:f}),[[-5,3],[5,3],[-5,-3],[5,-3]].map(([I,L],G)=>S.jsxs("group",{position:[I,0,L],children:[S.jsxs("mesh",{position:[0,.2,0],"rotation-x":-Math.PI/6,children:[S.jsx("primitive",{object:Cn.loungeChair}),S.jsx("primitive",{object:fn.furniture})]}),S.jsxs("mesh",{position:[0,.1,.5],children:[S.jsx("primitive",{object:Cn.chairBase}),S.jsx("primitive",{object:fn.furniture})]})]},G)),gc.map(([I,L],G)=>S.jsxs("group",{position:[I,0,L],children:[S.jsxs("mesh",{position:[0,.5,0],castShadow:!0,children:[S.jsx("primitive",{object:Cn.planter}),S.jsx("primitive",{object:fn.planter})]}),S.jsx("group",{position:[0,1,0],children:Array.from({length:5},(H,z)=>{const V=z*Math.PI*.4;return S.jsxs("mesh",{position:[Math.sin(V)*.5,.3,Math.cos(V)*.5],castShadow:!0,children:[S.jsx("primitive",{object:Cn.plant}),S.jsx("primitive",{object:fn.plant})]},z)})})]},G)),S.jsx("primitive",{ref:i,object:O.clone(),position:m||[-8,Nn.poolDeck+.069,-8],scale:[.5,.5,.5],rotation:[-Math.PI/2,0,Math.PI/2],castShadow:!0})]})})}const Bc=.15,Cc=1,Un={minX:-15,maxX:15,minZ:-10,maxZ:10},kr={x:-8,z:-6,width:1.5,length:3},at={ground:new Tt(40,30),cleanedPatch:new Tt(Cc,Cc),parkingSpace:new Tt(4.5,8),parkingLine:new Tt(.1,8),column:new Gs(.3,.3,4,8),car:{chassis:new Ft(1.5,.3,3),body:new Ft(1.4,.4,1.8),hood:new Ft(1.3,.15,.7),trunk:new Ft(1.3,.15,.4),roof:new Ft(1.2,.35,1),windshield:new Ft(1.1,.3,.05),backWindow:new Ft(1.1,.3,.05),sideWindow:new Ft(.05,.2,.8),wheel:new Gs(.15,.15,.1,16),hubcap:new Gs(.1,.1,.02,8),headlight:new Ft(.2,.1,.05),taillight:new Ft(.2,.1,.05),grille:new Ft(.7,.15,.05),bumper:new Ft(1.4,.1,.15)}},$e={floor:new je({color:"#505050",roughness:.7,metalness:.1}),ceiling:new je({color:"#404040",roughness:.8,metalness:.2}),walls:new je({color:"#606060",roughness:.7,metalness:.1}),columns:new je({color:"#707070",roughness:.8,metalness:.2}),parkingLines:new je({color:"#ffffff",roughness:.5,metalness:.1,emissive:"#404040",emissiveIntensity:.2}),car:{body:new je({color:"#2E5894",roughness:.2,metalness:.8}),windows:new je({color:"#1a1a1a",roughness:.1,metalness:.9,opacity:.7,transparent:!0}),wheels:new je({color:"#1a1a1a",roughness:.8,metalness:.2}),chrome:new je({color:"#CCCCCC",roughness:.1,metalness:.9}),lights:{head:new je({color:"#FFFFFF",emissive:"#FFFFFF",emissiveIntensity:.5}),tail:new je({color:"#FF0000",emissive:"#FF0000",emissiveIntensity:.5})}},cleaned:new je({color:"#ffffff",transparent:!0,opacity:.8,roughness:.1,metalness:.2,emissive:"#ffffff",emissiveIntensity:.3}),dirt:new je({color:"#3a3a3a",transparent:!0,opacity:.4,roughness:.9,metalness:.1})},yc=(a,n)=>Math.abs(a-kr.x)<kr.width/2&&Math.abs(n-kr.z)<kr.length/2;function Hm({onStatsUpdate:a,movement:n}){const i=U.useRef(),[u,o]=U.useState(new Set),[f,c]=U.useState(new Set),[h,p]=U.useState(0),[v,A]=U.useState(0),[m,B]=U.useState(null),[y,w]=U.useState(!1),{camera:D,controls:F}=Qn(),[x,_]=U.useState(!1),{scene:O}=Jr("./lavobot.glb",!0),Q=U.useMemo(()=>({structure:S.jsxs("group",{children:[S.jsxs("mesh",{position:[0,4,0],"rotation-x":Math.PI/2,receiveShadow:!0,frustumCulled:!0,children:[S.jsx("primitive",{object:at.ground}),S.jsx("primitive",{object:$e.ceiling})]}),S.jsxs("mesh",{"rotation-x":-Math.PI/2,position:[0,0,0],receiveShadow:!0,frustumCulled:!0,children:[S.jsx("primitive",{object:at.ground}),S.jsx("primitive",{object:$e.floor})]}),S.jsxs("mesh",{position:[0,2,-10],castShadow:!0,frustumCulled:!0,children:[S.jsx("boxGeometry",{args:[30,4,.5]}),S.jsx("primitive",{object:$e.walls})]}),S.jsxs("mesh",{position:[-15,2,0],"rotation-y":Math.PI/2,castShadow:!0,frustumCulled:!0,children:[S.jsx("boxGeometry",{args:[20,4,.5]}),S.jsx("primitive",{object:$e.walls})]}),S.jsxs("mesh",{position:[15,2,0],"rotation-y":Math.PI/2,castShadow:!0,frustumCulled:!0,children:[S.jsx("boxGeometry",{args:[20,4,.5]}),S.jsx("primitive",{object:$e.walls})]}),S.jsxs("mesh",{position:[0,2,10],castShadow:!0,frustumCulled:!0,children:[S.jsx("boxGeometry",{args:[30,4,.5]}),S.jsx("primitive",{object:$e.walls})]}),S.jsxs("mesh",{position:[10,1.5,10],castShadow:!0,frustumCulled:!0,children:[S.jsx("boxGeometry",{args:[8,3,.5]}),S.jsx("meshStandardMaterial",{color:"#1a1a1a",opacity:.7,transparent:!0})]})]}),lighting:S.jsxs(S.Fragment,{children:[S.jsx("ambientLight",{intensity:.5}),S.jsx("directionalLight",{position:[10,20,10],intensity:.6,castShadow:!0,"shadow-mapSize-width":512,"shadow-mapSize-height":512,"shadow-camera-far":50,"shadow-camera-near":1,"shadow-bias":-.001,children:S.jsx("orthographicCamera",{attach:"shadow-camera",args:[-30,30,30,-30,.1,50]})}),Array.from({length:3},(K,I)=>Array.from({length:2},(L,G)=>S.jsx("pointLight",{position:[(I-1)*10,3.8,(G-.5)*12],intensity:1,distance:12,decay:1.5,color:"#fff7e6"},`light-${I}-${G}`))),Array.from({length:4},(K,I)=>S.jsx("pointLight",{position:[(I-1.5)*8,2.5,-9.5],intensity:.3,distance:5,decay:1.5,color:"#ff4444"},`emergency-${I}`))]})}),[]),W=Kn.memo(({cells:K})=>Array.from(K).map(I=>{const[L,G]=I.split(",").map(Number);return S.jsxs("mesh",{position:[L,.005,G],"rotation-x":-Math.PI/2,receiveShadow:!0,frustumCulled:!0,children:[S.jsx("primitive",{object:at.cleanedPatch}),S.jsx("primitive",{object:$e.cleaned})]},`clean-${I}`)})),X=Kn.memo(({cells:K})=>Array.from(K).map(I=>{const[L,G]=I.split(",").map(Number);return S.jsxs("mesh",{position:[L,.002,G],"rotation-x":-Math.PI/2,receiveShadow:!0,frustumCulled:!0,children:[S.jsx("primitive",{object:at.cleanedPatch}),S.jsx("primitive",{object:$e.dirt})]},`dirt-${I}`)}));return U.useEffect(()=>{const K=new Set;let I=0;for(let L=Un.minX;L<=Un.maxX;L++)for(let G=Un.minZ;G<=Un.maxZ;G++)yc(L,G)||(K.add(`${Math.round(L)},${Math.round(G)}`),I++);o(K),p(I)},[]),U.useEffect(()=>{const K=I=>{I.key==="v"&&w(L=>!L)};return window.addEventListener("keydown",K),()=>window.removeEventListener("keydown",K)},[]),U.useEffect(()=>{const K=()=>{_(window.innerWidth<=768)};return K(),window.addEventListener("resize",K),()=>window.removeEventListener("resize",K)},[]),U.useEffect(()=>{if(!x){let K=0;const I=16,L=H=>{const z=performance.now();if(!(z-K<I))switch(K=z,H.preventDefault(),H.key){case"ArrowUp":n(V=>({...V,z:-1}));break;case"ArrowDown":n(V=>({...V,z:1}));break;case"ArrowLeft":n(V=>({...V,x:-1}));break;case"ArrowRight":n(V=>({...V,x:1}));break}},G=H=>{switch(H.key){case"ArrowUp":case"ArrowDown":n(z=>({...z,z:0}));break;case"ArrowLeft":case"ArrowRight":n(z=>({...z,x:0}));break}};return window.addEventListener("keydown",L),window.addEventListener("keyup",G),()=>{window.removeEventListener("keydown",L),window.removeEventListener("keyup",G)}}},[x]),Js(()=>{if(!i.current)return;const K=i.current.position.clone(),I=K.x+n.x*Bc,L=K.z+n.z*Bc;if(yc(I,L)||(K.x=Math.max(Un.minX,Math.min(Un.maxX,I)),K.z=Math.max(Un.minZ,Math.min(Un.maxZ,L)),K.y=.069),i.current.position.copy(K),D){if(y){const H=new Ze(0,.5,.75),z=new Ze(0,.5,-3);D.position.copy(K).add(H),D.lookAt(K.clone().add(z))}else{const H=new Ze(0,2,3);D.position.copy(K).add(H),D.lookAt(K)}F&&(F.target.copy(K),F.update())}const G=`${Math.round(K.x)},${Math.round(K.z)}`;u.has(G)&&(o(H=>{const z=new Set(H);return z.delete(G),z}),c(H=>new Set(H).add(G))),B(K.clone())}),U.useEffect(()=>{if(h>0){const K=(f.size/h*100).toFixed(1);A(K),a({progress:Number(K),cleanedTiles:f.size,totalTiles:h,remainingTiles:h-f.size})}},[f,h,a]),S.jsx(S.Fragment,{children:S.jsxs("group",{children:[Q.structure,Q.lighting,S.jsx(X,{cells:u}),S.jsx(W,{cells:f}),Array.from({length:3},(K,I)=>Array.from({length:3},(L,G)=>S.jsxs("mesh",{position:[(I-1)*10,2,(G-1)*6],castShadow:!0,frustumCulled:!0,children:[S.jsx("primitive",{object:at.column}),S.jsx("primitive",{object:$e.columns})]},`column-${I}-${G}`))),S.jsxs("group",{position:[kr.x,.2,kr.z],children:["  ",S.jsxs("mesh",{position:[0,.15,0],castShadow:!0,children:[S.jsx("primitive",{object:at.car.chassis}),S.jsx("primitive",{object:$e.car.body})]}),S.jsxs("mesh",{position:[0,.5,-.2],castShadow:!0,children:[S.jsx("primitive",{object:at.car.body}),S.jsx("primitive",{object:$e.car.body})]}),S.jsxs("mesh",{position:[0,.45,-1],castShadow:!0,children:[S.jsx("primitive",{object:at.car.hood}),S.jsx("primitive",{object:$e.car.body})]}),S.jsxs("mesh",{position:[0,.45,1],castShadow:!0,children:[S.jsx("primitive",{object:at.car.trunk}),S.jsx("primitive",{object:$e.car.body})]}),S.jsxs("mesh",{position:[0,.7,-.2],castShadow:!0,children:[S.jsx("primitive",{object:at.car.roof}),S.jsx("primitive",{object:$e.car.body})]}),S.jsxs("mesh",{position:[0,.65,-.7],"rotation-x":Math.PI*.2,castShadow:!0,children:[S.jsx("primitive",{object:at.car.windshield}),S.jsx("primitive",{object:$e.car.windows})]}),S.jsxs("mesh",{position:[0,.65,.3],"rotation-x":-Math.PI*.2,castShadow:!0,children:[S.jsx("primitive",{object:at.car.backWindow}),S.jsx("primitive",{object:$e.car.windows})]}),[-.7,.7].map((K,I)=>S.jsxs("mesh",{position:[K,.6,-.2],castShadow:!0,children:[S.jsx("primitive",{object:at.car.sideWindow}),S.jsx("primitive",{object:$e.car.windows})]},`side-window-${I}`)),[[-.6,-.25,-.8],[.6,-.25,-.8],[-.6,-.25,.8],[.6,-.25,.8]].map(([K,I,L],G)=>S.jsxs("group",{children:[S.jsxs("mesh",{position:[K,I,L],"rotation-z":Math.PI/2,castShadow:!0,children:[S.jsx("primitive",{object:at.car.wheel}),S.jsx("primitive",{object:$e.car.wheels})]}),S.jsxs("mesh",{position:[K,I-.06,L],"rotation-z":Math.PI/2,castShadow:!0,children:[S.jsx("primitive",{object:at.car.hubcap}),S.jsx("primitive",{object:$e.car.chrome})]})]},`wheel-${G}`)),S.jsxs("mesh",{position:[0,.35,-1.3],castShadow:!0,children:[S.jsx("primitive",{object:at.car.grille}),S.jsx("primitive",{object:$e.car.chrome})]}),[-.5,.5].map((K,I)=>S.jsxs("mesh",{position:[K,.4,-1.3],castShadow:!0,children:[S.jsx("primitive",{object:at.car.headlight}),S.jsx("primitive",{object:$e.car.lights.head})]},`headlight-${I}`)),S.jsxs("mesh",{position:[0,.3,-1.3],castShadow:!0,children:[S.jsx("primitive",{object:at.car.bumper}),S.jsx("primitive",{object:$e.car.chrome})]}),[-.5,.5].map((K,I)=>S.jsxs("mesh",{position:[K,.4,1.3],castShadow:!0,children:[S.jsx("primitive",{object:at.car.taillight}),S.jsx("primitive",{object:$e.car.lights.tail})]},`taillight-${I}`)),S.jsxs("mesh",{position:[0,.3,1.3],castShadow:!0,children:[S.jsx("primitive",{object:at.car.bumper}),S.jsx("primitive",{object:$e.car.chrome})]})]}),S.jsx("primitive",{ref:i,object:O.clone(),position:m||[-1,.069,0],scale:[.5,.5,.5],rotation:[-Math.PI/2,0,Math.PI/2],castShadow:!0})]})})}function km(){const[a,n]=U.useState("parkingLot"),[i,u]=U.useState(!1),[o,f]=U.useState({x:0,z:0}),[c,h]=U.useState({progress:0,cleanedTiles:0,totalTiles:0,remainingTiles:0});U.useEffect(()=>{const m=()=>{u(window.innerWidth<=768)};return m(),window.addEventListener("resize",m),()=>window.removeEventListener("resize",m)},[]),U.useEffect(()=>{const m=y=>{switch(y.key){case"ArrowUp":f(w=>({...w,z:-1}));break;case"ArrowDown":f(w=>({...w,z:1}));break;case"ArrowLeft":f(w=>({...w,x:-1}));break;case"ArrowRight":f(w=>({...w,x:1}));break}},B=y=>{switch(y.key){case"ArrowUp":case"ArrowDown":f(w=>({...w,z:0}));break;case"ArrowLeft":case"ArrowRight":f(w=>({...w,x:0}));break}};return window.addEventListener("keydown",m),window.addEventListener("keyup",B),()=>{window.removeEventListener("keydown",m),window.removeEventListener("keyup",B)}},[]);const p=m=>{h(m)},v=m=>{switch(m){case"up":f({x:0,z:-1});break;case"down":f({x:0,z:1});break;case"left":f({x:-1,z:0});break;case"right":f({x:1,z:0});break;default:f({x:0,z:0})}},A=()=>{f({x:0,z:0})};return S.jsxs("div",{style:{width:"100vw",height:"100vh",position:"relative",overflow:"hidden"},children:[S.jsxs("div",{style:{position:"absolute",top:i?"10px":"20px",right:i?"10px":"20px",background:"rgba(0, 0, 0, 0.85)",padding:i?"10px":"20px",borderRadius:"15px",color:"white",fontFamily:"Arial, sans-serif",minWidth:i?"120px":"250px",maxWidth:i?"150px":"none",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.3)",border:"2px solid rgba(255, 255, 255, 0.1)",zIndex:1e3,fontSize:i?"12px":"14px",pointerEvents:"none"},children:[S.jsx("div",{style:{fontSize:i?"16px":"20px",fontWeight:"bold",color:"#4fc3f7",marginBottom:i?"10px":"15px",textAlign:"center",textShadow:"0 2px 4px rgba(0,0,0,0.5)"},children:"Progress"}),S.jsx("div",{style:{width:"100%",height:i?"15px":"20px",background:"rgba(255,255,255,0.1)",borderRadius:"10px",overflow:"hidden",marginBottom:i?"10px":"15px"},children:S.jsx("div",{style:{width:`${c.progress}%`,height:"100%",background:"linear-gradient(90deg, #4CAF50, #81c784)",transition:"width 0.3s ease-in-out"}})}),S.jsxs("div",{style:{fontSize:i?"18px":"24px",fontWeight:"bold",color:"#81c784",textAlign:"center",marginBottom:i?"10px":"15px"},children:[c.progress,"%"]}),S.jsxs("div",{style:{display:"grid",gap:i?"5px":"10px",fontSize:i?"12px":"14px",color:"#b0bec5"},children:[S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"Cleaned:"}),S.jsxs("span",{style:{color:"#4fc3f7"},children:[c.cleanedTiles,"/",c.totalTiles]})]}),S.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[S.jsx("span",{children:"Left:"}),S.jsx("span",{style:{color:"#ff8a65"},children:c.remainingTiles})]})]})]}),S.jsxs(mh,{shadows:!0,camera:{position:[0,5,10],fov:60},style:{position:"absolute",top:0,left:0,touchAction:"none",WebkitTouchCallout:"none",WebkitUserSelect:"none",KhtmlUserSelect:"none",MozUserSelect:"none",msUserSelect:"none",userSelect:"none"},children:[a==="parkingLot"&&S.jsx(Lm,{onStatsUpdate:p,movement:o}),a==="driveway"&&S.jsx(Pm,{onStatsUpdate:p,movement:o}),a==="parkingGarage"&&S.jsx(Hm,{onStatsUpdate:p,movement:o}),S.jsx(Gm,{preset:"city"})]}),i&&S.jsxs("div",{style:{position:"fixed",bottom:"140px",left:"50%",transform:"translateX(-50%)",display:"grid",gridTemplateColumns:"repeat(3, 60px)",gridTemplateRows:"repeat(3, 60px)",gap:"5px",zIndex:2e3},children:[S.jsx("div",{style:{gridColumn:"2"},children:S.jsx("button",{onTouchStart:()=>v("up"),onTouchEnd:A,style:{width:"60px",height:"60px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"2px solid white",borderRadius:"50%",color:"white",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none",WebkitTapHighlightColor:"transparent"},children:""})}),S.jsx("div",{style:{gridRow:"2"},children:S.jsx("button",{onTouchStart:()=>v("left"),onTouchEnd:A,style:{width:"60px",height:"60px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"2px solid white",borderRadius:"50%",color:"white",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none",WebkitTapHighlightColor:"transparent"},children:""})}),S.jsx("div",{style:{gridColumn:"3",gridRow:"2"},children:S.jsx("button",{onTouchStart:()=>v("right"),onTouchEnd:A,style:{width:"60px",height:"60px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"2px solid white",borderRadius:"50%",color:"white",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none",WebkitTapHighlightColor:"transparent"},children:""})}),S.jsx("div",{style:{gridColumn:"2",gridRow:"3"},children:S.jsx("button",{onTouchStart:()=>v("down"),onTouchEnd:A,style:{width:"60px",height:"60px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"2px solid white",borderRadius:"50%",color:"white",fontSize:"24px",display:"flex",alignItems:"center",justifyContent:"center",touchAction:"none",WebkitTapHighlightColor:"transparent"},children:""})})]}),S.jsxs("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",display:"flex",flexDirection:"row",gap:"10px",background:"rgba(0, 0, 0, 0.7)",padding:"10px",borderRadius:"10px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1e3,pointerEvents:"auto"},children:[S.jsx("button",{onClick:()=>n("parkingLot"),style:{padding:i?"8px 15px":"10px 20px",background:a==="parkingLot"?"#4CAF50":"#2C3E50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background 0.3s",fontSize:i?"14px":"16px",whiteSpace:"nowrap"},children:"Parking Lot"}),S.jsx("button",{onClick:()=>n("driveway"),style:{padding:i?"8px 15px":"10px 20px",background:a==="driveway"?"#4CAF50":"#2C3E50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background 0.3s",fontSize:i?"14px":"16px",whiteSpace:"nowrap"},children:"Pool Deck"}),S.jsx("button",{onClick:()=>n("parkingGarage"),style:{padding:i?"8px 15px":"10px 20px",background:a==="parkingGarage"?"#4CAF50":"#2C3E50",color:"white",border:"none",borderRadius:"5px",cursor:"pointer",transition:"background 0.3s",fontSize:i?"14px":"16px",whiteSpace:"nowrap"},children:"Parking Garage"})]})]})}Ha.createRoot(document.getElementById("root")).render(S.jsx(Kn.StrictMode,{children:S.jsx(km,{})}));
